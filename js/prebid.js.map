{"version":3,"sources":["webpack:///webpack/bootstrap cb0ab98febda09ad2803","webpack:///./src/prebid.js","webpack:///./src/prebidGlobal.js","webpack:///./src/utils.js","webpack:///./src/constants.json","webpack:///./src/video.js","webpack:///./src/adaptermanager.js","webpack:///./src/sizeMapping.js","webpack:///./src/adapters/baseAdapter.js","webpack:///./src/events.js","webpack:///./src/adapters/aardvark.js","webpack:///./src/bidfactory.js","webpack:///./src/bidmanager.js","webpack:///./src/cpmBucketManager.js","webpack:///./src/adloader.js","webpack:///./src/adapters/adapter.js","webpack:///./src/adapters/adblade.js","webpack:///./src/adapters/adbund.js","webpack:///./src/adapters/adbutler.js","webpack:///./src/adapters/adequant.js","webpack:///./src/adapters/adform.js","webpack:///./src/adapters/adkernel.js","webpack:///./src/ajax.js","webpack:///./src/url.js","webpack:///./src/adapters/admedia.js","webpack:///./src/adapters/bidfluence.js","webpack:///./src/adapters/vertamedia.js","webpack:///./src/adapters/aol.js","webpack:///./src/adapters/appnexus.js","webpack:///./src/adapters/appnexusAst.js","webpack:///./src/adapters/audienceNetwork.js","webpack:///./src/adapters/conversant.js","webpack:///./src/adapters/districtmDMX.js","webpack:///./src/adapters/fidelity.js","webpack:///./src/adapters/gumgum.js","webpack:///./src/adapters/hiromedia.js","webpack:///./src/adapters/indexExchange.js","webpack:///./src/adapters/kruxlink.js","webpack:///./src/adapters/getintent.js","webpack:///./src/adapters/komoona.js","webpack:///./src/adapters/lifestreet.js","webpack:///./src/adapters/mantis.js","webpack:///./src/adapters/openx.js","webpack:///./src/adapters/piximedia.js","webpack:///./src/adapters/pubmatic.js","webpack:///./src/adapters/pulsepoint.js","webpack:///./src/adapters/pulsepointLite.js","webpack:///./src/adapters/rhythmone.js","webpack:///./src/adapters/rubicon.js","webpack:///./src/adapters/smartyads.js","webpack:///./src/adapters/smartadserver.js","webpack:///./src/adapters/sekindoUM.js","webpack:///./src/adapters/serverbid.js","webpack:///./src/adapters/sonobi.js","webpack:///./src/adapters/sovrn.js","webpack:///./src/adapters/springserve.js","webpack:///./src/adapters/thoughtleadr.js","webpack:///./src/adapters/stickyadstv.js","webpack:///./src/adapters/triplelift.js","webpack:///./src/adapters/twenga.js","webpack:///./src/adapters/yieldbot.js","webpack:///./src/adapters/nginad.js","webpack:///./src/adapters/brightcom.js","webpack:///./src/adapters/wideorbit.js","webpack:///./src/adapters/jcm.js","webpack:///./src/adapters/underdogmedia.js","webpack:///./src/adapters/memeglobal.js","webpack:///./src/adapters/criteo.js","webpack:///./src/adapters/centro.js","webpack:///./src/adapters/xhb.js","webpack:///./src/adapters/sharethrough.js","webpack:///./src/adapters/roxot.js","webpack:///./src/adapters/vertoz.js","webpack:///./src/adapters/widespace.js","webpack:///./src/adapters/admixer.js","webpack:///./src/adapters/tapsense.js","webpack:///./src/polyfill.js","webpack:///./~/array.prototype.find/shim.js","webpack:///./~/define-properties/index.js","webpack:///./~/define-properties/~/object-keys/index.js","webpack:///./~/define-properties/~/object-keys/isArguments.js","webpack:///./~/foreach/index.js","webpack:///./~/array.prototype.find/polyfill.js","webpack:///./~/array.prototype.find/implementation.js","webpack:///./~/es-abstract/es6.js","webpack:///./~/es-abstract/helpers/isNaN.js","webpack:///./~/es-abstract/helpers/isFinite.js","webpack:///./~/es-abstract/helpers/assign.js","webpack:///./~/es-abstract/helpers/sign.js","webpack:///./~/es-abstract/helpers/mod.js","webpack:///./~/es-abstract/helpers/isPrimitive.js","webpack:///./~/es-to-primitive/es6.js","webpack:///./~/es-to-primitive/helpers/isPrimitive.js","webpack:///./~/is-callable/index.js","webpack:///./~/is-date-object/index.js","webpack:///./~/is-symbol/index.js","webpack:///./~/function-bind/index.js","webpack:///./~/function-bind/implementation.js","webpack:///./~/es-abstract/es5.js","webpack:///./~/es-to-primitive/es5.js","webpack:///./~/is-regex/index.js","webpack:///./~/has/src/index.js","webpack:///./~/array-includes/shim.js","webpack:///./~/array-includes/polyfill.js","webpack:///./~/array-includes/implementation.js","webpack:///./src/secure-creatives.js","webpack:///./src/adserver.js","webpack:///./src/targeting.js"],"names":["pbjs","CONSTANTS","require","utils","bidmanager","adaptermanager","bidfactory","adloader","events","adserver","targeting","objectType_function","objectType_undefined","objectType_object","BID_WON","EVENTS","SET_TARGETING","auctionRunning","bidRequestQueue","eventValidators","bidWon","checkDefinedPlacement","_bidsRequested","_bidsReceived","_adUnitCodes","_winningBids","_adsReceived","_sendAllBids","bidderSettings","bidderTimeout","cbTimeout","timeoutBuffer","logging","publisherDomain","window","location","origin","libLoaded","version","logInfo","adUnits","que","push","cmd","call","e","logError","message","processQue","i","length","called","id","placementCodes","map","bidSet","bids","bid","placementCode","reduce","filter","contains","clearPlacements","includes","adUnitCode","setRenderSize","doc","width","height","defaultView","frameElement","getAdserverTargetingForAdUnitCodeStr","adunitCode","arguments","res","getAdserverTargetingForAdUnitCode","transformAdServerTargetingObj","logMessage","getAdserverTargeting","getAllTargeting","Object","keys","target","join","p","c","accumulator","key","getBidResponses","responses","bind","currentRequestId","requestId","a","b","getBidResponsesForAdUnitCode","setTargetingForGPTAsync","resetPresetTargeting","setTargeting","emit","setTargetingForAst","isApntagDefined","allBidsAvailable","bidsBackAll","renderAd","adObject","find","adId","url","adUrl","ad","document","mediaType","srcdoc","write","close","removeAdUnit","code","splice","clearAuction","shift","requestBids","bidsBackHandler","timeout","adUnitCodes","unit","invalidVideoAdUnits","forEach","adUnit","externalCallbackReset","addOneTimeCallback","executeCallback","timedOut","timeoutCallback","timer","setTimeout","callBids","addAdUnits","adUnitArr","isArray","transactionId","generateUUID","apply","onEvent","event","handler","isFn","on","offEvent","off","addCallback","eventStr","func","getUniqueIdentifierStr","removeCallback","registerBidAdapter","bidderAdaptor","bidderCode","registerAnalyticsAdapter","options","bidsAvailableForAdapter","bidderRequest","createBid","statusCode","addBidResponse","loadScript","tagSrc","callback","useCache","enableAnalytics","config","isEmpty","aliasBidder","alias","aliasBidAdapter","setPriceGranularity","granularity","setCustomPriceBucket","GRANULARITY_OPTIONS","CUSTOM","enableSendAllBids","getAllWinningBids","buildMasterVideoTagFromAdserverTag","adserverTag","urlComponents","masterTag","toLowerCase","dfpAdserverObj","dfpAdserver","verifyAdserverTag","appendQueryParams","setBidderSequence","order","ORDER","RANDOM","getHighestCpmBids","getWinningBids","getGlobal","uniques","flatten","getBidRequest","getKeys","getValue","getBidderCodes","isGptPubadsDefined","getHighestCpm","shuffle","adUnitsFilter","isSrcdocSupported","cloneJson","objectType_string","objectType_number","_loggingChecked","t_Arr","t_Str","t_Fn","t_Numb","toString","prototype","infoLogger","console","info","exports","replaceTokenInString","str","token","_each","value","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","_getUniqueIdentifierStr","Math","random","substr","placeholder","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","getOwnPropertyNames","parseSizesInput","sizeObj","parsedSizes","sizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","parseGPTSingleSizeArray","singleSize","isNaN","getTopWindowLocation","top","getTopWindowUrl","href","logWarn","msg","debugTurnedOn","warn","args","hasConsoleLogger","log","errLogFn","hasLogger","error","getParameterByName","DEBUG_MODE","exception","errCode","createInvisibleIframe","_createInvisibleIframe","f","createElement","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","addEventListener","attachEvent","isA","object","_t","isStr","isNumber","isEmptyStr","fn","l","obj","indexOf","Array","_map","output","objectToCheck","propertyToCheckFor","constructor","createTrackPixelHtml","escapedUrl","encodeURI","img","createTrackPixelIframeHtml","getIframeDocument","iframe","contentWindow","contentDocument","getValueString","param","val","defaultValue","index","arry","concat","bidId","bidder","googletag","pubads","getSlots","previous","current","cpm","timeToRespond","array","counter","floor","temp","test","navigator","userAgent","JSON","parse","stringify","videoAdUnit","nonVideoBidder","hasNonVideoBidder","_bidderRegistry","bidderRegistry","_analyticsRegistry","_bidderSequence","getBids","bidderRequestId","sizeMapping","auctionStart","Date","now","auctionInit","timestamp","AUCTION_INIT","bidderCodes","start","getTime","BID_REQUESTED","bidAdaptor","existingAlias","newAdapter","createNew","setBidderCode","adapterConfig","provider","AardvarkAdapter","AdbladeAdapter","AdbundAdapter","AdbutlerAdapter","AdequantAdapter","AdformAdapter","AdkernelAdapter","AdmediaAdapter","BidfluenceAdapter","VertamediaAdapter","AolAdapter","AppnexusAdapter","AppnexusAstAdapter","AudienceNetworkAdapter","ConversantAdapter","DistrictmDMXAdapter","FidelityAdapter","GumgumAdapter","HiromediaAdapter","IndexExchangeAdapter","KruxlinkAdapter","GetintentAdapter","KomoonaAdapter","LifestreetAdapter","MantisAdapter","OpenxAdapter","PiximediaAdapter","PubmaticAdapter","PulsepointAdapter","PulsepointLiteAdapter","RhythmoneAdapter","RubiconAdapter","SmartyadsAdapter","SmartadserverAdapter","SekindoUMAdapter","ServerbidAdapter","SonobiAdapter","SovrnAdapter","SpringserveAdapter","ThoughtleadrAdapter","StickyadstvAdapter","TripleliftAdapter","TwengaAdapter","YieldbotAdapter","NginadAdapter","BrightcomAdapter","WideorbitAdapter","JcmAdapter","UnderdogmediaAdapter","MemeglobalAdapter","CriteoAdapter","CentroAdapter","XhbAdapter","SharethroughAdapter","RoxotAdapter","VertozAdapter","WidespaceAdapter","AdmixerAdapter","TapsenseAdapter","videoAdapters","_win","mapSizes","isSizeMappingValid","getScreenWidth","mapping","prev","curr","minWidth","win","w","d","innerWidth","body","clientWidth","documentElement","setWindow","BaseAdapter","slice","allEvents","v","idPaths","EVENT_ID_PATHS","eventsFired","module","_handlers","_public","_dispatch","eventString","eventPayload","idPath","eventKeys","callbacks","eventType","_checkAvailableEvent","_handler","get","getEvents","arrayCopy","newProp","constants","AARDVARK_CALLBACK_NAME","AARDVARK_REQUESTS_MAP","AARDVARK_BIDDER_CODE","DEFAULT_REFERRER","DEFAULT_ENDPOINT","endpoint","callbackName","bidReqs","ref","ai","scs","bidIds","host","_ai","_sc","_endpoint","params","registerBidResponse","rawBidResponse","cid","bidObj","sc","bidResponse","STATUS","GOOD","adm","nurl","responded","registerAardvarkCallback","rtkResponseObj","bidRequestId","bidRequest","NO_BID","baseAdapter","getBidderCode","Bid","_bidId","_statusCode","statusMessage","_getStatus","getStatusCode","getSize","AUCTION_END","externalCallbacks","byAdUnit","all","oneTime","_granularity","MEDIUM","_customPriceBucket","defaultBidderSettingsMap","customConfig","getTimedOutBidders","getBidders","bidsBackAdUnit","requested","request","add","received","getBidderRequest","responseTimestamp","requestTimestamp","BID_ADJUSTMENT","BID_RESPONSE","priceStringsObj","pbLg","low","pbMg","med","pbHg","high","pbAg","auto","pbDg","dense","pbCg","custom","keyValues","dealId","getKeyValueTargetingPairs","adserverTargeting","triggerAdUnitCallbacks","custBidObj","bidder_settings","standardSettings","getStandardBidderSettings","setKeys","JSON_MAPPING","ADSERVER_TARGETING","alwaysUseBid","sendStandardTargeting","size","kvPair","suppressEmptyKeys","granularityOptions","option","registerDefaultBidderSetting","defaultSetting","clearTimeout","processCallbacks","timedOutBidders","BID_TIMEOUT","singleAdUnitCode","callbackQueue","groupByPlacement","bidsByPlacement","cbEvent","CB","TYPE","ALL_BIDS_BACK","AD_UNIT_BIDS_BACK","adjustBids","bidPriceAdjusted","bidCpmAdjustment","BD_SETTING_STANDARD","AUTO","DENSE","LOW","HIGH","getStandardBidderAdServerTargeting","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","getPriceBucketString","cpmFloat","parseFloat","getCpmStringValue","cpmStr","isValidePriceConfig","cap","buckets","max","bucket","precision","toFixed","min","getCpmTarget","increment","isValid","bucketSize","_requestCache","cacheRequest","loaded","requestResource","jptScript","type","async","readyState","onreadystatechange","onload","elToAppend","getElementsByTagName","insertBefore","firstChild","trackPixel","pixelUrl","delimiter","trackingPixel","Image","Adapter","BIDDER_CODE","BASE_URI","DEFAULT_BID_FLOOR","_callBids","referrer","loc","domain","hostname","partnerId","bidRequests","imp","bidFloor","protocol","adbladeResponse","response","auctionIdRe","auctionPriceRe","clickUrlRe","seatbid","bidsRequested","seatbidBid","impid","price","h","adBundAdapter","timezone","getTimezoneOffset","bidAPIs","bidAPI","_stringify","_createCallback","data","_requestBids","ua","adbundResponse","AdButlerAdapter","callbackData","zoneCount","pageID","zoneID","callbackID","adRequest","buildRequest","adbutlerCB","aBResponseObject","zone_id","place","parseInt","isCorrectSize","isCorrectCPM","CPM","minCPM","maxCPM","status","ad_code","addTrackingPixels","tracking_pixels","adIndex","accountID","keyword","requestURI","trackingPixels","trackingPixelMarkup","pixelURL","req_url_base","req_url","publisher_id","cats","replies","placements","bid_request","br_params","bidfloor","br_sizes","j","process_bids","placement_code","adequant_creatives","bid_response","STATUSCODES","_value","_key","globalParams","formRequestUrl","unshift","handleCallback","reqData","encode64","handleResponse","adItems","bidObject","adItem","verifySize","win_bid","cur","win_cur","banner","deal_id","validSizes","input","out","chr1","chr2","chr3","enc1","enc2","enc3","enc4","_keyStr","utf8_encode","charCodeAt","charAt","string","utftext","n","String","fromCharCode","AdKernelAdapter","AJAX_REQ_PARAMS","contentType","withCredentials","method","EMPTY_BID_RESPONSE","RtbRequestDispatcher","originalBids","site","createSite","syncedHostZones","addImp","zone","zoneId","secure","insertUserSync","appendChild","dispatch","zones","impressions","dispatchRtbRequest","buildEndpointUrl","rtbRequest","buildRtbRequest","buildRequestParams","bidResp","bidFound","imps","rtbReq","processBids","dispatcher","validateBidParams","createEmptyBidObject","adUnitId","createBidObject","resp","formatAdMarkup","ajax","XHR_DONE","x","useXDomainRequest","success","XMLHttpRequest","responseType","XDomainRequest","responseText","onerror","ontimeout","onprogress","statusText","urlInfo","open","preflight","setRequestHeader","send","parseQS","formatQS","format","query","acc","criteria","parsed","port","pathname","hash","bidderUrl","request_obj","aid","page_url","test_ad","parsedSizesLength","promo_sizes","siteDomain","sitePage","siteRef","topUrl","callbackId","admediaHandler","callback_id","scriptUrl","bfPbjsCB","bfr","cbID","bfbids","adunitId","publisherId","reservePrice","pbjsBfobj","cb","FORGE","init","ENDPOINT","RTBDataParams","prepareAndSaveRTBRequestParams","requestSizes","parsedSize","tag","creative_id","cmpId","descriptionUrl","vastUrl","showCpmAdjustmentWarning","pubapiTemplate","template","SERVER_MAP","us","eu","as","strings","values","dict","Number","isInteger","_buildPubapiUrl","serverParam","server","regionParam","region","network","placement","pageid","pageId","sizeid","sizeId","misc","_addErrorBidResponse","reason","nbr","raw","_addBidResponse","bidData","ext","encp","pixels","creativeId","crid","pubapiId","currencyCode","dealid","pubapiUrl","aol","AppNexusAdapter","usersync","anArr","buildJPTCall","placementId","memberId","member","inventoryCode","altReferrer","jptCall","sizeQueryString","targetingParams","paramsCopy","invCode","alt_referrer","queryParams","lastIndexOf","substring","startTime","handleAnCB","jptResponseObj","bidCode","callback_uid","responseCPM","VIDEO_TARGETING","USER_PARAMS","userObj","tags","valid","getSizes","primary_size","uuid","allow_smaller_sizes","allowSmallerSizes","prebid","disable_psa","reserve","position","trafficSourceCode","traffic_source_code","privateSizes","private_sizes","supplyType","supply_type","pubClick","pubclick","extInvCode","ext_inv_code","externalImpId","external_imp_id","keywords","getKeywords","require_asset_url","video","user","payloadJson","member_id","payload","errorMessage","getRtbBid","ad_type","arrs","ads","rtb","player_width","player_height","asset_url","content","trackers","impression_urls","tracker","getPlacementSize","adWidth","adHeight","getPlacementWebAdFormat","native","fullwidth","getTagVersion","tagVersion","wwwExperimentChance","wwwExperiment","adPlacementIdToBidMap","Map","pbjsBidReq","testMode","http","HttpClient","requestTimeMS","placementIDArr","anBidRequestId","request_id","anBidArr","anBidReqArr","idx","pbjsBid","noResponseBidObject","anBid","bid_price_cents","fbBidId","bid_id","fbPlacementId","fbFormat","getTag","responseTimeMS","bidLatencyMS","latencySincePageLoad","performance","timing","navigationStart","existingEvents","some","latencyUrl","placement_id","httpRequest","aUrl","aCallback","anHttpRequest","script","Exception","VERSION","conversantUrl","appendScript","className","createTextNode","text","getDNT","doNotTrack","msDoNotTrack","getDevice","language","screen","dnt","make","vendor","conversantBids","page","siteId","conversantImps","conversantBidReqs","adW","adH","bidSizes","displaymanager","displaymanagerver","querySelector","addEmptyBidResponses","placementsWithBidsBack","allConversantBidRequests","conversantBid","parseSeatbid","responseAd","responseNurl","bidRequested","conversantResponse","conversantResponseObj","path","conversantDebugResponse","adLoader","DistrictmAdaptor","districtmAdaptor","districtmUrl","hb_dmx_res","sendBids","handlerRes","auction","fixSize","run","ssp","FIDELITY_BIDDER_NAME","FIDELITY_SERVER_NAME","currentBid","m3_u","zoneid","charset","characterSet","subid","click","getFlashVersion","plugins","plugin","description","addBlankBidResponses","allFidelityBidRequests","fidelityBid","fidelityResponse","responseObj","requestObj","CALLBACKS","bidEndpoint","topWindow","topScreen","pageViewId","requestCache","throttleTable","defaultThrottle","global","_getTimeStamp","browserParams","vw","vh","innerHeight","sw","sh","pu","ce","cookieEnabled","dpr","devicePixelRatio","trackingId","inScreen","nativeId","slotId","inSlot","tmax","inImage","pi","productId","requestKey","throttle","latestRequest","t","ni","si","pv","cachedBid","jsonp","_handleGumGumResponse","bidCall","cachedBidRequest","pag","thms","pvid","encodedResponse","gumgumAdLoader","noBid","handleGumGumCB","HiroMediaAdapter","ADAPTER_VERSION","REQUIRED_BID_PARAMS","DEFAULT_BID_PARAMS","bidUrl","allowedSize","sizeTolerance","_bidStorage","bidInfo","bidStatus","selectedSize","checkChance","sampling","batchKey","chance","hiromedia_callback","getBrowser","browsers","stringSearch","versionSearch","browser","nameSearch","defaultVersionSearch","versionMatch","getDomain","parseInt10","isValueInRange","allowedValue","tolerance","isSizeInRange","normalizeSizes","defaultParams","bidParams","getBatchKey","batchParams","accountId","allowedSizes","shouldBid","sendBidRequest","requestParams","adapterVersion","browserVersion","placementSizes","ADAPTER_NAME","ADAPTER_CODE","OPEN_MARKET","PRIVATE_MARKET","cygnus_index_parse_res","_IndexRequestData","impIDToSlotID","targetMode","callbackFn","reqOptions","lastRequestID","targetIDToBid","targetIDToResp","targetIDToCreative","allBids","seatbidLength","pricelevel","slotID","targetID","noTargetModeTargetID","targetPrefix","impBid","impressionID","dealID","priceLevel","cygnus_index_ready_state","index_render","pop","cygnus_index_args","siteID","px_call","headertag_render","index_slot","index_ary","unpack","cygnus_index_adunits","getIndexDebugMode","INDEX_DEBUG_MODE","queryParam","wdw","childsReferrer","mode","sandbox","topFrameLimit","parent","err","topURL","self","cygnus_index_start","parseFn","escapable","meta","escapeCharacter","character","escaped","quote","lastIndex","OpenRTBRequest","timeoutDelay","initialized","_parseFnName","topframe","requestCounter","requestID","serialize","json","impObj","bidfloorcur","setPageOverride","sitePageOverride","addImpression","bidFloorCurrency","jsonURI","scriptSrc","queryValue","prebidVersion","slots","req","slotDef","impID","slotIdMap","requiredParams","firstAdUnitCode","bidArr","targetAggregate","expectedBids","sizeID","validSize","usingSizeSpecificSiteID","slotName","mergeSlotInto","tier2SiteID","tier3SiteID","indexObj","lookupObj","adSlotId","cpmAndSlotId","tier","currentCPM","slotObj","getSlotObj","logErrorBidResponse","slot","slotList","arr","returnObj","_qs","_makeBidResponse","_makeCallback","impids","bidRequestParams","qs","KruxAdapter","GetIntentAdapter","headerBiddingStaticJS","gi_hb","addOptional","props","pid","tid","known","is_video","r","br","makeBid","no_bid","nobid","vast_url","placementid","hbid","creative","SLOTS_LOAD_MAP","PREBID_REQUEST_MESSAGE","PREBID_RESPONSE_MESSAGE","jstagUrl","jstag_url","adkey","adSize","ad_size","shouldRequest","adSizeArray","_callJSTag","_addSlotBidResponse","LSM_Slot","slotTagParams","_preload","_hb_request","_timeout","_onload","action","state","getSlotObjectName","_constructLSMAd","show","property","ev","source","postMessage","slotObject","destroy","hasResponse","jsTagUrl","inIframe","mantis_link","isDesktop","ignoreTouch","scope","supportsTouch","msMaxTouchPoints","mantis_breakpoint","ex","isSendable","isObject","isAmp","context","tagName","isSecure","mantis_jsonp","jsonToQuery","chain","form","parts","queryKey","akey","aval","buildMantisUrl","tz","buster","mobile","mantis_uuid","localStorage","localUuid","getItem","title","canonicalUrl","mantis_domain","Prebid","html","BIDDER_CONFIG","pdNode","oxARJResponse","oxResponseObj","makePDCall","auid","adunitid","adUnitHasValidSizeFromBid","used","beaconParams","bd","bt","bs","pub_rev","bp","ts","buildBoPixel","getViewportDimensions","isIfr","tWin","tDoc","docEl","clientHeight","pixelsUrl","pdFrame","setAttribute","rootNode","parentNode","replaceChild","ad_id","adid","buildQueryStringFromParams","recordPixel","tracking","impression","boBase","sizeLength","creative_size","delDomain","aus","customParam","customParams","queryString","currentURL","ju","jr","ch","charSet","colorDepth","ifr","tws","ee","ef","be","bc","PREBID_URL","bidStash","tryAppendPixiQueryString","callBidsPiximedia","cbid","prebidUrl","handlePiximediaCallback","stash","timelapsed","foundbypm","currency","_pm_pub_id","_pm_optimize_adslots","adSlot","_getBids","iframeDoc","_createRequestContent","PM_PUB_ID","PM_OPTIMIZE_ADSLOTS","handlePubmaticCallback","bidDetailsMap","progKeyValueMap","adUnitInfo","bidResponseMap","bidInfoMap","dimensions","adResponse","pair","bidstatus","bidid","unescape","creative_tag","tracking_url","wdeal","PulsePointAdapter","getJsStaticUrl","pp","requestBid","ppBidRequest","Ad","bidRequestOptions","bidResponseAvailable","bidResponseCallback","cn","ca","requestActions","BID","cu","cf","bidCpm","passback","PulsePointLiteAdapter","ajaxOptions","environment","tl","cwu","cwr","dw","cxy","ln","browserLanguage","userLanguage","systemLanguage","rawResponse","track","debug","trackR1Impression","bidManager","loader","defaultZone","defaultPath","auctionEnded","requestCompleted","applyMacros","txt","load","flashInstalled","m","mimeTypes","ActiveXObject","enabledPlugin","bidLostTimeout","attempt","valueFunction","logToConsole","sniffAuctionEnd","getBidParameters","noBids","getRMPURL","trace","ancestorOrigins","heights","widths","floors","mediaTypes","fat","th","tw","slotMap","registerBid","pbResponse","RUBICON_BIDDER_CODE","getIntegration","FASTLANE_ENDPOINT","VIDEO_ENDPOINT","TIMEOUT_BUFFER","sizeMap","item","bidCallback","bidError","buildVideoRequestPayload","buildOptimizedCall","addErrorBid","handleRpCB","xhr","badBid","_getScreenResolution","playerWidth","playerHeight","postData","resolution","account_id","integration","stash_creatives","ae_pass_through_parameters","aeParams","slotData","site_id","element_id","size_id","inventory","visitor","userId","pageUrl","masSizeOrdering","memo","_renderCreative","impId","adResponseKey","sort","_adCpmSort","deal","creative_depot_url","impression_id","num","rubiconTargeting","adA","adB","MAS_SIZE_PRIORITY","mappedSize","first","second","firstPriority","secondPriority","SMARTYADS_BIDDER_CODE","deviceWidth","deviceHeight","banner_id","SmartAdServer","generateCallback","adCall","formatId","sekindoUMAdapter","bidsCount","pubUrl","bidReqeust","sekindoCB","spaceId","subId","ServerBidAdapter","time","enableBotFiltering","includePricingData","bid_data","networkId","zoneIds","campaignId","flightId","divName","adTypes","_responseCallback","decision","decisions","pricing","clearPrice","retrieveAd","contents","impressionUrl","keymakerAssoc","bidReqAssoc","_phone_in","trinity","adSlots","_keymaker","_operator","keyring","slotIdentifier","ad_unit","_failure","cb_name","_trinity","sbi_dc","slot_id","sbi_aid","sbi_mouse","sbi_size","_success","_seraph","theOne","goodBid","sbi_dozer","_creative","failBid","formRequest","parseResponse","failure","sovrnUrl","sovrnBids","sovrnImps","tagId","tagid","sovrnBidReq","REPO_AND_VERSION","impidsWithBidBack","missing","sovrnResponse","sovrnResponseObj","sovrnBid","SpringServeAdapter","buildSpringServeCall","spCall","requestAttrMap","sp","imp_id","handleSpringServeCB","responseBid","adloader_1","ROOT_URL","BID_AVAILABLE","tldr","requestPrebid","rootUrl","root_url","handleBids","_i","bids_1","requestPlacement","_this","rid","then","receiver","TLDR_REQUEST","TLDR_RESPONSE","stopListen","removeEventListener","StickyAdsTVAdapter","MUSTANG_URL","INTEXTROLL_URL","SCREENROLL_URL","topMostWindow","getTopMostWindow","stickyadstv_cache","integrationType","urltoLoad","bidRegistered","getBid","getBiggerSize","vastLoader","com","stickyadstv","vast","VastLoader","getVast","vastCallback","onSuccess","adHtml","formatAdHTML","extractPrice","formatBidObject","onError","playerSize","vastUrlParams","componentId","screenroll","getPlayerSize","formatInBannerHTML","divHtml","formatIntextHTML","domId","formatScreenRollHTML","priceData","getPricing","TripleLiftAdapter","tlReq","buildTLCall","tlURI","tlCall","isFlashEnabled","hasFlash","fo","TLCB","tlResponseObj","buildBidCall","handleTwCB","bidResponseObj","ybotq","ybotlib","BID_STATUS","PENDING","AVAILABLE","EMPTY","definedSlots","pageLevelOption","buildCreative","buildBid","slotCriteria","ybot_ad","ybot_cpm","szArr","ybot_size","ybot_slot","sizeStr","yieldbot","psn","pub","defineSlot","enableAsync","go","handleUpdateState","getSlotCriteria","defaultPlacementForBadBid","NginAdAdapter","rtbServerDomain","nginadBids","_getUniqueTagids","PubZoneIds","getWidthAndHeight","nginadImps","whArr","nginadDomain","nginadBidReq","handleErrorResponse","nginadResponse","nginadResponseObj","nginadBid","Id","brightcomUrl","brightcomBidderCode","brightcomCallbackFunction","reqAdUnitsCode","resAdUnitsCode","brightcomImps","pubId","refoverride","brightcomBidReq","publisher","PREBID_TIMEOUT","curTimeout","bidRequestCallUrl","brightcomResponse","brightcomResponseObj","curBid","responseCreative","WideOrbitAdapter","pageImpression","pageRepeatCommonParam","pageRepeatParamId","pageRepeatParamNamed","base","adapterName","_fixParamNames","properties","prop","correctName","_setParam","pattern","_setParams","keyValuePairs","keyValuePair","_setCommonParams","pos","atf","ecpm","_getRankParam","rank","_setupIdPlacementParameters","pId","_setupNamedPlacementParameters","subPublisher","_setupAdCall","placementCount","placementsComponent","_setupPlacementParameters","commonParams","pbId","_processUserMatchings","userMatchings","headElem","createdElem","userMatching","Type","Url","_getBidResponse","ExtPlacementId","_isUrl","scr","_buildAdCode","adCode","Source","pixelTag","TrackingCodes","trackingCode","handleWideOrbitCallback","Placements","UserMatchings","Width","Height","JCMAdapter","processJCMResponse","JCMResponse","JCMRespObj","BidRequest","adSizes","JSONStr","reqURL","UnderdogMediaAdapter","UDM_ADAPTER_VERSION","bidParam","_callback","mids","filled","mid","useCount","size_not_found","ad_code_html","_makeNotification","handleUnderdogMediaCB","notification_url","visibilityState","_getUrlVars","vars","hashes","bidderName","MemeGlobalAdapter","_requestBid","bidReq","getBidSetForBidder","mgres","bidderBid","_publisherTagUrl","_bidderCode","_profileId","criteo_pubtag","_pushBidRequestEvent","Criteo","biddingEventFunc","isAudit","PubTag","DirectBidding","DirectBiddingSlot","audit","biddingEvent","DirectBiddingEvent","DirectBiddingUrlBuilder","_callbackSuccess","_callbackError","parseBidResponse","bidsResponse","isNoBidResponse","jsonbidsResponse","_invalidBidResponse","baseUrl","devUrl","handlerPrefix","LOG_ERROR_MESS","noUnit","noAdTag","anotherCode","undefBid","unitNum","_makeHandler","handlerName","_responseProcessing","_sendBidRequest","isDev","adTag","sectionID","_defaultBidderSettings","handleXhbCB","STR_BIDDER_CODE","STR_VERSION","STR_BTLR_HOST","STR_BEACON_HOST","placementCodeSet","_buildSharethroughCall","strcallback","pkey","appendEnvFields","creatives","adserverRequestId","windowLocation","bidJsonString","_handleInvalidBid","roxotUrl","roxotResponseHandler","roxotBidReqs","roxotResponseObject","isResponseInvalid","fillPlacementEmptyBid","pushRoxotBid","allBidResponse","roxotBid","pushErrorBid","places","fillIfNotFilled","BIDDER_NAME","QUERY_PARAM_KEY","slotBidId","round","vzEndPoint","reqParams","reqSrc","vzReq","_vzPlacementId","_rqsrc","_cb","_slotBidId","queryParamValue","vzResponse","vertozResponse","bidRespObj","reqBidObj","respStatusText","adSpaceId","useSSL","baseURL","callbackUid","sid","requestURL","widespaceHandleCB","bidsArray","inBid","Ajax","invUrl","_error","responseCallback","TapSenseAdapter","creativeSizes","validParams","SCRIPT_URL","tapsense","isValidSize","ad_unit_id","tapsenseCallback","count_ad_units","ad_units","scriptURL","isFinite","listenMessagesFromCreative","receiveMessage","sendAdToCreative","adServerDomain","remoteDomain","resizeRemoteCreative","getElementById","getAdUnitPath","getSlotElementId","AdServer","attr","getWinningBidByCode","dfpReqParams","dfpParamsWithVariableValue","getCustomParams","description_url","cust_params","correlator","pbTargetingKeys","getWinningBidTargeting","getAlwaysUseBidTargeting","getBidLandscapeTargeting","targetKey","targetingConfig","targetId","keywordsObj","nKey","apntag","setKeywords","winners","standardKeys","getStandardKeys","winner","TARGETING_KEYS","getTargetingMap"],"mappings":"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AACLz0D,eAAU0gB;AADL,IAAP;AAGD,EA7ED;;AA+EAvL,QAAO7P,OAAP,GAAiByuD,eAAjB,C;;;;;;;;AClFA;;;;AACA;;;;;;AALA;;;AAGA;AAIA,KAAI,CAACnoD,MAAM1G,SAAN,CAAgBhH,IAArB,EAA2B;AACzB;AACD;;AAED,KAAI,CAAC0N,MAAM1G,SAAN,CAAgB3J,QAArB,EAA+B;AAC7B;AACD;;AAED;AACAozB,QAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,UAASjpB,KAAT,EAAgB;AACrD,UAAO,OAAOA,KAAP,KAAiB,QAAjB,IACL+uD,SAAS/uD,KAAT,CADK,IAELU,KAAKwH,KAAL,CAAWlI,KAAX,MAAsBA,KAFxB;AAGD,EAJD,C;;;;;;AChBA;;AAEA;AACA;;AAEA;AACA;;AAEA,2BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA,GAAE;;AAEF;AACA;;;;;;;ACfA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAmC,gCAAgC;AACnE;AACA,6BAA4B,cAAc;AAC1C;AACA;AACA,GAAE,YAAY;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;;AAEA;;;;;;;ACvDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,iBAAiB;AAC1D,uDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,cAAc;AACnD;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;AAEA;;;;;;;AC3IA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACfA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;;;;;;ACZA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,2BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,8DAA6D,UAAU;AACvE;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,uCAAsC,UAAU;AAChD,wBAAuB,aAAa;AACpC;AACA,0BAAyB,cAAc;AACvC,0BAAyB,UAAU;AACnC,qBAAoB,cAAc;AAClC;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,kBAAiB,UAAU,EAAE;AAC7B,gCAA+B,yBAAyB;AACxD;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,2BAA0B,WAAW;AACrC;AACA,oDAAmD,UAAU;AAC7D;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA,iEAAgE;AAChE,GAAE;;AAEF;AACA;AACA,mCAAkC,aAAa;AAC/C;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,iCAAgC;;AAEhC;;;;;;;AC3UA;AACA;AACA;;;;;;;ACFA,4CAA2C,gBAAgB;;AAE3D,mDAAkD,iFAAiF;;;;;;;ACFnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;;;;;;;ACHA;AACA;AACA;;;;;;;ACFA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,wBAAwB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzEA;AACA;AACA;;;;;;;ACFA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAoE,EAAE;AACtE;AACA,GAAE;AACF,gBAAe;AACf;AACA;;AAEA;AACA;AACA,6BAA4B,cAAc;AAC1C;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAc,cAAc;AAC5B,iEAAgE,cAAc;AAC9E,uBAAsB,iCAAiC;AACvD,4BAA2B,cAAc;AACzC;AACA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oDAAmD,cAAc;AACjE;AACA;;;;;;;ACnBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C,cAAc;AAC1D;AACA;AACA;AACA,mCAAkC,aAAa;AAC/C,iDAAgD,cAAc;AAC9D;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;;;;;;AC1BA;;AAEA;;;;;;;ACFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;;AAEA,+EAA8E,qCAAqC,EAAE;;AAErH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;AC/CA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,wBAAuB,UAAU;AACjC,4CAA2C,eAAe;AAC1D;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,8DAA6D,UAAU;AACvE;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,iBAAgB;AAChB,kBAAiB,wBAAwB;AACzC;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrFA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AA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","file":"prebid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb0ab98febda09ad2803","/** @module pbjs */\n\nimport { getGlobal } from './prebidGlobal';\nimport {flatten, uniques, isGptPubadsDefined, adUnitsFilter, isSrcdocSupported} from './utils';\nimport { videoAdUnit, hasNonVideoBidder } from './video';\nimport 'polyfill';\nimport {parse as parseURL, format as formatURL} from './url';\nimport {isValidePriceConfig} from './cpmBucketManager';\nimport {listenMessagesFromCreative} from './secure-creatives';\n\nvar pbjs = getGlobal();\nvar CONSTANTS = require('./constants.json');\nvar utils = require('./utils.js');\nvar bidmanager = require('./bidmanager.js');\nvar adaptermanager = require('./adaptermanager');\nvar bidfactory = require('./bidfactory');\nvar adloader = require('./adloader');\nvar events = require('./events');\nvar adserver = require('./adserver.js');\nvar targeting = require('./targeting.js');\n\n/* private variables */\n\nvar objectType_function = 'function';\nvar objectType_undefined = 'undefined';\nvar objectType_object = 'object';\nvar BID_WON = CONSTANTS.EVENTS.BID_WON;\nvar SET_TARGETING = CONSTANTS.EVENTS.SET_TARGETING;\n\nvar auctionRunning = false;\nvar bidRequestQueue = [];\n\nvar eventValidators = {\n  bidWon: checkDefinedPlacement\n};\n\n/* Public vars */\n\npbjs._bidsRequested = [];\npbjs._bidsReceived = [];\n// _adUnitCodes stores the current filter to use for adUnits as an array of adUnitCodes\npbjs._adUnitCodes = [];\npbjs._winningBids = [];\npbjs._adsReceived = [];\npbjs._sendAllBids = false;\n\npbjs.bidderSettings = pbjs.bidderSettings || {};\n\n//default timeout for all bids\npbjs.bidderTimeout = pbjs.bidderTimeout || 3000;\n\n// current timeout set in `requestBids` or to default `bidderTimeout`\npbjs.cbTimeout = pbjs.cbTimeout || 200;\n\n// timeout buffer to adjust for bidder CDN latency\npbjs.timeoutBuffer = 200;\n\npbjs.logging = pbjs.logging || false;\n\n// domain where prebid is running for cross domain iframe communication\npbjs.publisherDomain = pbjs.publisherDomain || window.location.origin;\n\n//let the world know we are loaded\npbjs.libLoaded = true;\n\n//version auto generated from build\npbjs.version = 'v0.21.0';\nutils.logInfo('Prebid.js v0.21.0 loaded');\n\n//create adUnit array\npbjs.adUnits = pbjs.adUnits || [];\n\n/**\n * Command queue that functions will execute once prebid.js is loaded\n * @param  {function} cmd Anonymous function to execute\n * @alias module:pbjs.que.push\n */\npbjs.que.push = function (cmd) {\n  if (typeof cmd === objectType_function) {\n    try {\n      cmd.call();\n    } catch (e) {\n      utils.logError('Error processing command :' + e.message);\n    }\n  } else {\n    utils.logError('Commands written into pbjs.que.push must wrapped in a function');\n  }\n};\n\nfunction processQue() {\n  for (var i = 0; i < pbjs.que.length; i++) {\n    if (typeof pbjs.que[i].called === objectType_undefined) {\n      try {\n        pbjs.que[i].call();\n        pbjs.que[i].called = true;\n      }\n      catch (e) {\n        utils.logError('Error processing command :', 'prebid.js', e);\n      }\n    }\n  }\n}\n\nfunction checkDefinedPlacement(id) {\n  var placementCodes = pbjs._bidsRequested.map(bidSet => bidSet.bids.map(bid => bid.placementCode))\n    .reduce(flatten)\n    .filter(uniques);\n\n  if (!utils.contains(placementCodes, id)) {\n    utils.logError('The \"' + id + '\" placement is not defined.');\n    return;\n  }\n\n  return true;\n}\n\n/**\n * When a request for bids is made any stale bids remaining will be cleared for\n * a placement included in the outgoing bid request.\n */\nfunction clearPlacements() {\n  pbjs._bidsRequested = [];\n\n  // leave bids received for ad slots not in this bid request\n  pbjs._bidsReceived = pbjs._bidsReceived\n    .filter(bid => !pbjs._adUnitCodes.includes(bid.adUnitCode));\n}\n\nfunction setRenderSize(doc, width, height) {\n  if (doc.defaultView && doc.defaultView.frameElement) {\n    doc.defaultView.frameElement.width = width;\n    doc.defaultView.frameElement.height = height;\n  }\n}\n\n//////////////////////////////////\n//                              //\n//    Start Public APIs         //\n//                              //\n//////////////////////////////////\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param  {string} [adunitCode] adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCodeStr\n * @return {array}  returnObj return bids array\n */\npbjs.getAdserverTargetingForAdUnitCodeStr = function (adunitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargetingForAdUnitCodeStr', arguments);\n\n  // call to retrieve bids array\n  if (adunitCode) {\n    var res = pbjs.getAdserverTargetingForAdUnitCode(adunitCode);\n    return utils.transformAdServerTargetingObj(res);\n  } else {\n    utils.logMessage('Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode');\n  }\n};\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param adUnitCode {string} adUnitCode to get the bid responses for\n * @returns {object}  returnObj return bids\n */\npbjs.getAdserverTargetingForAdUnitCode = function(adUnitCode) {\n  return pbjs.getAdserverTargeting(adUnitCode)[adUnitCode];\n};\n\n/**\n * returns all ad server targeting for all ad units\n * @return {object} Map of adUnitCodes and targeting values []\n * @alias module:pbjs.getAdserverTargeting\n */\n\npbjs.getAdserverTargeting = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargeting', arguments);\n  return targeting.getAllTargeting(adUnitCode)\n    .map(targeting => {\n      return {\n        [Object.keys(targeting)[0]]: targeting[Object.keys(targeting)[0]]\n          .map(target => {\n            return {\n              [Object.keys(target)[0]]: target[Object.keys(target)[0]].join(', ')\n            };\n          }).reduce((p, c) => Object.assign(c, p), {})\n      };\n    })\n    .reduce(function (accumulator, targeting) {\n      var key = Object.keys(targeting)[0];\n      accumulator[key] = Object.assign({}, accumulator[key], targeting[key]);\n      return accumulator;\n    }, {});\n};\n\n/**\n * This function returns the bid responses at the given moment.\n * @alias module:pbjs.getBidResponses\n * @return {object}            map | object that contains the bidResponses\n */\n\npbjs.getBidResponses = function () {\n  utils.logInfo('Invoking pbjs.getBidResponses', arguments);\n  const responses = pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes));\n\n  // find the last requested id to get responses for most recent auction only\n  const currentRequestId = responses && responses.length && responses[responses.length - 1].requestId;\n\n  return responses.map(bid => bid.adUnitCode)\n    .filter(uniques).map(adUnitCode => responses\n      .filter(bid => bid.requestId === currentRequestId && bid.adUnitCode === adUnitCode))\n    .filter(bids => bids && bids[0] && bids[0].adUnitCode)\n    .map(bids => {\n      return {\n        [bids[0].adUnitCode]: { bids: bids }\n      };\n    })\n    .reduce((a, b) => Object.assign(a, b), {});\n};\n\n/**\n * Returns bidResponses for the specified adUnitCode\n * @param  {String} adUnitCode adUnitCode\n * @alias module:pbjs.getBidResponsesForAdUnitCode\n * @return {Object}            bidResponse object\n */\n\npbjs.getBidResponsesForAdUnitCode = function (adUnitCode) {\n  const bids = pbjs._bidsReceived.filter(bid => bid.adUnitCode === adUnitCode);\n  return {\n    bids: bids\n  };\n};\n\n/**\n * Set query string targeting on all GPT ad units.\n * @alias module:pbjs.setTargetingForGPTAsync\n */\npbjs.setTargetingForGPTAsync = function () {\n  utils.logInfo('Invoking pbjs.setTargetingForGPTAsync', arguments);\n  if (!isGptPubadsDefined()) {\n    utils.logError('window.googletag is not defined on the page');\n    return;\n  }\n\n  //first reset any old targeting\n  targeting.resetPresetTargeting();\n\n  //now set new targeting keys\n  targeting.setTargeting(targeting.getAllTargeting());\n\n  //emit event\n  events.emit(SET_TARGETING);\n};\n\npbjs.setTargetingForAst = function() {\n  utils.logInfo('Invoking pbjs.setTargetingForAn', arguments);\n  if(!targeting.isApntagDefined()) {\n    utils.logError('window.apntag is not defined on the page');\n    return;\n  }\n\n  targeting.setTargetingForAst();\n\n  //emit event\n  events.emit(SET_TARGETING);\n};\n\n/**\n * Returns a bool if all the bids have returned or timed out\n * @alias module:pbjs.allBidsAvailable\n * @return {bool} all bids available\n */\npbjs.allBidsAvailable = function () {\n  utils.logInfo('Invoking pbjs.allBidsAvailable', arguments);\n  return bidmanager.bidsBackAll();\n};\n\n/**\n * This function will render the ad (based on params) in the given iframe document passed through.\n * Note that doc SHOULD NOT be the parent document page as we can't doc.write() asynchronously\n * @param  {HTMLDocument} doc document\n * @param  {string} id bid id to locate the ad\n * @alias module:pbjs.renderAd\n */\npbjs.renderAd = function (doc, id) {\n  utils.logInfo('Invoking pbjs.renderAd', arguments);\n  utils.logMessage('Calling renderAd with adId :' + id);\n  if (doc && id) {\n    try {\n      //lookup ad by ad Id\n      var adObject = pbjs._bidsReceived.find(bid => bid.adId === id);\n      if (adObject) {\n        //save winning bids\n        pbjs._winningBids.push(adObject);\n        //emit 'bid won' event here\n        events.emit(BID_WON, adObject);\n\n        var height = adObject.height;\n        var width = adObject.width;\n        var url = adObject.adUrl;\n        var ad = adObject.ad;\n\n        if (doc === document || adObject.mediaType === 'video') {\n          utils.logError(`Error trying to write ad. Ad render call ad id ${id} was prevented from writing to the main document.`);\n        } else if (ad) {\n          if (isSrcdocSupported(doc)) {\n            doc.defaultView.frameElement.srcdoc = ad;\n          } else {\n            doc.write(ad);\n            doc.close();\n          }\n          setRenderSize(doc, width, height);\n        } else if (url) {\n          doc.write(`<IFRAME SRC=\"${url}\" FRAMEBORDER=\"0\" SCROLLING=\"no\" MARGINHEIGHT=\"0\" MARGINWIDTH=\"0\" TOPMARGIN=\"0\" LEFTMARGIN=\"0\" ALLOWTRANSPARENCY=\"true\" WIDTH=\"${width}\" HEIGHT=\"${height}\"></IFRAME>`);\n          doc.close();\n          setRenderSize(doc, width, height);\n        } else {\n          utils.logError('Error trying to write ad. No ad for bid response id: ' + id);\n        }\n\n      } else {\n        utils.logError('Error trying to write ad. Cannot find ad by given id : ' + id);\n      }\n\n    } catch (e) {\n      utils.logError('Error trying to write ad Id :' + id + ' to the page:' + e.message);\n    }\n  } else {\n    utils.logError('Error trying to write ad Id :' + id + ' to the page. Missing document or adId');\n  }\n\n};\n\n/**\n * Remove adUnit from the pbjs configuration\n * @param  {String} adUnitCode the adUnitCode to remove\n * @alias module:pbjs.removeAdUnit\n */\npbjs.removeAdUnit = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.removeAdUnit', arguments);\n  if (adUnitCode) {\n    for (var i = 0; i < pbjs.adUnits.length; i++) {\n      if (pbjs.adUnits[i].code === adUnitCode) {\n        pbjs.adUnits.splice(i, 1);\n      }\n    }\n  }\n};\n\npbjs.clearAuction = function() {\n  auctionRunning = false;\n  utils.logMessage('Prebid auction cleared');\n  if (bidRequestQueue.length) {\n    bidRequestQueue.shift()();\n  }\n};\n\n/**\n *\n * @param bidsBackHandler\n * @param timeout\n * @param adUnits\n * @param adUnitCodes\n */\npbjs.requestBids = function ({ bidsBackHandler, timeout, adUnits, adUnitCodes } = {}) {\n  events.emit('requestBids');\n  const cbTimeout = pbjs.cbTimeout = timeout || pbjs.bidderTimeout;\n  adUnits = adUnits || pbjs.adUnits;\n\n  utils.logInfo('Invoking pbjs.requestBids', arguments);\n\n  if (adUnitCodes && adUnitCodes.length) {\n    // if specific adUnitCodes supplied filter adUnits for those codes\n    adUnits = adUnits.filter(unit => adUnitCodes.includes(unit.code));\n  } else {\n    // otherwise derive adUnitCodes from adUnits\n    adUnitCodes = adUnits && adUnits.map(unit => unit.code);\n  }\n\n  // for video-enabled adUnits, only request bids if all bidders support video\n  const invalidVideoAdUnits = adUnits.filter(videoAdUnit).filter(hasNonVideoBidder);\n  invalidVideoAdUnits.forEach(adUnit => {\n    utils.logError(`adUnit ${adUnit.code} has 'mediaType' set to 'video' but contains a bidder that doesn't support video. No Prebid demand requests will be triggered for this adUnit.`);\n    for (let i = 0; i < adUnits.length; i++) {\n      if (adUnits[i].code === adUnit.code) {adUnits.splice(i, 1);}\n    }\n  });\n\n  if (auctionRunning) {\n    bidRequestQueue.push(() => {\n      pbjs.requestBids({ bidsBackHandler, timeout: cbTimeout, adUnits, adUnitCodes });\n    });\n    return;\n  }\n\n  auctionRunning = true;\n\n  // we will use adUnitCodes for filtering the current auction\n  pbjs._adUnitCodes = adUnitCodes;\n\n  bidmanager.externalCallbackReset();\n  clearPlacements();\n\n  if (!adUnits || adUnits.length === 0) {\n    utils.logMessage('No adUnits configured. No bids requested.');\n    if (typeof bidsBackHandler === objectType_function) {\n      bidmanager.addOneTimeCallback(bidsBackHandler, false);\n    }\n    bidmanager.executeCallback();\n    return;\n  }\n\n  //set timeout for all bids\n  const timedOut = true;\n  const timeoutCallback = bidmanager.executeCallback.bind(bidmanager, timedOut);\n  const timer = setTimeout(timeoutCallback, cbTimeout);\n  if (typeof bidsBackHandler === objectType_function) {\n    bidmanager.addOneTimeCallback(bidsBackHandler, timer);\n  }\n\n  adaptermanager.callBids({ adUnits, adUnitCodes, cbTimeout });\n  if(pbjs._bidsRequested.length === 0) {\n    bidmanager.executeCallback();\n  }\n};\n\n/**\n *\n * Add adunit(s)\n * @param {Array|String} adUnitArr Array of adUnits or single adUnit Object.\n * @alias module:pbjs.addAdUnits\n */\npbjs.addAdUnits = function (adUnitArr) {\n  utils.logInfo('Invoking pbjs.addAdUnits', arguments);\n  if (utils.isArray(adUnitArr)) {\n    // generate transactionid for each new adUnits\n    // Append array to existing\n    adUnitArr.forEach(adUnit => adUnit.transactionId = utils.generateUUID());\n    pbjs.adUnits.push.apply(pbjs.adUnits, adUnitArr);\n  } else if (typeof adUnitArr === objectType_object) {\n    // Generate the transaction id for the adunit\n    adUnitArr.transactionId = utils.generateUUID();\n    pbjs.adUnits.push(adUnitArr);\n  }\n};\n\n/**\n * @param {String} event the name of the event\n * @param {Function} handler a callback to set on event\n * @param {String} id an identifier in the context of the event\n *\n * This API call allows you to register a callback to handle a Prebid.js event.\n * An optional `id` parameter provides more finely-grained event callback registration.\n * This makes it possible to register callback events for a specific item in the\n * event context. For example, `bidWon` events will accept an `id` for ad unit code.\n * `bidWon` callbacks registered with an ad unit code id will be called when a bid\n * for that ad unit code wins the auction. Without an `id` this method registers the\n * callback for every `bidWon` event.\n *\n * Currently `bidWon` is the only event that accepts an `id` parameter.\n */\npbjs.onEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.onEvent', arguments);\n  if (!utils.isFn(handler)) {\n    utils.logError('The event handler provided is not a function and was not set on event \"' + event + '\".');\n    return;\n  }\n\n  if (id && !eventValidators[event].call(null, id)) {\n    utils.logError('The id provided is not valid for event \"' + event + '\" and no handler was set.');\n    return;\n  }\n\n  events.on(event, handler, id);\n};\n\n/**\n * @param {String} event the name of the event\n * @param {Function} handler a callback to remove from the event\n * @param {String} id an identifier in the context of the event (see `pbjs.onEvent`)\n */\npbjs.offEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.offEvent', arguments);\n  if (id && !eventValidators[event].call(null, id)) {\n    return;\n  }\n\n  events.off(event, handler, id);\n};\n\n/**\n * Add a callback event\n * @param {String} eventStr event to attach callback to Options: \"allRequestedBidsBack\" | \"adUnitBidsBack\"\n * @param {Function} func  function to execute. Parameters passed into the function: (bidResObj), [adUnitCode]);\n * @alias module:pbjs.addCallback\n * @returns {String} id for callback\n */\npbjs.addCallback = function (eventStr, func) {\n  utils.logInfo('Invoking pbjs.addCallback', arguments);\n  var id = null;\n  if (!eventStr || !func || typeof func !== objectType_function) {\n    utils.logError('error registering callback. Check method signature');\n    return id;\n  }\n\n  id = utils.getUniqueIdentifierStr;\n  bidmanager.addCallback(id, func, eventStr);\n  return id;\n};\n\n/**\n * Remove a callback event\n * //@param {string} cbId id of the callback to remove\n * @alias module:pbjs.removeCallback\n * @returns {String} id for callback\n */\npbjs.removeCallback = function (/* cbId */) {\n  //todo\n  return null;\n};\n\n/**\n * Wrapper to register bidderAdapter externally (adaptermanager.registerBidAdapter())\n * @param  {[type]} bidderAdaptor [description]\n * @param  {[type]} bidderCode    [description]\n * @return {[type]}               [description]\n */\npbjs.registerBidAdapter = function (bidderAdaptor, bidderCode) {\n  utils.logInfo('Invoking pbjs.registerBidAdapter', arguments);\n  try {\n    adaptermanager.registerBidAdapter(bidderAdaptor(), bidderCode);\n  }\n  catch (e) {\n    utils.logError('Error registering bidder adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to register analyticsAdapter externally (adaptermanager.registerAnalyticsAdapter())\n * @param  {[type]} options [description]\n */\npbjs.registerAnalyticsAdapter = function (options) {\n  utils.logInfo('Invoking pbjs.registerAnalyticsAdapter', arguments);\n  try {\n    adaptermanager.registerAnalyticsAdapter(options);\n  }\n  catch (e) {\n    utils.logError('Error registering analytics adapter : ' + e.message);\n  }\n};\n\npbjs.bidsAvailableForAdapter = function (bidderCode) {\n  utils.logInfo('Invoking pbjs.bidsAvailableForAdapter', arguments);\n\n  pbjs._bidsRequested.find(bidderRequest => bidderRequest.bidderCode === bidderCode).bids\n    .map(bid => {\n      return Object.assign(bid, bidfactory.createBid(1), {\n        bidderCode,\n        adUnitCode: bid.placementCode\n      });\n    })\n    .map(bid => pbjs._bidsReceived.push(bid));\n};\n\n/**\n * Wrapper to bidfactory.createBid()\n * @param  {[type]} statusCode [description]\n * @return {[type]}            [description]\n */\npbjs.createBid = function (statusCode) {\n  utils.logInfo('Invoking pbjs.createBid', arguments);\n  return bidfactory.createBid(statusCode);\n};\n\n/**\n * Wrapper to bidmanager.addBidResponse\n * @param {[type]} adUnitCode [description]\n * @param {[type]} bid        [description]\n */\npbjs.addBidResponse = function (adUnitCode, bid) {\n  utils.logInfo('Invoking pbjs.addBidResponse', arguments);\n  bidmanager.addBidResponse(adUnitCode, bid);\n};\n\n/**\n * Wrapper to adloader.loadScript\n * @param  {[type]}   tagSrc   [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\npbjs.loadScript = function (tagSrc, callback, useCache) {\n  utils.logInfo('Invoking pbjs.loadScript', arguments);\n  adloader.loadScript(tagSrc, callback, useCache);\n};\n\n/**\n * Will enable sending a prebid.js to data provider specified\n * @param  {object} config object {provider : 'string', options : {}}\n */\npbjs.enableAnalytics = function (config) {\n  if (config && !utils.isEmpty(config)) {\n    utils.logInfo('Invoking pbjs.enableAnalytics for: ', config);\n    adaptermanager.enableAnalytics(config);\n  } else {\n    utils.logError('pbjs.enableAnalytics should be called with option {}');\n  }\n};\n\npbjs.aliasBidder = function (bidderCode, alias) {\n  utils.logInfo('Invoking pbjs.aliasBidder', arguments);\n  if (bidderCode && alias) {\n    adaptermanager.aliasBidAdapter(bidderCode, alias);\n  } else {\n    utils.logError('bidderCode and alias must be passed as arguments', 'pbjs.aliasBidder');\n  }\n};\n\n/**\n * Sets a default price granularity scheme.\n * @param {String|Object} granularity - the granularity scheme.\n * \"low\": $0.50 increments, capped at $5 CPM\n * \"medium\": $0.10 increments, capped at $20 CPM (the default)\n * \"high\": $0.01 increments, capped at $20 CPM\n * \"auto\": Applies a sliding scale to determine granularity\n * \"dense\": Like \"auto\", but the bid price granularity uses smaller increments, especially at lower CPMs\n *\n * Alternatively a custom object can be specified:\n * { \"buckets\" : [{\"min\" : 0,\"max\" : 20,\"increment\" : 0.1,\"cap\" : true}]};\n * See http://prebid.org/dev-docs/publisher-api-reference.html#module_pbjs.setPriceGranularity for more details\n */\npbjs.setPriceGranularity = function (granularity) {\n  utils.logInfo('Invoking pbjs.setPriceGranularity', arguments);\n  if (!granularity) {\n    utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n    return;\n  }\n  if(typeof granularity === 'string') {\n    bidmanager.setPriceGranularity(granularity);\n  }\n  else if(typeof granularity === 'object') {\n    if(!isValidePriceConfig(granularity)){\n      utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n      return;\n    }\n    bidmanager.setCustomPriceBucket(granularity);\n    bidmanager.setPriceGranularity(CONSTANTS.GRANULARITY_OPTIONS.CUSTOM);\n    utils.logMessage('Using custom price granularity');\n  }\n};\n\npbjs.enableSendAllBids = function () {\n  pbjs._sendAllBids = true;\n};\n\npbjs.getAllWinningBids = function () {\n  return pbjs._winningBids;\n};\n\n/**\n * Build master video tag from publishers adserver tag\n * @param {string} adserverTag default url\n * @param {object} options options for video tag\n */\npbjs.buildMasterVideoTagFromAdserverTag = function (adserverTag, options) {\n  utils.logInfo('Invoking pbjs.buildMasterVideoTagFromAdserverTag', arguments);\n  var urlComponents = parseURL(adserverTag);\n\n  //return original adserverTag if no bids received\n  if(pbjs._bidsReceived.length === 0) {\n    return adserverTag;\n  }\n\n  var masterTag = '';\n  if(options.adserver.toLowerCase() === 'dfp') {\n    var dfpAdserverObj = adserver.dfpAdserver(options, urlComponents);\n    if(!dfpAdserverObj.verifyAdserverTag()) {\n      utils.logError('Invalid adserverTag, required google params are missing in query string');\n    }\n    dfpAdserverObj.appendQueryParams();\n    masterTag = formatURL(dfpAdserverObj.urlComponents);\n  } else {\n    utils.logError('Only DFP adserver is supported');\n    return;\n  }\n  return masterTag;\n};\n\n/**\n * Set the order bidders are called in. If not set, the bidders are called in\n * the order they are defined within the adUnit.bids array\n * @param {string} order - Order to call bidders in. Currently the only possible value\n * is 'random', which randomly shuffles the order\n */\npbjs.setBidderSequence = function (order) {\n  if (order === CONSTANTS.ORDER.RANDOM) {\n    adaptermanager.setBidderSequence(CONSTANTS.ORDER.RANDOM);\n  }\n};\n\n/**\n * Get array of highest cpm bids for all adUnits, or highest cpm bid\n * object for the given adUnit\n * @param {string} adUnitCode - optional ad unit code\n * @return {array} array containing highest cpm bid object(s)\n */\npbjs.getHighestCpmBids = function (adUnitCode) {\n  return targeting.getWinningBids(adUnitCode);\n};\n\npbjs.que.push(() => listenMessagesFromCreative());\nprocessQue();\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebid.js","// if pbjs already exists in global document scope, use it, if not, create the object\n// global defination should happen BEFORE imports to avoid global undefined errors.\nwindow.pbjs = (window.pbjs || {});\nwindow.pbjs.que = window.pbjs.que || [];\n\nexport function getGlobal() {\n  return window.pbjs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebidGlobal.js","var CONSTANTS = require('./constants.json');\n\nvar objectType_object = 'object';\nvar objectType_string = 'string';\nvar objectType_number = 'number';\n\nvar _loggingChecked = false;\n\nvar t_Arr = 'Array';\nvar t_Str = 'String';\nvar t_Fn = 'Function';\nvar t_Numb = 'Number';\nvar toString = Object.prototype.toString;\nlet infoLogger = null;\ntry {\n  infoLogger = console.info.bind(window.console);\n}\ncatch (e) {\n}\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexports.replaceTokenInString = function (str, map, token) {\n  this._each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n};\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\nfunction _getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n//generate a random string (to be used as a dynamic JSONP callback)\nexports.getUniqueIdentifierStr = _getUniqueIdentifierStr;\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexports.generateUUID = function generateUUID(placeholder) {\n  return placeholder ?\n    (placeholder ^ Math.random() * 16 >> placeholder/4).toString(16)\n    :\n    ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n};\n\nexports.getBidIdParameter = function (key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n};\n\nexports.tryAppendQueryString = function (existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n};\n\n//parse a query string object passed in bid params\n//bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexports.parseQueryStringParameters = function (queryObj) {\n  var result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k))\n      result += k + '=' + encodeURIComponent(queryObj[k]) + '&';\n  }\n\n  return result;\n};\n\n//transform an AdServer targeting bids into a query string to send to the adserver\nexports.transformAdServerTargetingObj = function (targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n};\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {array[array|number]} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {array[string]}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexports.parseSizesInput = function (sizeObj) {\n  var parsedSizes = [];\n\n  //if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === objectType_string) {\n    //multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    //regular expression to match strigns like 300x250\n    //start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === objectType_object) {\n    var sizeArrayLength = sizeObj.length;\n\n    //don't process empty array\n    if (sizeArrayLength > 0) {\n      //if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === objectType_number && typeof sizeObj[1] === objectType_number) {\n        parsedSizes.push(this.parseGPTSingleSizeArray(sizeObj));\n      } else {\n        //otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(this.parseGPTSingleSizeArray(sizeObj[i]));\n        }\n\n      }\n    }\n  }\n\n  return parsedSizes;\n\n};\n\n//parse a GPT style sigle size array, (i.e [300,250])\n//into an AppNexus style string, (i.e. 300x250)\nexports.parseGPTSingleSizeArray = function (singleSize) {\n  //if we aren't exactly 2 items in this array, it is invalid\n  if (this.isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]))) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n};\n\nexports.getTopWindowLocation = function () {\n  let location;\n  try {\n    location = window.top.location;\n  } catch (e) {\n    location = window.location;\n  }\n\n  return location;\n};\n\nexports.getTopWindowUrl = function () {\n  let href;\n  try {\n    href = this.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n\n  return href;\n};\n\nexports.logWarn = function (msg) {\n  if (debugTurnedOn() && console.warn) {\n    console.warn('WARNING: ' + msg);\n  }\n};\n\nexports.logInfo = function (msg, args) {\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    if (infoLogger) {\n      if (!args || args.length === 0) {\n        args = '';\n      }\n\n      infoLogger('INFO: ' + msg + ((args === '') ? '' : ' : params : '), args);\n    }\n  }\n};\n\nexports.logMessage = function (msg) {\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    console.log('MESSAGE: ' + msg);\n  }\n};\n\nfunction hasConsoleLogger() {\n  return (window.console && window.console.log);\n}\n\nexports.hasConsoleLogger = hasConsoleLogger;\n\nvar errLogFn = (function (hasLogger) {\n  if (!hasLogger) return '';\n  return window.console.error ? 'error' : 'log';\n}(hasConsoleLogger()));\n\nvar debugTurnedOn = function () {\n  if (pbjs.logging === false && _loggingChecked === false) {\n    pbjs.logging = getParameterByName(CONSTANTS.DEBUG_MODE).toUpperCase() === 'TRUE';\n    _loggingChecked = true;\n  }\n\n  return !!pbjs.logging;\n};\n\nexports.debugTurnedOn = debugTurnedOn;\n\nexports.logError = function (msg, code, exception) {\n  var errCode = code || 'ERROR';\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    console[errLogFn](console, errCode + ': ' + msg, exception || '');\n  }\n};\n\nexports.createInvisibleIframe = function _createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = _getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n};\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nvar getParameterByName = function (name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\n/**\n * This function validates paramaters.\n * @param  {object[string]} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {bool}                   Bool if paramaters are valid\n */\nexports.hasValidBidRequest = function (paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    this._each(paramObj, findParam);\n\n    if (!found) {\n      this.logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n};\n\n// Handle addEventListener gracefully in older browsers\nexports.addEventHandler = function (element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n};\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexports.isA = function (object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n};\n\nexports.isFn = function (object) {\n  return this.isA(object, t_Fn);\n};\n\nexports.isStr = function (object) {\n  return this.isA(object, t_Str);\n};\n\nexports.isArray = function (object) {\n  return this.isA(object, t_Arr);\n};\n\nexports.isNumber = function(object) {\n  return this.isA(object, t_Numb);\n};\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexports.isEmpty = function (object) {\n  if (!object) return true;\n  if (this.isArray(object) || this.isStr(object)) {\n    return !(object.length > 0); // jshint ignore:line\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n};\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexports.isEmptyStr = function(str) {\n  return this.isStr(str) && (!str || 0 === str.length);\n};\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexports._each = function (object, fn) {\n  if (this.isEmpty(object)) return;\n  if (this.isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n};\n\nexports.contains = function (a, obj) {\n  if (this.isEmpty(a)) {\n    return false;\n  }\n\n  if (this.isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexports.indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  //return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexports._map = function (object, callback) {\n  if (this.isEmpty(object)) return [];\n  if (this.isFn(object.map)) return object.map(callback);\n  var output = [];\n  this._each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n};\n\nvar hasOwn = function (objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexports.createTrackPixelHtml = function (url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexports.createTrackPixelIframeHtml = function (url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<iframe frameborder=\"0\" allowtransparency=\"true\" marginheight=\"0\" marginwidth=\"0\" width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\" style=\"height:0p;width:0p;display:none;\" scrolling=\"no\" src=\"${encodeURI(url)}\"></iframe>`;\n};\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {object} iframe reference\n * @return {object}        iframe `document` reference\n */\nexports.getIframeDocument = function (iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  }\n  catch (e) {\n    this.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n};\n\nexports.getValueString = function(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (this.isStr(val) ) {\n    return val;\n  }\n  if (this.isNumber(val)) {\n    return val.toString();\n  }\n  this.logWarn('Unsuported type for param: ' + param + ' required type: String');\n};\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id) {\n  return pbjs._bidsRequested.map(bidSet => bidSet.bids.find(bid => bid.bidId === id)).find(bid => bid);\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\nexport function getBidderCodes(adUnits = pbjs.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && exports.isFn(window.googletag.pubads) && exports.isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\nexport function getHighestCpm(previous, current) {\n  if (previous.cpm === current.cpm) {\n    return previous.timeToRespond > current.timeToRespond ? current : previous;\n  }\n\n  return previous.cpm < current.cpm ? current : previous;\n}\n\n/**\n * FisherYates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return filter.includes(bid && bid.placementCode || bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  //Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return !!doc.defaultView && 'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function cloneJson(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","module.exports = {\n\t\"JSON_MAPPING\": {\n\t\t\"PL_CODE\": \"code\",\n\t\t\"PL_SIZE\": \"sizes\",\n\t\t\"PL_BIDS\": \"bids\",\n\t\t\"BD_BIDDER\": \"bidder\",\n\t\t\"BD_ID\": \"paramsd\",\n\t\t\"BD_PL_ID\": \"placementId\",\n\t\t\"ADSERVER_TARGETING\": \"adserverTargeting\",\n\t\t\"BD_SETTING_STANDARD\": \"standard\"\n\t},\n\t\"REPO_AND_VERSION\": \"prebid_prebid_0.21.0\",\n\t\"DEBUG_MODE\": \"pbjs_debug\",\n\t\"STATUS\": {\n\t\t\"GOOD\": 1,\n\t\t\"NO_BID\": 2\n\t},\n\t\"CB\": {\n\t\t\"TYPE\": {\n\t\t\t\"ALL_BIDS_BACK\": \"allRequestedBidsBack\",\n\t\t\t\"AD_UNIT_BIDS_BACK\": \"adUnitBidsBack\",\n\t\t\t\"BID_WON\": \"bidWon\",\n\t\t\t\"REQUEST_BIDS\": \"requestBids\"\n\t\t}\n\t},\n\t\"objectType_function\": \"function\",\n\t\"objectType_undefined\": \"undefined\",\n\t\"objectType_object\": \"object\",\n\t\"objectType_string\": \"string\",\n\t\"objectType_number\": \"number\",\n\t\"EVENTS\": {\n\t\t\"AUCTION_INIT\": \"auctionInit\",\n\t\t\"AUCTION_END\": \"auctionEnd\",\n\t\t\"BID_ADJUSTMENT\": \"bidAdjustment\",\n\t\t\"BID_TIMEOUT\": \"bidTimeout\",\n\t\t\"BID_REQUESTED\": \"bidRequested\",\n\t\t\"BID_RESPONSE\": \"bidResponse\",\n\t\t\"BID_WON\": \"bidWon\",\n\t\t\"SET_TARGETING\": \"setTargeting\",\n\t\t\"REQUEST_BIDS\": \"requestBids\"\n\t},\n\t\"EVENT_ID_PATHS\": {\n\t\t\"bidWon\": \"adUnitCode\"\n\t},\n\t\"ORDER\": {\n\t\t\"RANDOM\": \"random\"\n\t},\n\t\"GRANULARITY_OPTIONS\": {\n\t\t\"LOW\": \"low\",\n\t\t\"MEDIUM\": \"medium\",\n\t\t\"HIGH\": \"high\",\n\t\t\"AUTO\": \"auto\",\n\t\t\"DENSE\": \"dense\",\n\t\t\"CUSTOM\": \"custom\"\n\t},\n\t\"TARGETING_KEYS\": [\n\t\t\"hb_bidder\",\n\t\t\"hb_adid\",\n\t\t\"hb_pb\",\n\t\t\"hb_size\",\n\t\t\"hb_deal\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 3\n// module chunks = 0","import { videoAdapters } from './adaptermanager';\n\n/**\n * Helper functions for working with video-enabled adUnits\n */\nexport const videoAdUnit = adUnit => adUnit.mediaType === 'video';\nconst nonVideoBidder = bid => !videoAdapters.includes(bid.bidder);\nexport const hasNonVideoBidder = adUnit => adUnit.bids.filter(nonVideoBidder).length;\n\n\n\n// WEBPACK FOOTER //\n// ./src/video.js","/** @module adaptermanger */\n\nimport { flatten, getBidderCodes, shuffle } from './utils';\nimport { mapSizes } from './sizeMapping';\n\nvar utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\nvar events = require('./events');\nimport { BaseAdapter } from './adapters/baseAdapter';\n\nvar _bidderRegistry = {};\nexports.bidderRegistry = _bidderRegistry;\n\nvar _analyticsRegistry = {};\nlet _bidderSequence = null;\n\nfunction getBids({bidderCode, requestId, bidderRequestId, adUnits}) {\n  return adUnits.map(adUnit => {\n    return adUnit.bids.filter(bid => bid.bidder === bidderCode)\n      .map(bid => {\n        let sizes = adUnit.sizes;\n        if (adUnit.sizeMapping) {\n          let sizeMapping = mapSizes(adUnit);\n          if (sizeMapping === '') {\n            return '';\n          }\n          sizes = sizeMapping;\n        }\n        return Object.assign({}, bid, {\n          placementCode: adUnit.code,\n          mediaType: adUnit.mediaType,\n          transactionId : adUnit.transactionId,\n          sizes: sizes,\n          bidId: utils.getUniqueIdentifierStr(),\n          bidderRequestId,\n          requestId\n        });\n      }\n      );\n  }).reduce(flatten, []).filter(val => val !== '');\n}\n\nexports.callBids = ({adUnits, cbTimeout}) => {\n  const requestId = utils.generateUUID();\n  const auctionStart = Date.now();\n\n  const auctionInit = {\n    timestamp: auctionStart,\n    requestId,\n  };\n  events.emit(CONSTANTS.EVENTS.AUCTION_INIT, auctionInit);\n\n  let bidderCodes = getBidderCodes(adUnits);\n  if (_bidderSequence === CONSTANTS.ORDER.RANDOM) {\n    bidderCodes = shuffle(bidderCodes);\n  }\n\n  bidderCodes.forEach(bidderCode => {\n    const adapter = _bidderRegistry[bidderCode];\n    if (adapter) {\n      const bidderRequestId = utils.getUniqueIdentifierStr();\n      const bidderRequest = {\n        bidderCode,\n        requestId,\n        bidderRequestId,\n        bids: getBids({bidderCode, requestId, bidderRequestId, adUnits}),\n        start: new Date().getTime(),\n        auctionStart: auctionStart,\n        timeout: cbTimeout\n      };\n      if (bidderRequest.bids && bidderRequest.bids.length !== 0) {\n        utils.logMessage(`CALLING BIDDER ======= ${bidderCode}`);\n        pbjs._bidsRequested.push(bidderRequest);\n        events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidderRequest);\n        adapter.callBids(bidderRequest);\n      }\n    } else {\n      utils.logError(`Adapter trying to be called which does not exist: ${bidderCode} adaptermanager.callBids`);\n    }\n  });\n};\n\nexports.registerBidAdapter = function (bidAdaptor, bidderCode) {\n  if (bidAdaptor && bidderCode) {\n\n    if (typeof bidAdaptor.callBids === CONSTANTS.objectType_function) {\n      _bidderRegistry[bidderCode] = bidAdaptor;\n\n    } else {\n      utils.logError('Bidder adaptor error for bidder code: ' + bidderCode + 'bidder must implement a callBids() function');\n    }\n\n  } else {\n    utils.logError('bidAdaptor or bidderCode not specified');\n  }\n};\n\nexports.aliasBidAdapter = function (bidderCode, alias) {\n  var existingAlias = _bidderRegistry[alias];\n\n  if (typeof existingAlias === CONSTANTS.objectType_undefined) {\n    var bidAdaptor = _bidderRegistry[bidderCode];\n\n    if (typeof bidAdaptor === CONSTANTS.objectType_undefined) {\n      utils.logError('bidderCode \"' + bidderCode + '\" is not an existing bidder.', 'adaptermanager.aliasBidAdapter');\n    } else {\n      try {\n        let newAdapter = null;\n        if (bidAdaptor instanceof BaseAdapter) {\n          //newAdapter = new bidAdaptor.constructor(alias);\n          utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adaptermanager.aliasBidAdapter');\n        } else {\n          newAdapter = bidAdaptor.createNew();\n          newAdapter.setBidderCode(alias);\n          this.registerBidAdapter(newAdapter, alias);\n        }\n      } catch (e) {\n        utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adaptermanager.aliasBidAdapter');\n      }\n    }\n  } else {\n    utils.logMessage('alias name \"' + alias + '\" has been already specified.');\n  }\n};\n\nexports.registerAnalyticsAdapter = function ({adapter, code}) {\n  if (adapter && code) {\n\n    if (typeof adapter.enableAnalytics === CONSTANTS.objectType_function) {\n      adapter.code = code;\n      _analyticsRegistry[code] = adapter;\n    } else {\n      utils.logError(`Prebid Error: Analytics adaptor error for analytics \"${code}\"\n        analytics adapter must implement an enableAnalytics() function`);\n    }\n  } else {\n    utils.logError('Prebid Error: analyticsAdapter or analyticsCode not specified');\n  }\n};\n\nexports.enableAnalytics = function (config) {\n  if (!utils.isArray(config)) {\n    config = [config];\n  }\n\n  utils._each(config, adapterConfig => {\n    var adapter = _analyticsRegistry[adapterConfig.provider];\n    if (adapter) {\n      adapter.enableAnalytics(adapterConfig);\n    } else {\n      utils.logError(`Prebid Error: no analytics adapter found in registry for\n        ${adapterConfig.provider}.`);\n    }\n  });\n};\n\nexports.setBidderSequence = function (order) {\n  _bidderSequence = order;\n};\n\nvar AardvarkAdapter = require('./adapters/aardvark.js');\n    exports.registerBidAdapter(new AardvarkAdapter(), 'aardvark');\nvar AdbladeAdapter = require('./adapters/adblade.js');\n    exports.registerBidAdapter(new AdbladeAdapter(), 'adblade');\nvar AdbundAdapter = require('./adapters/adbund.js');\n    exports.registerBidAdapter(new AdbundAdapter(), 'adbund');\nvar AdbutlerAdapter = require('./adapters/adbutler.js');\n    exports.registerBidAdapter(new AdbutlerAdapter(), 'adbutler');\nvar AdequantAdapter = require('./adapters/adequant.js');\n    exports.registerBidAdapter(new AdequantAdapter(), 'adequant');\nvar AdformAdapter = require('./adapters/adform.js');\n    exports.registerBidAdapter(new AdformAdapter(), 'adform');\nvar AdkernelAdapter = require('./adapters/adkernel.js');\n    exports.registerBidAdapter(new AdkernelAdapter(), 'adkernel');\nvar AdmediaAdapter = require('./adapters/admedia.js');\n    exports.registerBidAdapter(new AdmediaAdapter(), 'admedia');\nvar BidfluenceAdapter = require('./adapters/bidfluence.js');\n    exports.registerBidAdapter(new BidfluenceAdapter(), 'bidfluence');\nvar VertamediaAdapter = require('./adapters/vertamedia.js');\n    exports.registerBidAdapter(new VertamediaAdapter(), 'vertamedia');\nvar AolAdapter = require('./adapters/aol.js');\n    exports.registerBidAdapter(new AolAdapter(), 'aol');\nvar AppnexusAdapter = require('./adapters/appnexus.js');\n    exports.registerBidAdapter(new AppnexusAdapter(), 'appnexus');\nvar AppnexusAstAdapter = require('./adapters/appnexusAst.js');\n    exports.registerBidAdapter(new AppnexusAstAdapter(), 'appnexusAst');\nvar AudienceNetworkAdapter = require('./adapters/audienceNetwork.js');\n    exports.registerBidAdapter(new AudienceNetworkAdapter(), 'audienceNetwork');\nvar ConversantAdapter = require('./adapters/conversant.js');\n    exports.registerBidAdapter(new ConversantAdapter(), 'conversant');\nvar DistrictmDMXAdapter = require('./adapters/districtmDMX.js');\n    exports.registerBidAdapter(new DistrictmDMXAdapter(), 'districtmDMX');\nvar FidelityAdapter = require('./adapters/fidelity.js');\n    exports.registerBidAdapter(new FidelityAdapter(), 'fidelity');\nvar GumgumAdapter = require('./adapters/gumgum.js');\n    exports.registerBidAdapter(new GumgumAdapter(), 'gumgum');\nvar HiromediaAdapter = require('./adapters/hiromedia.js');\n    exports.registerBidAdapter(new HiromediaAdapter(), 'hiromedia');\nvar IndexExchangeAdapter = require('./adapters/indexExchange.js');\n    exports.registerBidAdapter(new IndexExchangeAdapter(), 'indexExchange');\nvar KruxlinkAdapter = require('./adapters/kruxlink.js');\n    exports.registerBidAdapter(new KruxlinkAdapter(), 'kruxlink');\nvar GetintentAdapter = require('./adapters/getintent.js');\n    exports.registerBidAdapter(new GetintentAdapter(), 'getintent');\nvar KomoonaAdapter = require('./adapters/komoona.js');\n    exports.registerBidAdapter(new KomoonaAdapter(), 'komoona');\nvar LifestreetAdapter = require('./adapters/lifestreet.js');\n    exports.registerBidAdapter(new LifestreetAdapter(), 'lifestreet');\nvar MantisAdapter = require('./adapters/mantis.js');\n    exports.registerBidAdapter(new MantisAdapter(), 'mantis');\nvar OpenxAdapter = require('./adapters/openx.js');\n    exports.registerBidAdapter(new OpenxAdapter(), 'openx');\nvar PiximediaAdapter = require('./adapters/piximedia.js');\n    exports.registerBidAdapter(new PiximediaAdapter(), 'piximedia');\nvar PubmaticAdapter = require('./adapters/pubmatic.js');\n    exports.registerBidAdapter(new PubmaticAdapter(), 'pubmatic');\nvar PulsepointAdapter = require('./adapters/pulsepoint.js');\n    exports.registerBidAdapter(new PulsepointAdapter(), 'pulsepoint');\nvar PulsepointLiteAdapter = require('./adapters/pulsepointLite.js');\n    exports.registerBidAdapter(new PulsepointLiteAdapter(), 'pulsepointLite');\nvar RhythmoneAdapter = require('./adapters/rhythmone.js');\n    exports.registerBidAdapter(new RhythmoneAdapter(), 'rhythmone');\nvar RubiconAdapter = require('./adapters/rubicon.js');\n    exports.registerBidAdapter(new RubiconAdapter(), 'rubicon');\nvar SmartyadsAdapter = require('./adapters/smartyads.js');\n    exports.registerBidAdapter(new SmartyadsAdapter(), 'smartyads');\nvar SmartadserverAdapter = require('./adapters/smartadserver.js');\n    exports.registerBidAdapter(new SmartadserverAdapter(), 'smartadserver');\nvar SekindoUMAdapter = require('./adapters/sekindoUM.js');\n    exports.registerBidAdapter(new SekindoUMAdapter(), 'sekindoUM');\nvar ServerbidAdapter = require('./adapters/serverbid.js');\n    exports.registerBidAdapter(new ServerbidAdapter(), 'serverbid');\nvar SonobiAdapter = require('./adapters/sonobi.js');\n    exports.registerBidAdapter(new SonobiAdapter(), 'sonobi');\nvar SovrnAdapter = require('./adapters/sovrn.js');\n    exports.registerBidAdapter(new SovrnAdapter(), 'sovrn');\nvar SpringserveAdapter = require('./adapters/springserve.js');\n    exports.registerBidAdapter(new SpringserveAdapter(), 'springserve');\nvar ThoughtleadrAdapter = require('./adapters/thoughtleadr.js');\n    exports.registerBidAdapter(new ThoughtleadrAdapter(), 'thoughtleadr');\nvar StickyadstvAdapter = require('./adapters/stickyadstv.js');\n    exports.registerBidAdapter(new StickyadstvAdapter(), 'stickyadstv');\nvar TripleliftAdapter = require('./adapters/triplelift.js');\n    exports.registerBidAdapter(new TripleliftAdapter(), 'triplelift');\nvar TwengaAdapter = require('./adapters/twenga.js');\n    exports.registerBidAdapter(new TwengaAdapter(), 'twenga');\nvar YieldbotAdapter = require('./adapters/yieldbot.js');\n    exports.registerBidAdapter(new YieldbotAdapter(), 'yieldbot');\nvar NginadAdapter = require('./adapters/nginad.js');\n    exports.registerBidAdapter(new NginadAdapter(), 'nginad');\nvar BrightcomAdapter = require('./adapters/brightcom.js');\n    exports.registerBidAdapter(new BrightcomAdapter(), 'brightcom');\nvar WideorbitAdapter = require('./adapters/wideorbit.js');\n    exports.registerBidAdapter(new WideorbitAdapter(), 'wideorbit');\nvar JcmAdapter = require('./adapters/jcm.js');\n    exports.registerBidAdapter(new JcmAdapter(), 'jcm');\nvar UnderdogmediaAdapter = require('./adapters/underdogmedia.js');\n    exports.registerBidAdapter(new UnderdogmediaAdapter(), 'underdogmedia');\nvar MemeglobalAdapter = require('./adapters/memeglobal.js');\n    exports.registerBidAdapter(new MemeglobalAdapter(), 'memeglobal');\nvar CriteoAdapter = require('./adapters/criteo.js');\n    exports.registerBidAdapter(new CriteoAdapter(), 'criteo');\nvar CentroAdapter = require('./adapters/centro.js');\n    exports.registerBidAdapter(new CentroAdapter(), 'centro');\nvar XhbAdapter = require('./adapters/xhb.js');\n    exports.registerBidAdapter(new XhbAdapter(), 'xhb');\nvar SharethroughAdapter = require('./adapters/sharethrough.js');\n    exports.registerBidAdapter(new SharethroughAdapter(), 'sharethrough');\nvar RoxotAdapter = require('./adapters/roxot.js');\n    exports.registerBidAdapter(new RoxotAdapter(), 'roxot');\nvar VertozAdapter = require('./adapters/vertoz.js');\n    exports.registerBidAdapter(new VertozAdapter(), 'vertoz');\nvar WidespaceAdapter = require('./adapters/widespace.js');\n    exports.registerBidAdapter(new WidespaceAdapter(), 'widespace');\nvar AdmixerAdapter = require('./adapters/admixer.js');\n    exports.registerBidAdapter(new AdmixerAdapter(), 'admixer');\nvar TapsenseAdapter = require('./adapters/tapsense.js');\n    exports.registerBidAdapter(new TapsenseAdapter(), 'tapsense');\nexports.aliasBidAdapter('appnexus','brealtime');\nexports.aliasBidAdapter('appnexus','pagescience');\nexports.aliasBidAdapter('appnexus','defymedia');\nexports.aliasBidAdapter('appnexus','gourmetads');\nexports.aliasBidAdapter('appnexus','matomy');\nexports.aliasBidAdapter('rubicon','rubiconLite');\nexports.aliasBidAdapter('appnexus','featureforward');\nexports.aliasBidAdapter('appnexus','oftmedia');\nexports.aliasBidAdapter('adkernel','headbidding');\nexports.videoAdapters = [\"appnexusAst\",\"vertamedia\",\"rubicon\",\"getintent\",\"rhythmone\"];\n\nnull\n\n\n\n// WEBPACK FOOTER //\n// ./src/adaptermanager.js","/**\n * @module sizeMapping\n */\nimport * as utils from './utils';\nlet _win;\n\nfunction mapSizes(adUnit) {\n  if(!isSizeMappingValid(adUnit.sizeMapping)){\n    return adUnit.sizes;\n  }\n  const width = getScreenWidth();\n  if(!width) {\n    //size not detected - get largest value set for desktop\n    const mapping = adUnit.sizeMapping.reduce((prev, curr) => {\n      return prev.minWidth < curr.minWidth ? curr : prev;\n    });\n    if(mapping.sizes) {\n      return mapping.sizes;\n    }\n    return adUnit.sizes;\n  }\n  let sizes = '';\n  const mapping = adUnit.sizeMapping.find(sizeMapping =>{\n    return width > sizeMapping.minWidth;\n  });\n  if(mapping && mapping.sizes){\n    sizes = mapping.sizes;\n    utils.logMessage(`AdUnit : ${adUnit.code} resized based on device width to : ${sizes}`);\n  }\n  else{\n    utils.logMessage(`AdUnit : ${adUnit.code} not mapped to any sizes for device width. This request will be suppressed.`);\n  }\n  return sizes;\n\n}\n\nfunction isSizeMappingValid(sizeMapping) {\n  if(utils.isArray(sizeMapping) && sizeMapping.length > 0){\n    return true;\n  }\n  utils.logInfo('No size mapping defined');\n  return false;\n}\n\nfunction getScreenWidth(win) {\n  var w = win || _win || window;\n  var d = w.document;\n\n  if (w.innerWidth) {\n    return w.innerWidth;\n  }\n  else if (d.body.clientWidth) {\n    return d.body.clientWidth;\n  }\n  else if (d.documentElement.clientWidth) {\n    return d.documentElement.clientWidth;\n  }\n  return 0;\n}\n\nfunction setWindow(win) {\n  _win = win;\n}\n\nexport { mapSizes, getScreenWidth, setWindow };\n\n\n\n// WEBPACK FOOTER //\n// ./src/sizeMapping.js","export class BaseAdapter {\n  constructor(code) {\n    this.code = code;\n  }\n\n  getCode() {\n    return this.code;\n  }\n\n  setCode(code) {\n    this.code = code;\n  }\n\n  callBids() {\n    throw 'adapter implementation must override callBids method';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/baseAdapter.js","/**\n * events.js\n */\nvar utils = require('./utils');\nvar CONSTANTS = require('./constants');\nvar slice = Array.prototype.slice;\nvar push = Array.prototype.push;\n\n//define entire events\n//var allEvents = ['bidRequested','bidResponse','bidWon','bidTimeout'];\nvar allEvents = utils._map(CONSTANTS.EVENTS, function (v) {\n  return v;\n});\n\nvar idPaths = CONSTANTS.EVENT_ID_PATHS;\n\n//keep a record of all events fired\nvar eventsFired = [];\n\nmodule.exports = (function () {\n\n  var _handlers = {};\n  var _public = {};\n\n  /**\n   *\n   * @param {String} eventString  The name of the event.\n   * @param {Array} args  The payload emitted with the event.\n   * @private\n   */\n  function _dispatch(eventString, args) {\n    utils.logMessage('Emitting event for: ' + eventString);\n\n    var eventPayload = args[0] || {};\n    var idPath = idPaths[eventString];\n    var key = eventPayload[idPath];\n    var event = _handlers[eventString] || { que: [] };\n    var eventKeys = utils._map(event, function (v, k) {\n      return k;\n    });\n\n    var callbacks = [];\n\n    //record the event:\n    eventsFired.push({\n      eventType: eventString,\n      args: eventPayload,\n      id: key\n    });\n\n    /** Push each specific callback to the `callbacks` array.\n     * If the `event` map has a key that matches the value of the\n     * event payload id path, e.g. `eventPayload[idPath]`, then apply\n     * each function in the `que` array as an argument to push to the\n     * `callbacks` array\n     * */\n    if (key && utils.contains(eventKeys, key)) {\n      push.apply(callbacks, event[key].que);\n    }\n\n    /** Push each general callback to the `callbacks` array. */\n    push.apply(callbacks, event.que);\n\n    /** call each of the callbacks */\n    utils._each(callbacks, function (fn) {\n      if (!fn) return;\n      try {\n        fn.apply(null, args);\n      }\n      catch (e) {\n        utils.logError('Error executing handler:', 'events.js', e);\n      }\n    });\n  }\n\n  function _checkAvailableEvent(event) {\n    return utils.contains(allEvents, event);\n  }\n\n  _public.on = function (eventString, handler, id) {\n\n    //check whether available event or not\n    if (_checkAvailableEvent(eventString)) {\n      var event = _handlers[eventString] || { que: [] };\n\n      if (id) {\n        event[id] = event[id] || { que: [] };\n        event[id].que.push(handler);\n      } else {\n        event.que.push(handler);\n      }\n\n      _handlers[eventString] = event;\n    } else {\n      utils.logError('Wrong event name : ' + eventString + ' Valid event names :' + allEvents);\n    }\n  };\n\n  _public.emit = function (event) {\n    var args = slice.call(arguments, 1);\n    _dispatch(event, args);\n  };\n\n  _public.off = function (eventString, handler, id) {\n    var event = _handlers[eventString];\n\n    if (utils.isEmpty(event) || utils.isEmpty(event.que) && utils.isEmpty(event[id])) {\n      return;\n    }\n\n    if (id && (utils.isEmpty(event[id]) || utils.isEmpty(event[id].que))) {\n      return;\n    }\n\n    if (id) {\n      utils._each(event[id].que, function (_handler) {\n        var que = event[id].que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    } else {\n      utils._each(event.que, function (_handler) {\n        var que = event.que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    }\n\n    _handlers[eventString] = event;\n  };\n\n  _public.get = function () {\n    return _handlers;\n  };\n\n  /**\n   * This method can return a copy of all the events fired\n   * @return {Array} array of events fired\n   */\n  _public.getEvents = function () {\n    var arrayCopy = [];\n    utils._each(eventsFired, function (value) {\n      var newProp = Object.assign({}, value);\n      arrayCopy.push(newProp);\n    });\n\n    return arrayCopy;\n  };\n\n  return _public;\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","/*\n * Adapter for requesting bids from RTK Aardvark\n * To request an RTK Aardvark Header bidding account\n * or for additional integration support please contact sales@rtk.io\n */\n\nvar utils      = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader   = require('../adloader.js');\nvar adapter    = require('./adapter.js');\nvar constants  = require('../constants.json');\n\nvar AARDVARK_CALLBACK_NAME = 'aardvarkResponse',\n    AARDVARK_REQUESTS_MAP  = 'aardvarkRequests',\n    AARDVARK_BIDDER_CODE   = 'aardvark',\n    DEFAULT_REFERRER       = 'thor.rtk.io',\n    DEFAULT_ENDPOINT       = 'thor.rtk.io',\n\n    endpoint               = DEFAULT_ENDPOINT,\n\n    requestBids = function(bidderCode, callbackName, bidReqs) {\n      var ref    = utils.getTopWindowLocation(),\n          ai     = '',\n          scs    = [],\n          bidIds = [];\n\n      ref = ref ? ref.host : DEFAULT_REFERRER;\n\n      for (var i = 0, l = bidReqs.length, bid, _ai, _sc, _endpoint; i < l; i += 1) {\n        bid = bidReqs[i];\n        _ai = utils.getBidIdParameter('ai', bid.params);\n        _sc = utils.getBidIdParameter('sc', bid.params);\n        if (!_ai || !_ai.length || !_sc || !_sc.length)\n          continue;\n\n        _endpoint = utils.getBidIdParameter('host', bid.params);\n        if (_endpoint)\n          endpoint = _endpoint;\n\n        if (!ai.length)\n          ai = _ai;\n        if (_sc)\n          scs.push(_sc);\n\n        bidIds.push(_sc + \"=\" + bid.bidId);\n\n        // Create the bidIdsMap for easier mapping back later\n        pbjs[AARDVARK_REQUESTS_MAP][bidderCode][bid.bidId] = bid;\n      }\n\n      if (!ai.length || !scs.length)\n        return utils.logWarn(\"Bad bid request params given for adapter $\" + bidderCode + \" (\" + AARDVARK_BIDDER_CODE + \")\");\n\n      adloader.loadScript([\n        '//' + endpoint + '/', ai, '/', scs.join('_'),\n        '/aardvark/?jsonp=pbjs.', callbackName,\n        '&rtkreferer=', ref, '&', bidIds.join('&')\n      ].join(''));\n    },\n\n\n\n    registerBidResponse = function(bidderCode, rawBidResponse) {\n      if (rawBidResponse.error)\n        return utils.logWarn(\"Aardvark bid received with an error, ignoring... [\" + rawBidResponse.error + \"]\");\n\n      if (!rawBidResponse.cid)\n        return utils.logWarn(\"Aardvark bid received without a callback id, ignoring...\");\n\n      var bidObj = pbjs[AARDVARK_REQUESTS_MAP][bidderCode][rawBidResponse.cid];\n      if (!bidObj)\n        return utils.logWarn(\"Aardvark request not found: \" + rawBidResponse.cid);\n\n      if (bidObj.params.sc !== rawBidResponse.id)\n        return utils.logWarn(\"Aardvark bid received with a non matching shortcode \" + rawBidResponse.id + \" instead of \" + bidObj.params.sc);\n\n      var bidResponse = bidfactory.createBid(constants.STATUS.GOOD, bidObj);\n      bidResponse.bidderCode = bidObj.bidder;\n      bidResponse.cpm        = rawBidResponse.cpm;\n      bidResponse.ad         = rawBidResponse.adm + utils.createTrackPixelHtml(decodeURIComponent(rawBidResponse.nurl));\n      bidResponse.width      = bidObj.sizes[0][0];\n      bidResponse.height     = bidObj.sizes[0][1];\n\n      bidmanager.addBidResponse(bidObj.placementCode, bidResponse);\n      pbjs[AARDVARK_REQUESTS_MAP][bidderCode][rawBidResponse.cid].responded = true;\n    },\n\n\n\n    registerAardvarkCallback = function(bidderCode, callbackName) {\n      pbjs[callbackName] = function(rtkResponseObj) {\n\n        rtkResponseObj.forEach(function(bidResponse) {\n          registerBidResponse(bidderCode, bidResponse);\n        });\n\n        for (var bidRequestId in pbjs[AARDVARK_REQUESTS_MAP][bidderCode])\n          if (pbjs[AARDVARK_REQUESTS_MAP][bidderCode].hasOwnProperty(bidRequestId)) {\n            var bidRequest = pbjs[AARDVARK_REQUESTS_MAP][bidderCode][bidRequestId];\n            if (!bidRequest.responded) {\n              var bidResponse = bidfactory.createBid(constants.STATUS.NO_BID, bidRequest);\n              bidResponse.bidderCode = bidRequest.bidder;\n              bidmanager.addBidResponse(bidRequest.placementCode, bidResponse);\n            }\n          }\n      };\n    },\n\n\n\n    AardvarkAdapter = function() {\n      var baseAdapter = adapter.createNew(AARDVARK_BIDDER_CODE);\n\n      pbjs[AARDVARK_REQUESTS_MAP] = pbjs[AARDVARK_REQUESTS_MAP] || {};\n\n      baseAdapter.callBids = function (params) {\n        var bidderCode   = baseAdapter.getBidderCode(),\n            callbackName = AARDVARK_CALLBACK_NAME;\n\n        if (bidderCode !== AARDVARK_BIDDER_CODE)\n          callbackName = [AARDVARK_CALLBACK_NAME, bidderCode].join('_');\n\n        pbjs[AARDVARK_REQUESTS_MAP][bidderCode] = {};\n\n        registerAardvarkCallback(bidderCode, callbackName);\n\n        return requestBids(bidderCode, callbackName, params.bids || []);\n      };\n\n      return {\n        callBids:      baseAdapter.callBids,\n        setBidderCode: baseAdapter.setBidderCode,\n        createNew:     exports.createNew\n      };\n    };\n\n\n\nexports.createNew = function() {\n  return new AardvarkAdapter();\n};\n\nmodule.exports = AardvarkAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/aardvark.js","var utils = require('./utils.js');\n\n/**\n Required paramaters\n bidderCode,\n height,\n width,\n statusCode\n Optional paramaters\n adId,\n cpm,\n ad,\n adUrl,\n dealId,\n priceKeyString;\n */\nfunction Bid(statusCode, bidRequest) {\n  var _bidId = bidRequest && bidRequest.bidId || utils.getUniqueIdentifierStr();\n  var _statusCode = statusCode || 0;\n\n  this.bidderCode = '';\n  this.width = 0;\n  this.height = 0;\n  this.statusMessage = _getStatus();\n  this.adId = _bidId;\n\n  function _getStatus() {\n    switch (_statusCode) {\n      case 0:\n        return 'Pending';\n      case 1:\n        return 'Bid available';\n      case 2:\n        return 'Bid returned empty or error response';\n      case 3:\n        return 'Bid timed out';\n    }\n  }\n\n  this.getStatusCode = function () {\n    return _statusCode;\n  };\n\n  //returns the size of the bid creative. Concatenation of width and height by x.\n  this.getSize = function () {\n    return this.width + 'x' + this.height;\n  };\n\n}\n\n// Bid factory function.\nexports.createBid = function () {\n  return new Bid(...arguments);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidfactory.js","import {uniques, flatten, adUnitsFilter} from './utils';\nimport {getPriceBucketString} from './cpmBucketManager';\n\nvar CONSTANTS = require('./constants.json');\nvar AUCTION_END = CONSTANTS.EVENTS.AUCTION_END;\nvar utils = require('./utils.js');\nvar events = require('./events');\n\nvar objectType_function = 'function';\n\nvar externalCallbacks = {byAdUnit: [], all: [], oneTime: null, timer: false};\nvar _granularity = CONSTANTS.GRANULARITY_OPTIONS.MEDIUM;\nlet _customPriceBucket;\nvar defaultBidderSettingsMap = {};\n\nexports.setCustomPriceBucket = function(customConfig) {\n  _customPriceBucket = customConfig;\n};\n\n/**\n * Returns a list of bidders that we haven't received a response yet\n * @return {array} [description]\n */\nexports.getTimedOutBidders = function () {\n  return pbjs._bidsRequested\n    .map(getBidderCode)\n    .filter(uniques)\n    .filter(bidder => pbjs._bidsReceived\n      .map(getBidders)\n      .filter(uniques)\n      .indexOf(bidder) < 0);\n};\n\nfunction timestamp() { return new Date().getTime(); }\n\nfunction getBidderCode(bidSet) {\n  return bidSet.bidderCode;\n}\n\nfunction getBidders(bid) {\n  return bid.bidder;\n}\n\nfunction bidsBackAdUnit(adUnitCode) {\n  const requested = pbjs._bidsRequested\n    .map(request => request.bids\n      .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes))\n      .filter(bid => bid.placementCode === adUnitCode))\n    .reduce(flatten, [])\n    .map(bid => {\n      return bid.bidder === 'indexExchange' ?\n          bid.sizes.length :\n          1;\n    }).reduce(add, 0);\n\n  const received = pbjs._bidsReceived.filter(bid => bid.adUnitCode === adUnitCode).length;\n  return requested === received;\n}\n\nfunction add(a, b) {\n  return a + b;\n}\n\nfunction bidsBackAll() {\n  const requested = pbjs._bidsRequested\n    .map(request => request.bids)\n    .reduce(flatten, [])\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes))\n    .map(bid => {\n      return bid.bidder === 'indexExchange' ?\n        bid.sizes.length :\n        1;\n    }).reduce((a, b) => a + b, 0);\n\n  const received = pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes)).length;\n\n  return requested === received;\n}\n\nexports.bidsBackAll = function () {\n  return bidsBackAll();\n};\n\nfunction getBidderRequest(bidder, adUnitCode) {\n  return pbjs._bidsRequested.find(request => {\n    return request.bids\n        .filter(bid => bid.bidder === bidder && bid.placementCode === adUnitCode).length > 0;\n  }) || { start: null, requestId: null };\n}\n\n/*\n *   This function should be called to by the bidder adapter to register a bid response\n */\nexports.addBidResponse = function (adUnitCode, bid) {\n  if (!adUnitCode) {\n    utils.logWarn('No adUnitCode supplied to addBidResponse, response discarded');\n    return;\n  }\n\n  if (bid) {\n\n    const { requestId, start } = getBidderRequest(bid.bidderCode, adUnitCode);\n    Object.assign(bid, {\n      requestId: requestId,\n      responseTimestamp: timestamp(),\n      requestTimestamp: start,\n      cpm: bid.cpm || 0,\n      bidder: bid.bidderCode,\n      adUnitCode\n    });\n\n    bid.timeToRespond = bid.responseTimestamp - bid.requestTimestamp;\n\n    if (bid.timeToRespond > pbjs.cbTimeout + pbjs.timeoutBuffer) {\n      const timedOut = true;\n\n      exports.executeCallback(timedOut);\n    }\n\n    //emit the bidAdjustment event before bidResponse, so bid response has the adjusted bid value\n    events.emit(CONSTANTS.EVENTS.BID_ADJUSTMENT, bid);\n\n    //emit the bidResponse event\n    events.emit(CONSTANTS.EVENTS.BID_RESPONSE, bid);\n\n    //append price strings\n    const priceStringsObj = getPriceBucketString(bid.cpm, _customPriceBucket);\n    bid.pbLg = priceStringsObj.low;\n    bid.pbMg = priceStringsObj.med;\n    bid.pbHg = priceStringsObj.high;\n    bid.pbAg = priceStringsObj.auto;\n    bid.pbDg = priceStringsObj.dense;\n    bid.pbCg = priceStringsObj.custom;\n\n    //if there is any key value pairs to map do here\n    var keyValues = {};\n    if (bid.bidderCode && (bid.cpm > 0 || bid.dealId ) ) {\n      keyValues = getKeyValueTargetingPairs(bid.bidderCode, bid);\n    }\n\n    bid.adserverTargeting = keyValues;\n    pbjs._bidsReceived.push(bid);\n  }\n\n  if (bid && bid.adUnitCode && bidsBackAdUnit(bid.adUnitCode)) {\n    triggerAdUnitCallbacks(bid.adUnitCode);\n  }\n\n  if (bidsBackAll()) {\n    exports.executeCallback();\n  }\n};\n\nfunction getKeyValueTargetingPairs(bidderCode, custBidObj) {\n  var keyValues = {};\n  var bidder_settings = pbjs.bidderSettings;\n\n  //1) set the keys from \"standard\" setting or from prebid defaults\n  if (custBidObj && bidder_settings) {\n    //initialize default if not set\n    const standardSettings = getStandardBidderSettings();\n    setKeys(keyValues, standardSettings, custBidObj);\n  }\n\n  //2) set keys from specific bidder setting override if they exist\n  if (bidderCode && custBidObj && bidder_settings && bidder_settings[bidderCode] && bidder_settings[bidderCode][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n    setKeys(keyValues, bidder_settings[bidderCode], custBidObj);\n    custBidObj.alwaysUseBid = bidder_settings[bidderCode].alwaysUseBid;\n    custBidObj.sendStandardTargeting = bidder_settings[bidderCode].sendStandardTargeting;\n  }\n\n  //2) set keys from standard setting. NOTE: this API doesn't seem to be in use by any Adapter\n  else if (defaultBidderSettingsMap[bidderCode]) {\n    setKeys(keyValues, defaultBidderSettingsMap[bidderCode], custBidObj);\n    custBidObj.alwaysUseBid = defaultBidderSettingsMap[bidderCode].alwaysUseBid;\n    custBidObj.sendStandardTargeting = defaultBidderSettingsMap[bidderCode].sendStandardTargeting;\n  }\n\n  return keyValues;\n}\n\nexports.getKeyValueTargetingPairs = function() {\n  return getKeyValueTargetingPairs(...arguments);\n};\n\nfunction setKeys(keyValues, bidderSettings, custBidObj) {\n  var targeting = bidderSettings[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  custBidObj.size = custBidObj.getSize();\n\n  utils._each(targeting, function (kvPair) {\n    var key = kvPair.key;\n    var value = kvPair.val;\n\n    if (keyValues[key]) {\n      utils.logWarn('The key: ' + key + ' is getting ovewritten');\n    }\n\n    if (utils.isFn(value)) {\n      try {\n        value = value(custBidObj);\n      } catch (e) {\n        utils.logError('bidmanager', 'ERROR', e);\n      }\n    }\n\n    if (\n      (typeof bidderSettings.suppressEmptyKeys !== \"undefined\" && bidderSettings.suppressEmptyKeys === true ||\n      key === \"hb_deal\") && // hb_deal is suppressed automatically if not set\n      (\n        utils.isEmptyStr(value) ||\n        value === null ||\n        value === undefined\n      )\n    ) {\n      utils.logInfo(\"suppressing empty key '\" + key + \"' from adserver targeting\");\n    } else {\n      keyValues[key] = value;\n    }\n\n  });\n\n  return keyValues;\n}\n\nexports.setPriceGranularity = function setPriceGranularity(granularity) {\n  var granularityOptions = CONSTANTS.GRANULARITY_OPTIONS;\n  if (Object.keys(granularityOptions).filter(option => granularity === granularityOptions[option])) {\n    _granularity = granularity;\n  } else {\n    utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using' +\n      ' `medium` as default.');\n    _granularity = CONSTANTS.GRANULARITY_OPTIONS.MEDIUM;\n  }\n};\n\nexports.registerDefaultBidderSetting = function (bidderCode, defaultSetting) {\n  defaultBidderSettingsMap[bidderCode] = defaultSetting;\n};\n\nexports.executeCallback = function (timedOut) {\n  // if there's still a timeout running, clear it now\n  if (!timedOut && externalCallbacks.timer) {\n    clearTimeout(externalCallbacks.timer);\n  }\n\n  if (externalCallbacks.all.called !== true) {\n    processCallbacks(externalCallbacks.all);\n    externalCallbacks.all.called = true;\n\n    if (timedOut) {\n      const timedOutBidders = exports.getTimedOutBidders();\n\n      if (timedOutBidders.length) {\n        events.emit(CONSTANTS.EVENTS.BID_TIMEOUT, timedOutBidders);\n      }\n    }\n  }\n\n  //execute one time callback\n  if (externalCallbacks.oneTime) {\n    events.emit(AUCTION_END);\n    try {\n      processCallbacks([externalCallbacks.oneTime]);\n    }\n    catch(e){\n      utils.logError('Error executing bidsBackHandler', null, e);\n    }\n    finally {\n      externalCallbacks.oneTime = null;\n      externalCallbacks.timer = false;\n      pbjs.clearAuction();\n    }\n  }\n};\n\nexports.externalCallbackReset = function () {\n  externalCallbacks.all.called = false;\n};\n\nfunction triggerAdUnitCallbacks(adUnitCode) {\n  //todo : get bid responses and send in args\n  var singleAdUnitCode = [adUnitCode];\n  processCallbacks(externalCallbacks.byAdUnit, singleAdUnitCode);\n}\n\nfunction processCallbacks(callbackQueue, singleAdUnitCode) {\n  if (utils.isArray(callbackQueue)) {\n    callbackQueue.forEach(callback => {\n      const adUnitCodes = singleAdUnitCode || pbjs._adUnitCodes;\n      const bids = [pbjs._bidsReceived\n                      .filter(adUnitsFilter.bind(this, adUnitCodes))\n                      .reduce(groupByPlacement, {})];\n\n      callback.apply(pbjs, bids);\n    });\n  }\n}\n\n/**\n * groupByPlacement is a reduce function that converts an array of Bid objects\n * to an object with placement codes as keys, with each key representing an object\n * with an array of `Bid` objects for that placement\n * @returns {*} as { [adUnitCode]: { bids: [Bid, Bid, Bid] } }\n */\nfunction groupByPlacement(bidsByPlacement, bid) {\n  if (!bidsByPlacement[bid.adUnitCode])\n    bidsByPlacement[bid.adUnitCode] = { bids: [] };\n\n  bidsByPlacement[bid.adUnitCode].bids.push(bid);\n\n  return bidsByPlacement;\n}\n\n/**\n * Add a one time callback, that is discarded after it is called\n * @param {Function} callback\n * @param timer Timer to clear if callback is triggered before timer time's out\n */\nexports.addOneTimeCallback = function (callback, timer) {\n  externalCallbacks.oneTime = callback;\n  externalCallbacks.timer = timer;\n};\n\nexports.addCallback = function (id, callback, cbEvent) {\n  callback.id = id;\n  if (CONSTANTS.CB.TYPE.ALL_BIDS_BACK === cbEvent) {\n    externalCallbacks.all.push(callback);\n  } else if (CONSTANTS.CB.TYPE.AD_UNIT_BIDS_BACK === cbEvent) {\n    externalCallbacks.byAdUnit.push(callback);\n  }\n};\n\n//register event for bid adjustment\nevents.on(CONSTANTS.EVENTS.BID_ADJUSTMENT, function (bid) {\n  adjustBids(bid);\n});\n\nfunction adjustBids(bid) {\n  var code = bid.bidderCode;\n  var bidPriceAdjusted = bid.cpm;\n  if (code && pbjs.bidderSettings && pbjs.bidderSettings[code]) {\n    if (typeof pbjs.bidderSettings[code].bidCpmAdjustment === objectType_function) {\n      try {\n        bidPriceAdjusted = pbjs.bidderSettings[code].bidCpmAdjustment.call(null, bid.cpm, Object.assign({}, bid));\n      }\n      catch (e) {\n        utils.logError('Error during bid adjustment', 'bidmanager.js', e);\n      }\n    }\n  }\n\n  if (bidPriceAdjusted >= 0) {\n    bid.cpm = bidPriceAdjusted;\n  }\n}\n\nexports.adjustBids = function() {\n  return adjustBids(...arguments);\n};\n\nfunction getStandardBidderSettings() {\n  let bidder_settings = pbjs.bidderSettings;\n  if (!bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD]) {\n    bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] = {\n      adserverTargeting: [\n        {\n          key: 'hb_bidder',\n          val: function (bidResponse) {\n            return bidResponse.bidderCode;\n          }\n        }, {\n          key: 'hb_adid',\n          val: function (bidResponse) {\n            return bidResponse.adId;\n          }\n        }, {\n          key: 'hb_pb',\n          val: function (bidResponse) {\n            if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.AUTO) {\n              return bidResponse.pbAg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.DENSE) {\n              return bidResponse.pbDg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.LOW) {\n              return bidResponse.pbLg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.MEDIUM) {\n              return bidResponse.pbMg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.HIGH) {\n              return bidResponse.pbHg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.CUSTOM) {\n              return bidResponse.pbCg;\n            }\n          }\n        }, {\n          key: 'hb_size',\n          val: function (bidResponse) {\n            return bidResponse.size;\n          }\n        }, {\n          key: 'hb_deal',\n          val: function (bidResponse) {\n            return bidResponse.dealId;\n          }\n        }\n      ]\n    };\n  }\n  return bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD];\n}\n\nfunction getStandardBidderAdServerTargeting() {\n  return getStandardBidderSettings()[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n}\n\nexports.getStandardBidderAdServerTargeting = getStandardBidderAdServerTargeting;\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidmanager.js","const _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n      'min': 0,\n      'max': 3,\n      'increment': 0.01\n    },\n    {\n      'min': 3,\n      'max': 8,\n      'increment': 0.05\n    },\n    {\n      'min': 8,\n      'max': 20,\n      'increment': 0.5\n    }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n      'min': 0,\n      'max': 5,\n      'increment': 0.05\n    },\n    {\n      'min': 5,\n      'max': 10,\n      'increment': 0.1\n    },\n    {\n      'min': 10,\n      'max': 20,\n      'increment': 0.5\n    }]\n};\n\nfunction getPriceBucketString(cpm, customConfig) {\n  let cpmFloat = 0;\n  cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig),\n    custom:  (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig)\n  };\n}\n\nfunction getCpmStringValue(cpm, config) {\n  let cpmStr = '';\n  if (!isValidePriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev,curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = config.buckets.find(bucket => {\n    if (cpm > cap.max) {\n      const precision = bucket.precision || _defaultPrecision;\n      cpmStr = bucket.max.toFixed(precision);\n    } else if (cpm <= bucket.max && cpm >= bucket.min) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket.increment, bucket.precision);\n  }\n  return cpmStr;\n}\n\nfunction isValidePriceConfig(config) {\n  if (!config || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if(typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, increment, precision) {\n  if (!precision) {\n    precision = _defaultPrecision;\n  }\n  let bucketSize = 1 / increment;\n  return (Math.floor(cpm * bucketSize) / bucketSize).toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidePriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","var utils = require('./utils');\nlet _requestCache = {};\n\n//add a script tag to the page, used to add /jpt call to page\nexports.loadScript = function (tagSrc, callback, cacheRequest) {\n  //var noop = () => {};\n  //\n  //callback = callback || noop;\n  if (!tagSrc) {\n    utils.logError('Error attempting to request empty URL', 'adloader.js:loadScript');\n    return;\n  }\n\n  if (cacheRequest) {\n    if (_requestCache[tagSrc]) {\n      if (callback && typeof callback === 'function') {\n        if (_requestCache[tagSrc].loaded) {\n          //invokeCallbacks immediately\n          callback();\n        } else {\n          //queue the callback\n          _requestCache[tagSrc].callbacks.push(callback);\n        }\n      }\n    } else {\n      _requestCache[tagSrc] = {\n        loaded: false,\n        callbacks: []\n      };\n      if (callback && typeof callback === 'function') {\n        _requestCache[tagSrc].callbacks.push(callback);\n      }\n\n      requestResource(tagSrc, function () {\n        _requestCache[tagSrc].loaded = true;\n        try {\n          for (let i = 0; i < _requestCache[tagSrc].callbacks.length; i++) {\n            _requestCache[tagSrc].callbacks[i]();\n          }\n        }\n        catch (e) {\n          utils.logError('Error executing callback', 'adloader.js:loadScript', e);\n        }\n      });\n    }\n  }\n\n  //trigger one time request\n  else {\n    requestResource(tagSrc, callback);\n  }\n\n};\n\nfunction requestResource(tagSrc, callback) {\n  var jptScript = document.createElement('script');\n  jptScript.type = 'text/javascript';\n  jptScript.async = true;\n\n  // Execute a callback if necessary\n  if (callback && typeof callback === 'function') {\n    if (jptScript.readyState) {\n      jptScript.onreadystatechange = function () {\n        if (jptScript.readyState === 'loaded' || jptScript.readyState === 'complete') {\n          jptScript.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      jptScript.onload = function () {\n        callback();\n      };\n    }\n  }\n\n  jptScript.src = tagSrc;\n\n  //add the new script tag to the page\n  var elToAppend = document.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : document.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(jptScript, elToAppend.firstChild);\n  }\n}\n\n//track a impbus tracking pixel\n//TODO: Decide if tracking via AJAX is sufficent, or do we need to\n//run impression trackers via page pixels?\nexports.trackPixel = function (pixelUrl) {\n  let delimiter;\n  let trackingPixel;\n\n  if (!pixelUrl || typeof (pixelUrl) !== 'string') {\n    utils.logMessage('Missing or invalid pixelUrl.');\n    return;\n  }\n\n  delimiter = pixelUrl.indexOf('?') > 0 ? '&' : '?';\n\n  //add a cachebuster so we don't end up dropping any impressions\n  trackingPixel = pixelUrl + delimiter + 'rnd=' + Math.floor(Math.random() * 1E7);\n  (new Image()).src = trackingPixel;\n  return trackingPixel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adloader.js","function Adapter(code) {\n  var bidderCode = code;\n\n  function setBidderCode(code) {\n    bidderCode = code;\n  }\n\n  function getBidderCode() {\n    return bidderCode;\n  }\n\n  function callBids() {\n  }\n\n  return {\n    callBids: callBids,\n    setBidderCode: setBidderCode,\n    getBidderCode: getBidderCode\n  };\n}\n\nexports.createNew = function (bidderCode) {\n  return new Adapter(bidderCode);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapter.js","var utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\n/**\n * Adapter for requesting bids from Adblade\n * To request an Adblade Header partner account\n * or for additional integration support please\n * register at http://www.adblade.com.\n */\nvar AdbladeAdapter = function AdbladeAdapter() {\n  'use strict';\n\n  const BIDDER_CODE       = 'adblade';\n  const BASE_URI          = '//rtb.adblade.com/prebidjs/bid?';\n  const DEFAULT_BID_FLOOR = 0.0000000001;\n\n  function _callBids(params) {\n    var bids        = params.bids || [],\n        referrer    = utils.getTopWindowUrl(),\n        loc         = utils.getTopWindowLocation(),\n        domain      = loc.hostname,\n        partnerId   = 0,\n        bidRequests = {};\n\n    if (bids.length > 0) {\n      partnerId = '' + bids[0].params.partnerId;\n    }\n\n    utils._each(bids, function(bid) {\n      // make sure the \"sizes\" are an array of arrays\n      if (!(bid.sizes[0] instanceof Array)) {\n        bid.sizes = [bid.sizes];\n      }\n      utils._each(bid.sizes, function(size) {\n        let key = size[0] + 'x' + size[1];\n\n        bidRequests[key] = bidRequests[key] || {\n          'site': {\n            'id': partnerId,\n            'page': referrer,\n            'domain': domain,\n            'publisher': {\n              'id': partnerId,\n              'name': referrer,\n              'domain': domain\n            }\n          },\n          'id': params.requestId,\n          'imp': [],\n          'device': {\n            'ua': window.navigator.userAgent,\n          },\n          'cur': ['USD'],\n          'user': {}\n        };\n\n        bidRequests[key].imp.push({\n          'id': bid.bidId,\n          'bidfloor': bid.params.bidFloor || DEFAULT_BID_FLOOR,\n          'tag': bid.placementCode,\n          'banner': {\n            'w': size[0],\n            'h': size[1],\n          },\n          'secure': 0 + (loc.protocol === 'https')\n        });\n      });\n    });\n\n    utils._each(bidRequests, function (bidRequest) {\n      adloader.loadScript(\n        utils.tryAppendQueryString(\n          utils.tryAppendQueryString(\n            BASE_URI,\n            'callback',\n            'pbjs.adbladeResponse'\n          ),\n          'json',\n          JSON.stringify(\n            bidRequest\n          )\n        )\n      );\n    });\n  }\n\n  pbjs.adbladeResponse = function (response) {\n    var auctionIdRe    = /\\$(%7B|\\{)AUCTION_ID(%7D|\\})/gi,\n        auctionPriceRe = /\\$(%7B|\\{)AUCTION_PRICE(%7D|\\})/gi,\n        clickUrlRe     = /\\$(%7B|\\{)CLICK_URL(%7D|\\})/gi;\n\n    if (typeof(response) === 'undefined' || !response.hasOwnProperty('seatbid') || utils.isEmpty(response.seatbid)) {\n      // handle empty bids\n      var bidsRequested = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === BIDDER_CODE).bids;\n      if (bidsRequested.length > 0) {\n        let bid = bidfactory.createBid(2);\n        bid.bidderCode = BIDDER_CODE;\n        bidmanager.addBidResponse(bidsRequested[0].placementCode, bid);\n      }\n\n      return;\n    }\n\n    utils._each(response.seatbid, function(seatbid) {\n      utils._each(seatbid.bid, function(seatbidBid) {\n        var bidRequest = utils.getBidRequest(seatbidBid.impid),\n            ad         = seatbidBid.adm + utils.createTrackPixelHtml(seatbidBid.nurl);\n\n        ad = ad.replace(auctionIdRe, seatbidBid.impid);\n        ad = ad.replace(clickUrlRe, '');\n        ad = ad.replace(auctionPriceRe, seatbidBid.price);\n\n        let bid = bidfactory.createBid(1);\n\n        bid.bidderCode = BIDDER_CODE;\n        bid.cpm = seatbidBid.price;\n        bid.ad = ad;\n        bid.width = seatbidBid.w;\n        bid.height = seatbidBid.h;\n        bidmanager.addBidResponse(bidRequest.placementCode, bid);\n      });\n    });\n  };\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = AdbladeAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adblade.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar adBundAdapter = function adBundAdapter() {\n  var timezone = (new Date()).getTimezoneOffset();\n  var bidAPIs = [\n    'http://us-east-engine.adbund.xyz/prebid/ad/get',\n    'http://us-west-engine.adbund.xyz/prebid/ad/get'\n  ];\n  //Based on the time zone to select the interface to the server\n  var bidAPI = bidAPIs[timezone < 0 ? 0 : 1];\n\n  function _stringify(param) {\n    var result = [];\n    var key;\n    for (key in param) {\n      if (param.hasOwnProperty(key)) {\n        result.push(key + '=' + encodeURIComponent(param[key]));\n      }\n    }\n    return result.join('&');\n  }\n\n  function _createCallback(bid) {\n    return function (data) {\n      var response;\n      if (data && data.cpm) {\n        response = bidfactory.createBid(CONSTANTS.STATUS.GOOD);\n        response.bidderCode = 'adbund';\n        Object.assign(response, data);\n      } else {\n        response = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n        response.bidderCode = 'adbund';\n      }\n      bidmanager.addBidResponse(bid.placementCode, response);\n    };\n  }\n\n  function _requestBids(bid) {\n    var info = {\n      referrer: utils.getTopWindowUrl(),\n      domain: utils.getTopWindowLocation().hostname,\n      ua: window.navigator.userAgent\n    };\n    var param = Object.assign({}, bid.params, info);\n    param.sizes = JSON.stringify(param.sizes || bid.sizes);\n    param.callback = 'pbjs.adbundResponse';\n    pbjs.adbundResponse = _createCallback(bid);\n    adloader.loadScript(bidAPI + '?' + _stringify(param));\n  }\n\n  function _callBids(params) {\n    (params.bids || []).forEach(function (bid) {\n      _requestBids(bid);\n    });\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = adBundAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adbund.js","/**\n * @overview AdButler Prebid.js adapter.\n * @author dkharton\n */\n\n'use strict';\n\nvar utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\n\nvar AdButlerAdapter = function AdButlerAdapter() {\n  \n  function _callBids(params) {\n    \n    var bids = params.bids || [],\n        callbackData = {},\n        zoneCount = {},\n        pageID = Math.floor(Math.random() * 10e6);\n\n    //Build and send bid requests\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i],\n        zoneID = utils.getBidIdParameter('zoneID', bid.params),\n        callbackID;  \n        \n      if(!(zoneID in zoneCount)){\n        zoneCount[zoneID] = 0;\n      }\n      \n      //build callbackID to get placementCode later  \n      callbackID = zoneID + '_' +zoneCount[zoneID];\n\n      callbackData[callbackID] = {};\n      callbackData[callbackID].bidId = bid.bidId;\n      \n      var adRequest = buildRequest(bid,zoneCount[zoneID],pageID);\n      zoneCount[zoneID]++;\n\n      adloader.loadScript(adRequest);\n    }\n      \n    //Define callback function for bid responses\n    pbjs.adbutlerCB = function(aBResponseObject){\n        \n      var bidResponse = {},\n        callbackID = aBResponseObject.zone_id+'_'+aBResponseObject.place,\n        width = parseInt(aBResponseObject.width),\n        height = parseInt(aBResponseObject.height),\n        isCorrectSize = false,\n        isCorrectCPM = true,\n        CPM,minCPM,maxCPM,\n        bidObj = callbackData[callbackID] ? utils.getBidRequest(callbackData[callbackID].bidId) : null;\n        \n      if (bidObj) {\n        \n        if(aBResponseObject.status === 'SUCCESS'){\n          CPM = aBResponseObject.cpm;\n          minCPM = utils.getBidIdParameter('minCPM',bidObj.params);\n          maxCPM = utils.getBidIdParameter('maxCPM',bidObj.params);\n\n          //Ensure response CPM is within the given bounds\n          if(minCPM !== '' && CPM < parseFloat(minCPM)){\n            isCorrectCPM = false;\n          }\n          if(maxCPM !== '' && CPM > parseFloat(maxCPM)){\n            isCorrectCPM = false;\n          }\n\n          //Ensure that response ad matches one of the placement sizes.  \n          utils._each(bidObj.sizes,function(size){\n            if(width === size[0] && height === size[1]){\n              isCorrectSize = true;\n            }\n          });\n\n          if(isCorrectCPM && isCorrectSize){\n\n            bidResponse = bidfactory.createBid(1,bidObj);\n            bidResponse.bidderCode = 'adbutler';\n            bidResponse.cpm = CPM;\n            bidResponse.width = width;\n            bidResponse.height = height;\n            bidResponse.ad = aBResponseObject.ad_code;\n            bidResponse.ad += addTrackingPixels(aBResponseObject.tracking_pixels);\n\n          } else {\n\n            bidResponse = bidfactory.createBid(2,bidObj);\n            bidResponse.bidderCode = 'adbutler';\n\n          }\n        } else {\n\n          bidResponse = bidfactory.createBid(2,bidObj);\n          bidResponse.bidderCode = 'adbutler';\n\n        }  \n          \n        bidmanager.addBidResponse(bidObj.placementCode, bidResponse);\n          \n      }\n    };\n  }\n  \n  function buildRequest(bid,adIndex,pageID){\n    var accountID = utils.getBidIdParameter('accountID', bid.params);\n    var zoneID = utils.getBidIdParameter('zoneID', bid.params);\n    var keyword = utils.getBidIdParameter('keyword', bid.params);\n    \n    var requestURI = location.protocol + '//servedbyadbutler.com/adserve/;type=hbr;';\n    requestURI += 'ID='+encodeURIComponent(accountID)+';';\n    requestURI += 'setID='+encodeURIComponent(zoneID)+';';\n    requestURI += 'pid='+encodeURIComponent(pageID)+';';\n    requestURI += 'place='+encodeURIComponent(adIndex)+';';\n      \n    //append the keyword for targeting if one was passed in  \n    if(keyword !== ''){\n      requestURI +='kw='+encodeURIComponent(keyword)+';';\n    }\n    requestURI += 'jsonpfunc=pbjs.adbutlerCB;';\n    requestURI += 'click=CLICK_MACRO_PLACEHOLDER';\n    \n    return requestURI;\n  }\n  \n  function addTrackingPixels(trackingPixels){\n    var trackingPixelMarkup = '';\n    utils._each(trackingPixels,function(pixelURL){\n      \n      var trackingPixel = '<img height=\"0\" width=\"0\" border=\"0\" style=\"display:none;\" src=\"';\n      trackingPixel += pixelURL;\n      trackingPixel += '\">';\n      \n      trackingPixelMarkup += trackingPixel;\n    });\n    return trackingPixelMarkup;\n  }\n  \n  // Export the callBids function, so that prebid.js can execute this function\n  // when the page asks to send out bid requests.\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = AdButlerAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adbutler.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\nvar utils = require('../utils.js');\nvar CONSTANTS = require('../constants.json');\n\nmodule.exports = function() {\n  var req_url_base = 'https://rex.adequant.com/rex/c2s_prebid?';\n\n  function _callBids(params) {\n    var req_url = [];\n    var publisher_id = null;\n    var sizes = [];\n    var cats = null;\n    var replies = [];\n    var placements = {};\n\n    var bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      var bid_request = bids[i];\n      var br_params = bid_request.params || {};\n      placements[bid_request.placementCode] = true;\n\n      publisher_id = br_params.publisher_id.toString()    || publisher_id;\n      var bidfloor = br_params.bidfloor                   || 0.01;\n      cats         = br_params.cats                       || cats;\n      if (typeof(cats) === utils.objectType_string) { cats = cats.split(' '); }\n      var br_sizes = utils.parseSizesInput(bid_request.sizes);\n      for (var j = 0; j < br_sizes.length; j++) {\n        sizes.push(br_sizes[j]+'_'+bidfloor);\n        replies.push(bid_request.placementCode);\n      }\n    }\n    // send out 1 bid request for all bids\n    if (publisher_id) { req_url.push('a='+publisher_id); }\n    if (cats)         { req_url.push('c='+cats.join('+')); }\n    if (sizes)        { req_url.push('s='+sizes.join('+')); }\n\n    adloader.loadScript(req_url_base+req_url.join('&'), function() { process_bids(replies, placements); });\n  }\n\n  function process_bids(replies, placements) {\n    var placement_code, bid, adequant_creatives = window.adequant_creatives;\n    if (adequant_creatives && adequant_creatives.seatbid) {\n      for (var i=0; i<adequant_creatives.seatbid.length; i++) {\n        var bid_response = adequant_creatives.seatbid[i].bid[0];\n        placement_code = replies[parseInt(bid_response.impid,10)-1];\n        if (!placement_code || !placements[placement_code]) { continue; }\n\n        bid = bidfactory.createBid(CONSTANTS.STATUS.GOOD);\n        bid.bidderCode = 'adequant';\n        bid.cpm = bid_response.price;\n        bid.ad = bid_response.adm;\n        bid.width = bid_response.w;\n        bid.height = bid_response.h;\n        bidmanager.addBidResponse(placement_code, bid);\n        placements[placement_code] = false;\n      }\n    }\n    for (placement_code in placements) {\n      if (placements[placement_code]) {\n        bid = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n        bid.bidderCode = 'adequant';\n        bidmanager.addBidResponse(placement_code, bid);\n        utils.logMessage('No bid response from Adequant for placement code ' + placement_code);\n      }\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adequant.js","var utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\nvar STATUSCODES = require('../constants.json').STATUS;\n\nfunction AdformAdapter() {\n\n  return {\n    callBids: _callBids\n  };\n\n  function _callBids(params) {\n    var bid, _value, _key, i, j, k, l;\n    var bids = params.bids;\n    var request = [];\n    var callbackName = '_adf_' + utils.getUniqueIdentifierStr();\n    var globalParams = [ [ 'adxDomain', 'adx.adform.net' ], [ 'url', null ], [ 'tid', null ], [ 'callback', 'pbjs.' + callbackName ] ];\n\n    for (i = 0, l = bids.length; i < l; i++) {\n      bid = bids[i];\n\n      for (j = 0, k = globalParams.length; j < k; j++) {\n        _key = globalParams[j][0];\n        _value = bid[_key] || bid.params[_key];\n        if (_value) {\n          bid[_key] = bid.params[_key] = null;\n          globalParams[j][1] = _value;\n        }\n      }\n\n      request.push(formRequestUrl(bid.params));\n    }\n\n    request.unshift('//' + globalParams[0][1]+ '/adx/?rp=4');\n\n    for (i = 1, l = globalParams.length; i < l; i++) {\n      _key = globalParams[i][0];\n      _value = globalParams[i][1];\n      if (_value) {\n        request.push(globalParams[i][0] + '='+ encodeURIComponent(_value));\n      }\n    }\n\n    pbjs[callbackName] = handleCallback(bids);\n\n    adloader.loadScript(request.join('&'));\n  }\n\n  function formRequestUrl(reqData) {\n    var key;\n    var url = [];\n\n    for (key in reqData) {\n      if (reqData.hasOwnProperty(key) && reqData[key])\n        url.push(key, '=', reqData[key], '&');\n    }\n\n    return encode64(url.join('').slice(0, -1));\n  }\n\n  function handleCallback(bids) {\n    return function handleResponse(adItems) {\n      var bidObject;\n      var bidder = 'adform';\n      var adItem;\n      var bid;\n      for (var i = 0, l = adItems.length; i < l; i++) {\n        adItem = adItems[i];\n        bid = bids[i];\n        if (adItem && adItem.response === 'banner' &&\n            verifySize(adItem, bid.sizes)) {\n\n          bidObject = bidfactory.createBid(STATUSCODES.GOOD, bid);\n          bidObject.bidderCode = bidder;\n          bidObject.cpm = adItem.win_bid;\n          bidObject.cur = adItem.win_cur;\n          bidObject.ad = adItem.banner;\n          bidObject.width = adItem.width;\n          bidObject.height = adItem.height;\n          bidObject.dealId = adItem.deal_id;\n          bidmanager.addBidResponse(bid.placementCode, bidObject);\n        } else {\n          bidObject = bidfactory.createBid(STATUSCODES.NO_BID, bid);\n          bidObject.bidderCode = bidder;\n          bidmanager.addBidResponse(bid.placementCode, bidObject);\n        }\n      }\n    };\n\n    function verifySize(adItem, validSizes) {\n      for (var j = 0, k = validSizes.length; j < k; j++) {\n        if (adItem.width === validSizes[j][0] &&\n            adItem.height === validSizes[j][1]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }\n\n  function encode64(input) {\n    var out = [];\n    var chr1;\n    var chr2;\n    var chr3;\n    var enc1;\n    var enc2;\n    var enc3;\n    var enc4;\n    var i = 0;\n    var _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=';\n\n    input = utf8_encode(input);\n\n    while (i < input.length) {\n\n      chr1 = input.charCodeAt(i++);\n      chr2 = input.charCodeAt(i++);\n      chr3 = input.charCodeAt(i++);\n\n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n\n      out.push(_keyStr.charAt(enc1), _keyStr.charAt(enc2));\n      if (enc3 !== 64)\n          out.push(_keyStr.charAt(enc3));\n      if (enc4 !== 64)\n          out.push(_keyStr.charAt(enc4));\n    }\n\n    return out.join('');\n  }\n\n  function utf8_encode(string) {\n    string = string.replace(/\\r\\n/g, '\\n');\n    var utftext = '';\n\n    for (var n = 0; n < string.length; n++) {\n\n      var c = string.charCodeAt(n);\n\n      if (c < 128) {\n        utftext += String.fromCharCode(c);\n      } else if ((c > 127) && (c < 2048)) {\n        utftext += String.fromCharCode((c >> 6) | 192);\n        utftext += String.fromCharCode((c & 63) | 128);\n      } else {\n        utftext += String.fromCharCode((c >> 12) | 224);\n        utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n        utftext += String.fromCharCode((c & 63) | 128);\n      }\n    }\n\n    return utftext;\n  }\n\n}\n\nmodule.exports = AdformAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adform.js","import bidmanager from 'src/bidmanager';\nimport bidfactory from 'src/bidfactory';\nimport * as utils from 'src/utils';\nimport {ajax} from 'src/ajax';\nimport Adapter from 'src/adapters/adapter';\n\n/**\n * Adapter for requesting bids from AdKernel white-label platform\n * @class\n */\nconst AdKernelAdapter = function AdKernelAdapter() {\n  const AJAX_REQ_PARAMS = {\n    contentType: 'text/plain',\n    withCredentials: true,\n    method: 'GET'\n  };\n  const EMPTY_BID_RESPONSE = {'seatbid': [{'bid': []}]};\n\n  let baseAdapter = Adapter.createNew('adkernel');\n\n  /**\n   * Helper object to build multiple bid requests in case of multiple zones/ad-networks\n   * @constructor\n   */\n  function RtbRequestDispatcher() {\n    const _dispatch = {};\n    const originalBids = {};\n    const site = createSite();\n    const syncedHostZones = {};\n\n    //translate adunit info into rtb impression dispatched by host/zone\n    this.addImp = function (bid) {\n      let host = bid.params.host;\n      let zone = bid.params.zoneId;\n      let size = bid.sizes[0];\n      let bidId = bid.bidId;\n\n      if (!(host in _dispatch)) {\n        _dispatch[host] = {};\n      }\n      /* istanbul ignore else  */\n      if (!(zone in _dispatch[host])) {\n        _dispatch[host][zone] = [];\n      }\n      let imp = {'id': bidId, 'banner': {'w': size[0], 'h': size[1]}};\n      if (utils.getTopWindowLocation().protocol === 'https:') {\n        imp.secure = 1;\n      }\n      //save rtb impression for specified ad-network host and zone\n      _dispatch[host][zone].push(imp);\n      originalBids[bidId] = bid;\n      //perform user-sync\n      if (!(host in syncedHostZones)){\n        syncedHostZones[host] = [];\n      }\n      if (syncedHostZones[host].indexOf(zone) === -1) {\n        syncedHostZones[host].push(zone);\n        insertUserSync(host, zone);\n      }\n    };\n\n    function insertUserSync(host, zone) {\n      var iframe = utils.createInvisibleIframe();\n      iframe.src = `//${host}/user-sync?zone=${zone}`;\n      try {\n        document.body.appendChild(iframe);\n      } catch (error) {\n        /* istanbul ignore next */\n        utils.logError(error);\n      }\n    }\n\n    /**\n     *  Main function to get bid requests\n     */\n    this.dispatch = function (callback) {\n      utils._each(_dispatch, (zones, host) => {\n        utils.logMessage(`processing network ${host}`);\n        utils._each(zones, (impressions, zone) => {\n          utils.logMessage(`processing zone ${zone}`);\n          dispatchRtbRequest(host, zone, impressions, callback);\n        });\n      });\n    };\n\n    function dispatchRtbRequest(host, zone, impressions, callback) {\n      let url = buildEndpointUrl(host);\n      let rtbRequest = buildRtbRequest(impressions);\n      let params = buildRequestParams(zone, rtbRequest);\n      ajax(url, (bidResp) => {\n        bidResp = bidResp === '' ? EMPTY_BID_RESPONSE : JSON.parse(bidResp);\n        utils._each(rtbRequest.imp, (imp) => {\n          let bidFound = false;\n          utils._each(bidResp.seatbid[0].bid, (bid) => {\n            /* istanbul ignore else */\n            if (!bidFound && bid.impid === imp.id) {\n              bidFound = true;\n              callback(originalBids[imp.id], imp, bid);\n            }\n          });\n          if (!bidFound) {\n            callback(originalBids[imp.id], imp);\n          }\n        });\n      }, params, AJAX_REQ_PARAMS);\n    }\n\n    /**\n     * Builds complete rtb bid request\n     * @param imps collection of impressions\n     */\n    function buildRtbRequest(imps) {\n      return {\n        'id': utils.getUniqueIdentifierStr(),\n        'imp': imps,\n        'site': site,\n        'at': 1,\n        'device': {\n          'ip': 'caller',\n          'ua': 'caller'\n        }\n      };\n    }\n\n    /**\n     * Build ad-network specific endpoint url\n     */\n    function buildEndpointUrl(host) {\n      return `${window.location.protocol}//${host}/rtbg`;\n    }\n\n    function buildRequestParams(zone, rtbReq) {\n      return {\n        'zone': encodeURIComponent(zone),\n        'ad_type': 'rtb',\n        'r': encodeURIComponent(JSON.stringify(rtbReq))\n      };\n    }\n  }\n\n  /**\n   *  Main module export function implementation\n   */\n  baseAdapter.callBids = function (params) {\n    var bids = params.bids || [];\n    processBids(bids);\n  };\n\n  /**\n   *  Process all bids grouped by network/zone\n   */\n  function processBids(bids) {\n    const dispatcher = new RtbRequestDispatcher();\n    //process individual bids\n    utils._each(bids, (bid) => {\n      if (!validateBidParams(bid.params)) {\n        utils.logError(`Incorrect configuration for adkernel bidder: ${bid.params}`);\n        bidmanager.addBidResponse(bid.placementCode, createEmptyBidObject(bid));\n      } else {\n        dispatcher.addImp(bid);\n      }\n    });\n    //process bids grouped into bidrequests\n    dispatcher.dispatch((bid, imp, bidResp) => {\n      let adUnitId = bid.placementCode;\n      if (bidResp) {\n        utils.logMessage(`got response for ${adUnitId}`);\n        bidmanager.addBidResponse(adUnitId, createBidObject(bidResp, bid, imp.banner.w, imp.banner.h));\n      } else {\n        utils.logMessage(`got empty response for ${adUnitId}`);\n        bidmanager.addBidResponse(adUnitId, createEmptyBidObject(bid));\n      }\n    });\n  }\n\n  /**\n   *  Create bid object for the bid manager\n   */\n  function createBidObject(resp, bid, width, height) {\n    return Object.assign(bidfactory.createBid(1, bid), {\n      bidderCode: bid.bidder,\n      ad: formatAdMarkup(resp),\n      width: width,\n      height: height,\n      cpm: parseFloat(resp.price)\n    });\n  }\n\n  /**\n   * Create empty bid object for the bid manager\n   */\n  function createEmptyBidObject(bid) {\n    return Object.assign(bidfactory.createBid(2, bid), {\n      bidderCode: bid.bidder\n    });\n  }\n\n  /**\n   *  Format creative with optional nurl call\n   */\n  function formatAdMarkup(bid) {\n    var adm = bid.adm;\n    if ('nurl' in bid) {\n      adm += utils.createTrackPixelHtml(`${bid.nurl}&px=1`);\n    }\n    return adm;\n  }\n\n  function validateBidParams(params) {\n    return typeof params.host !== 'undefined' && typeof params.zoneId !== 'undefined';\n  }\n\n  /**\n   * Creates site description object\n   */\n  function createSite() {\n    var location = utils.getTopWindowLocation();\n    return {\n      'domain': location.hostname\n    };\n  }\n\n  return {\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    getBidderCode : baseAdapter.getBidderCode,\n    createNew : AdKernelAdapter.createNew\n  };\n};\n\n/**\n * Creates new instance of AdKernel bidder adapter\n */\nAdKernelAdapter.createNew = function() {\n  return new AdKernelAdapter();\n};\n\nmodule.exports = AdKernelAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adkernel.js","import {parse as parseURL, format as formatURL} from './url';\n\nvar utils = require('./utils');\n\nconst XHR_DONE = 4;\n\n/**\n * Simple IE9+ and cross-browser ajax request function\n * Note: x-domain requests in IE9 do not support the use of cookies\n *\n * @param url string url\n * @param callback {object | function} callback\n * @param data mixed data\n * @param options object\n */\n\nexport function ajax(url, callback, data, options = {}) {\n  try {\n    let x;\n    let useXDomainRequest = false;\n    let method = options.method || (data ? 'POST' : 'GET');\n\n    let callbacks = typeof callback === \"object\" ? callback : {\n      success: function() {\n        utils.logMessage('xhr success');\n      },\n      error: function(e) {\n        utils.logError('xhr error', null, e);\n      }\n    };\n\n    if(typeof callback === \"function\") {\n      callbacks.success = callback;\n    }\n\n    if (!window.XMLHttpRequest) {\n      useXDomainRequest = true;\n    } else{\n      x = new window.XMLHttpRequest();\n      if (x.responseType === undefined) {\n        useXDomainRequest = true;\n      }\n    }\n\n    if (useXDomainRequest) {\n      x = new window.XDomainRequest();\n      x.onload = function () {\n        callbacks.success(x.responseText, x);\n      };\n\n      // http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n      x.onerror = function () {\n        callbacks.error(\"error\", x);\n      };\n      x.ontimeout = function () {\n        callbacks.error(\"timeout\", x);\n      };\n      x.onprogress = function() {\n        utils.logMessage('xhr onprogress');\n      };\n    } else {\n      x.onreadystatechange = function () {\n        if (x.readyState === XHR_DONE) {\n          let status = x.status;\n          if(status >= 200 && status < 300 || status === 304) {\n            callbacks.success(x.responseText, x);\n          } else {\n            callbacks.error(x.statusText, x);\n          }\n        }\n      };\n    }\n\n    if (method === 'GET' && data) {\n      let urlInfo = parseURL(url);\n      Object.assign(urlInfo.search, data);\n      url = formatURL(urlInfo);\n    }\n\n    x.open(method, url);\n\n    if (!useXDomainRequest) {\n      if (options.withCredentials) {\n        x.withCredentials = true;\n      }\n      if (options.preflight) {\n        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n      x.setRequestHeader('Content-Type', options.contentType || 'text/plain');\n    }\n    x.send(method === 'POST' && data);\n  } catch (error) {\n    utils.logError('xhr construction', error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","export function parseQS(query) {\n  return !query ? {} : query\n    .replace(/^\\?/, '')\n    .split('&')\n    .reduce((acc, criteria) => {\n      let [k, v] = criteria.split('=');\n      if (/\\[\\]$/.test(k)) {\n        k = k.replace('[]', '');\n        acc[k] = acc[k] || [];\n        acc[k].push(v);\n      } else {\n        acc[k] = v || '';\n      }\n      return acc;\n    }, {});\n}\n\nexport function formatQS(query) {\n  return Object\n    .keys(query)\n    .map(k => Array.isArray(query[k]) ?\n      query[k].map(v => `${k}[]=${v}`).join('&') :\n      `${k}=${query[k]}`)\n    .join('&');\n}\n\nexport function parse(url) {\n  let parsed = document.createElement('a');\n  parsed.href = decodeURIComponent(url);\n  return {\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/,'/'),\n    search: parseQS(parsed.search || ''),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: parsed.host\n  };\n}\n\nexport function format(obj) {\n  return (obj.protocol || 'http') + '://' +\n         (obj.host ||\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\n         (obj.pathname || '') +\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\n         (obj.hash ? `#${obj.hash}` : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","import { getBidRequest } from '../utils.js';\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\nvar utils = require('../utils.js');\nvar CONSTANTS = require('../constants.json');\n\n/**\n * Adapter for requesting bids from AdMedia.\n *\n */\nvar AdmediaAdapter = function AdmediaAdapter() {\n\n  function _callBids(params){\n    var bids, bidderUrl = (window.location.protocol) + \"//b.admedia.com/banner/prebid/bidder/?\";\n    bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      var request_obj = {};\n      var bid = bids[i];\n\n      if (bid.params.aid) {\n        request_obj.aid = bid.params.aid;\n      }\n      else{\n        utils.logError('required param aid is missing', \"admedia\");\n        continue;\n      }\n\n      //optional page_url macro\n      if (bid.params.page_url) {\n        request_obj.page_url = bid.params.page_url;\n      }\n\n      //if set, return a test ad for all aids\n      if (bid.params.test_ad === 1) {\n        request_obj.test_ad = 1;\n      }\n\n      var parsedSizes = utils.parseSizesInput(bid.sizes);\n      var parsedSizesLength = parsedSizes.length;\n      if (parsedSizesLength > 0) {\n        //first value should be \"size\"\n        request_obj.size = parsedSizes[0];\n        if (parsedSizesLength > 1) {\n          //any subsequent values should be \"promo_sizes\"\n          var promo_sizes = [];\n          for (var j = 1; j < parsedSizesLength; j++) {\n            promo_sizes.push(parsedSizes[j]);\n          }\n\n          request_obj.promo_sizes = promo_sizes.join(\",\");\n\n        }\n      }\n\n      //detect urls\n      request_obj.siteDomain = window.location.host;\n      request_obj.sitePage = window.location.href;\n      request_obj.siteRef = document.referrer;\n      request_obj.topUrl = utils.getTopWindowUrl();\n\n      request_obj.callbackId = bid.bidId;\n\n      var endpoint = bidderUrl+utils.parseQueryStringParameters(request_obj);\n\n      //utils.logMessage('Admedia request built: ' + endpoint);\n\n      adloader.loadScript(endpoint);\n    }\n  }\n\n  //expose the callback to global object\n  pbjs.admediaHandler = function(response){\n    var bidObject = {};\n    var callback_id = response.callback_id;\n    var placementCode = '';\n    var bidObj = getBidRequest(callback_id);\n    if (bidObj) {\n      placementCode = bidObj.placementCode;\n    }\n\n    if(bidObj && response.cpm>0 && !!response.ad){\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.GOOD);\n      bidObject.bidderCode = bidObj.bidder;\n      bidObject.cpm = parseFloat(response.cpm);\n      bidObject.ad = response.ad;\n      bidObject.width = response.width;\n      bidObject.height = response.height;\n    }\n    else{\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n      bidObject.bidderCode = bidObj.bidder;\n      utils.logMessage('No prebid response from Admedia for placement code ' + placementCode);\n    }\n\n    bidmanager.addBidResponse(placementCode, bidObject);\n\n  };\n\n\n  // Export the callBids function, so that prebid.js can execute this function\n  // when the page asks to send out bid requests.\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = AdmediaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/admedia.js","const bidmanager = require('../bidmanager.js');\r\nconst bidfactory = require('../bidfactory.js');\r\nconst utils = require('../utils.js');\r\nconst adloader = require('../adloader');\r\n\r\nvar BidfluenceAdapter = function BidfluenceAdapter() {\r\n\r\n  const scriptUrl = \"//bidfluence.azureedge.net/forge.js\";\r\n\r\n  pbjs.bfPbjsCB = function (bfr) {\r\n    var bidRequest = utils.getBidRequest(bfr.cbID);\r\n    var bidObject = null;\r\n    if (bfr.cpm > 0) {\r\n      bidObject = bidfactory.createBid(1, bidRequest);\r\n      bidObject.bidderCode = 'bidfluence';\r\n      bidObject.cpm = bfr.cpm;\r\n      bidObject.ad = bfr.ad;\r\n      bidObject.width = bfr.width;\r\n      bidObject.height = bfr.height;\r\n    } else {\r\n      bidObject = bidfactory.createBid(2, bidRequest);\r\n      bidObject.bidderCode = 'bidfluence';\r\n    }\r\n\r\n    bidmanager.addBidResponse(bfr.placementCode, bidObject);\r\n  };\r\n\r\n  function _callBids(params) {\r\n    var bfbids = params.bids || [];\r\n    for (var i = 0; i < bfbids.length; i++) {\r\n      var bid = bfbids[i];\r\n      call(bid);\r\n    }\r\n  }\r\n  function call(bid) {\r\n\r\n    var adunitId = utils.getBidIdParameter('adunitId', bid.params);\r\n    var publisherId = utils.getBidIdParameter('pubId', bid.params);\r\n    var reservePrice = utils.getBidIdParameter('reservePrice', bid.params);\r\n    var pbjsBfobj = {\r\n      placementCode: bid.placementCode,\r\n      cbID: bid.bidId\r\n    }; \r\n\r\n    var cb = function () {\r\n      /* globals FORGE */\r\n      FORGE.init([adunitId, publisherId, pbjsBfobj, reservePrice]);\r\n    };\r\n\r\n    adloader.loadScript(scriptUrl, cb);\r\n  }\r\n  return {\r\n    callBids: _callBids\r\n  };\r\n};\r\n\r\nmodule.exports = BidfluenceAdapter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/bidfluence.js","import Adapter from 'src/adapters/adapter';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\nimport { STATUS } from 'src/constants';\n\nconst ENDPOINT = '//rtb.vertamedia.com/hb/';\n\nfunction VertamediaAdapter() {\n  var baseAdapter = Adapter.createNew('vertamedia'),\n      bidRequest;\n\n  baseAdapter.callBids = function (bidRequests) {\n    if (!bidRequests || !bidRequests.bids || bidRequests.bids.length === 0) {\n      return;\n    }\n\n    var RTBDataParams = prepareAndSaveRTBRequestParams(bidRequests.bids[0]);\n\n    if (!RTBDataParams) {\n      return;\n    }\n\n    ajax(ENDPOINT, handleResponse, RTBDataParams, {\n      contentType: 'text/plain',\n      withCredentials: true,\n      method: 'GET'\n    });\n  };\n\n  function prepareAndSaveRTBRequestParams(bid) {\n    if (!bid || !bid.params || !bid.params.aid || !bid.placementCode) {\n      return;\n    }\n\n    bidRequest = bid;\n\n    let size = getSize(bid.sizes);\n\n    bidRequest.width = size.width;\n    bidRequest.height = size.height;\n\n    return {\n      aid: bid.params.aid,\n      w: size.width,\n      h: size.height,\n      domain: document.location.hostname\n    };\n  }\n\n  function getSize(requestSizes) {\n    var parsed = {},\n        size = utils.parseSizesInput(requestSizes)[0];\n\n    if (typeof size !== 'string') {\n      return parsed;\n    }\n\n    let parsedSize = size.toUpperCase().split('X');\n\n    return {\n      width: parseInt(parsedSize[0], 10) || undefined,\n      height: parseInt(parsedSize[1], 10) || undefined\n    };\n  }\n\n  /* Notify Prebid of bid responses so bids can get in the auction */\n  function handleResponse(response) {\n    var parsed;\n\n    try {\n      parsed = JSON.parse(response);\n    } catch (error) {\n      utils.logError(error);\n    }\n\n    if (!parsed || parsed.error || !parsed.bids || !parsed.bids.length) {\n      bidmanager.addBidResponse(bidRequest.placementCode, createBid(STATUS.NO_BID));\n\n      return;\n    }\n\n    bidmanager.addBidResponse(bidRequest.placementCode, createBid(STATUS.GOOD, parsed.bids[0]));\n  }\n\n  function createBid(status, tag) {\n    var bid = bidfactory.createBid(status, tag);\n\n    bid.code = baseAdapter.getBidderCode();\n    bid.bidderCode = bidRequest.bidder;\n\n    if (!tag || status !== STATUS.GOOD) {\n      return bid;\n    }\n\n    bid.mediaType = 'video';\n    bid.cpm = tag.cpm;\n    bid.creative_id = tag.cmpId;\n    bid.width = bidRequest.width;\n    bid.height = bidRequest.height;\n    bid.descriptionUrl = tag.url;\n    bid.vastUrl = tag.url;\n\n    return bid;\n  }\n\n  return {\n    createNew: VertamediaAdapter.createNew,\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode\n  };\n\n}\n\nVertamediaAdapter.createNew = function () {\n  return new VertamediaAdapter();\n};\n\nmodule.exports = VertamediaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/vertamedia.js","const utils = require('../utils.js');\nconst ajax = require('../ajax.js').ajax;\nconst bidfactory = require('../bidfactory.js');\nconst bidmanager = require('../bidmanager.js');\n\nconst AolAdapter = function AolAdapter() {\n\n  let showCpmAdjustmentWarning = true;\n  const pubapiTemplate = template`${'protocol'}://${'host'}/pubapi/3.0/${'network'}/${'placement'}/${'pageid'}/${'sizeid'}/ADTECH;v=2;cmd=bid;cors=yes;alias=${'alias'}${'bidfloor'};misc=${'misc'}`;\n  const BIDDER_CODE = 'aol';\n  const SERVER_MAP = {\n    us: 'adserver-us.adtech.advertising.com',\n    eu: 'adserver-eu.adtech.advertising.com',\n    as: 'adserver-as.adtech.advertising.com'\n  };\n\n  function template(strings, ...keys) {\n    return function(...values) {\n      let dict = values[values.length - 1] || {};\n      let result = [strings[0]];\n      keys.forEach(function(key, i) {\n        let value = Number.isInteger(key) ? values[key] : dict[key];\n        result.push(value, strings[i + 1]);\n      });\n      return result.join('');\n    };\n  }\n\n  function _buildPubapiUrl(bid) {\n    const params = bid.params;\n    const serverParam = params.server;\n    let regionParam = params.region || 'us';\n    let server;\n\n    if (!SERVER_MAP.hasOwnProperty(regionParam)) {\n      utils.logWarn(`Unknown region '${regionParam}' for AOL bidder.`);\n      regionParam = 'us'; // Default region.\n    }\n\n    if (serverParam) {\n      server = serverParam;\n    } else {\n      server = SERVER_MAP[regionParam];\n    }\n\n    // Set region param, used by AOL analytics.\n    params.region = regionParam;\n\n    return pubapiTemplate({\n      protocol: (document.location.protocol === 'https:') ? 'https' : 'http',\n      host: server,\n      network: params.network,\n      placement: parseInt(params.placement),\n      pageid: params.pageId || 0,\n      sizeid: params.sizeId || 0,\n      alias: params.alias || utils.getUniqueIdentifierStr(),\n      bidfloor: (typeof params.bidFloor !== 'undefined') ?\n        `;bidfloor=${params.bidFloor.toString()}` : '',\n      misc: new Date().getTime() // cache busting\n    });\n  }\n\n  function _addErrorBidResponse(bid, response = {}) {\n    const bidResponse = bidfactory.createBid(2, bid);\n    bidResponse.bidderCode = BIDDER_CODE;\n    bidResponse.reason = response.nbr;\n    bidResponse.raw = response;\n    bidmanager.addBidResponse(bid.placementCode, bidResponse);\n  }\n\n  function _addBidResponse(bid, response) {\n    let bidData;\n\n    try {\n      bidData = response.seatbid[0].bid[0];\n    } catch (e) {\n      _addErrorBidResponse(bid, response);\n      return;\n    }\n\n    let cpm;\n\n    if (bidData.ext && bidData.ext.encp) {\n      cpm = bidData.ext.encp;\n    } else {\n      cpm = bidData.price;\n\n      if (cpm === null || isNaN(cpm)) {\n        utils.logError('Invalid price in bid response', BIDDER_CODE, bid);\n        _addErrorBidResponse(bid, response);\n        return;\n      }\n    }\n\n    let ad = bidData.adm;\n    if (response.ext && response.ext.pixels) {\n      ad += response.ext.pixels;\n    }\n\n    const bidResponse = bidfactory.createBid(1, bid);\n    bidResponse.bidderCode = BIDDER_CODE;\n    bidResponse.ad = ad;\n    bidResponse.cpm = cpm;\n    bidResponse.width = bidData.w;\n    bidResponse.height = bidData.h;\n    bidResponse.creativeId = bidData.crid;\n    bidResponse.pubapiId = response.id;\n    bidResponse.currencyCode = response.cur;\n    if (bidData.dealid) {\n      bidResponse.dealId = bidData.dealid;\n    }\n\n    bidmanager.addBidResponse(bid.placementCode, bidResponse);\n  }\n\n  function _callBids(params) {\n    utils._each(params.bids, bid => {\n      const pubapiUrl = _buildPubapiUrl(bid);\n\n      ajax(pubapiUrl, response => {\n        // needs to be here in case bidderSettings are defined after requestBids() is called\n        if (showCpmAdjustmentWarning &&\n          pbjs.bidderSettings && pbjs.bidderSettings.aol &&\n          typeof pbjs.bidderSettings.aol.bidCpmAdjustment === 'function'\n        ) {\n          utils.logWarn(\n            'bidCpmAdjustment is active for the AOL adapter. ' +\n            'As of Prebid 0.14, AOL can bid in net  please contact your accounts team to enable.'\n          );\n        }\n        showCpmAdjustmentWarning = false; // warning is shown at most once\n\n        if (!response && response.length <= 0) {\n          utils.logError('Empty bid response', BIDDER_CODE, bid);\n          _addErrorBidResponse(bid, response);\n          return;\n        }\n\n        try {\n          response = JSON.parse(response);\n        } catch (e) {\n          utils.logError('Invalid JSON in bid response', BIDDER_CODE, bid);\n          _addErrorBidResponse(bid, response);\n          return;\n        }\n\n        _addBidResponse(bid, response);\n\n      }, null, { withCredentials: true });\n    });\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = AolAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/aol.js","import { getBidRequest } from '../utils.js';\n\nvar CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\nvar Adapter = require('./adapter.js');\n\nvar AppNexusAdapter;\nAppNexusAdapter = function AppNexusAdapter() {\n  var baseAdapter = Adapter.createNew('appnexus');\n  var usersync = false;\n\n  baseAdapter.callBids = function (params) {\n    //var bidCode = baseAdapter.getBidderCode();\n\n    var anArr = params.bids;\n\n    //var bidsCount = anArr.length;\n\n    //set expected bids count for callback execution\n    //bidmanager.setExpectedBidsCount(bidCode, bidsCount);\n\n    for (var i = 0; i < anArr.length; i++) {\n      var bidRequest = anArr[i];\n      var callbackId = bidRequest.bidId;\n      adloader.loadScript(buildJPTCall(bidRequest, callbackId));\n\n      //store a reference to the bidRequest from the callback id\n      //bidmanager.pbCallbackMap[callbackId] = bidRequest;\n    }\n  };\n\n  function buildJPTCall(bid, callbackId) {\n\n    //determine tag params\n    var placementId = utils.getBidIdParameter('placementId', bid.params);\n\n    //memberId will be deprecated, use member instead\n    var memberId = utils.getBidIdParameter('memberId', bid.params);\n    var member = utils.getBidIdParameter('member', bid.params);\n    var inventoryCode = utils.getBidIdParameter('invCode', bid.params);\n    var query = utils.getBidIdParameter('query', bid.params);\n    var referrer = utils.getBidIdParameter('referrer', bid.params);\n    var altReferrer = utils.getBidIdParameter('alt_referrer', bid.params);\n\n    //build our base tag, based on if we are http or https\n\n    var jptCall = 'http' + (document.location.protocol === 'https:' ? 's://secure.adnxs.com/jpt?' : '://ib.adnxs.com/jpt?');\n\n    jptCall = utils.tryAppendQueryString(jptCall, 'callback', 'pbjs.handleAnCB');\n    jptCall = utils.tryAppendQueryString(jptCall, 'callback_uid', callbackId);\n    jptCall = utils.tryAppendQueryString(jptCall, 'psa', '0');\n    jptCall = utils.tryAppendQueryString(jptCall, 'id', placementId);\n    if (member) {\n      jptCall = utils.tryAppendQueryString(jptCall, 'member', member);\n    } else if (memberId) {\n      jptCall = utils.tryAppendQueryString(jptCall, 'member', memberId);\n      utils.logMessage('appnexus.callBids: \"memberId\" will be deprecated soon. Please use \"member\" instead');\n    }\n\n    jptCall = utils.tryAppendQueryString(jptCall, 'code', inventoryCode);\n\n    //sizes takes a bit more logic\n    var sizeQueryString = '';\n    var parsedSizes = utils.parseSizesInput(bid.sizes);\n\n    //combine string into proper querystring for impbus\n    var parsedSizesLength = parsedSizes.length;\n    if (parsedSizesLength > 0) {\n      //first value should be \"size\"\n      sizeQueryString = 'size=' + parsedSizes[0];\n      if (parsedSizesLength > 1) {\n        //any subsequent values should be \"promo_sizes\"\n        sizeQueryString += '&promo_sizes=';\n        for (var j = 1; j < parsedSizesLength; j++) {\n          sizeQueryString += parsedSizes[j] += ',';\n        }\n\n        //remove trailing comma\n        if (sizeQueryString && sizeQueryString.charAt(sizeQueryString.length - 1) === ',') {\n          sizeQueryString = sizeQueryString.slice(0, sizeQueryString.length - 1);\n        }\n      }\n    }\n\n    if (sizeQueryString) {\n      jptCall += sizeQueryString + '&';\n    }\n\n    //this will be deprecated soon\n    var targetingParams = utils.parseQueryStringParameters(query);\n\n    if (targetingParams) {\n      //don't append a & here, we have already done it in parseQueryStringParameters\n      jptCall += targetingParams;\n    }\n\n    //append custom attributes:\n    var paramsCopy = Object.assign({}, bid.params);\n\n    //delete attributes already used\n    delete paramsCopy.placementId;\n    delete paramsCopy.memberId;\n    delete paramsCopy.invCode;\n    delete paramsCopy.query;\n    delete paramsCopy.referrer;\n    delete paramsCopy.alt_referrer;\n    delete paramsCopy.member;\n\n    //get the reminder\n    var queryParams = utils.parseQueryStringParameters(paramsCopy);\n\n    //append\n    if (queryParams) {\n      jptCall += queryParams;\n    }\n\n    //append referrer\n    if (referrer === '') {\n      referrer = utils.getTopWindowUrl();\n    }\n\n    jptCall = utils.tryAppendQueryString(jptCall, 'referrer', referrer);\n    jptCall = utils.tryAppendQueryString(jptCall, 'alt_referrer', altReferrer);\n\n    //remove the trailing \"&\"\n    if (jptCall.lastIndexOf('&') === jptCall.length - 1) {\n      jptCall = jptCall.substring(0, jptCall.length - 1);\n    }\n\n    // @if NODE_ENV='debug'\n    utils.logMessage('jpt request built: ' + jptCall);\n\n    // @endif\n\n    //append a timer here to track latency\n    bid.startTime = new Date().getTime();\n\n    return jptCall;\n\n  }\n\n  //expose the callback to the global object:\n  pbjs.handleAnCB = function (jptResponseObj) {\n\n    var bidCode;\n\n    if (jptResponseObj && jptResponseObj.callback_uid) {\n\n      var responseCPM;\n      var id = jptResponseObj.callback_uid;\n      var placementCode = '';\n      var bidObj = getBidRequest(id);\n      if (bidObj) {\n\n        bidCode = bidObj.bidder;\n\n        placementCode = bidObj.placementCode;\n\n        //set the status\n        bidObj.status = CONSTANTS.STATUS.GOOD;\n      }\n\n      // @if NODE_ENV='debug'\n      utils.logMessage('JSONP callback function called for ad ID: ' + id);\n\n      // @endif\n      var bid = [];\n      if (jptResponseObj.result && jptResponseObj.result.cpm && jptResponseObj.result.cpm !== 0) {\n        responseCPM = parseInt(jptResponseObj.result.cpm, 10);\n\n        //CPM response from /jpt is dollar/cent multiplied by 10000\n        //in order to avoid using floats\n        //switch CPM to \"dollar/cent\"\n        responseCPM = responseCPM / 10000;\n\n        //store bid response\n        //bid status is good (indicating 1)\n        var adId = jptResponseObj.result.creative_id;\n        bid = bidfactory.createBid(1, bidObj);\n        bid.creative_id = adId;\n        bid.bidderCode = bidCode;\n        bid.cpm = responseCPM;\n        bid.adUrl = jptResponseObj.result.ad;\n        bid.width = jptResponseObj.result.width;\n        bid.height = jptResponseObj.result.height;\n        bid.dealId = jptResponseObj.result.deal_id;\n\n        bidmanager.addBidResponse(placementCode, bid);\n\n      } else {\n        //no response data\n        // @if NODE_ENV='debug'\n        utils.logMessage('No prebid response from AppNexus for placement code ' + placementCode);\n\n        // @endif\n        //indicate that there is no bid for this placement\n        bid = bidfactory.createBid(2, bidObj);\n        bid.bidderCode = bidCode;\n        bidmanager.addBidResponse(placementCode, bid);\n      }\n\n      if (!usersync) {\n        var iframe = utils.createInvisibleIframe();\n        iframe.src = '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html';\n        try {\n          document.body.appendChild(iframe);\n        } catch (error) {\n          utils.logError(error);\n        }\n        usersync = true;\n      }\n\n\n    } else {\n      //no response data\n      // @if NODE_ENV='debug'\n      utils.logMessage('No prebid response for placement %%PLACEMENT%%');\n\n      // @endif\n\n    }\n\n  };\n\n  return {\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    createNew: AppNexusAdapter.createNew,\n    buildJPTCall: buildJPTCall\n  };\n};\n\nAppNexusAdapter.createNew = function () {\n  return new AppNexusAdapter();\n};\n\nmodule.exports = AppNexusAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/appnexus.js","import Adapter from 'src/adapters/adapter';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\nimport { STATUS } from 'src/constants';\n\nconst ENDPOINT = '//ib.adnxs.com/ut/v2/prebid';\nconst VIDEO_TARGETING = ['id', 'mimes', 'minduration', 'maxduration',\n  'startdelay', 'skippable', 'playback_method', 'frameworks'];\nconst USER_PARAMS = [\n  'age', 'external_uid', 'segments', 'gender', 'dnt', 'language'\n];\n\n/**\n * Bidder adapter for /ut endpoint. Given the list of all ad unit tag IDs,\n * sends out a bid request. When a bid response is back, registers the bid\n * to Prebid.js. This adapter supports alias bidding.\n */\nfunction AppnexusAstAdapter() {\n\n  let baseAdapter = Adapter.createNew('appnexusAst');\n  let bidRequests = {};\n  let usersync = false;\n\n  /* Prebid executes this function when the page asks to send out bid requests */\n  baseAdapter.callBids = function(bidRequest) {\n    const bids = bidRequest.bids || [];\n    var member = 0;\n    let userObj;\n    const tags = bids\n      .filter(bid => valid(bid))\n      .map(bid => {\n        // map request id to bid object to retrieve adUnit code in callback\n        bidRequests[bid.bidId] = bid;\n\n        let tag = {};\n        tag.sizes = getSizes(bid.sizes);\n        tag.primary_size = tag.sizes[0];\n        tag.uuid = bid.bidId;\n        if(bid.params.placementId) {\n          tag.id = parseInt(bid.params.placementId, 10);\n        } else {\n          tag.code = bid.params.invCode;\n        }\n        tag.allow_smaller_sizes = bid.params.allowSmallerSizes || false;\n        tag.prebid = true;\n        tag.disable_psa = true;\n        member = parseInt(bid.params.member, 10);\n        if (bid.params.reserve) {\n          tag.reserve = bid.params.reserve;\n        }\n        if (bid.params.position) {\n          tag.position = {'above': 1, 'below': 2}[bid.params.position] || 0;\n        }\n        if (bid.params.trafficSourceCode) {\n          tag.traffic_source_code = bid.params.trafficSourceCode;\n        }\n        if (bid.params.privateSizes) {\n          tag.private_sizes = getSizes(bid.params.privateSizes);\n        }\n        if (bid.params.supplyType) {\n          tag.supply_type = bid.params.supplyType;\n        }\n        if (bid.params.pubClick) {\n          tag.pubclick = bid.params.pubClick;\n        }\n        if (bid.params.extInvCode) {\n          tag.ext_inv_code = bid.params.extInvCode;\n        }\n        if (bid.params.externalImpId) {\n          tag.external_imp_id = bid.params.externalImpId;\n        }\n        if (!utils.isEmpty(bid.params.keywords)) {\n          tag.keywords = getKeywords(bid.params.keywords);\n        }\n\n        if (bid.mediaType === 'video') {tag.require_asset_url = true;}\n        if (bid.params.video) {\n          tag.video = {};\n          // place any valid video params on the tag\n          Object.keys(bid.params.video)\n            .filter(param => VIDEO_TARGETING.includes(param))\n            .forEach(param => tag.video[param] = bid.params.video[param]);\n        }\n\n        if (bid.params.user) {\n          userObj = {};\n          Object.keys(bid.params.user)\n            .filter(param => USER_PARAMS.includes(param))\n            .forEach(param => userObj[param] = bid.params.user[param]);\n        }\n\n        return tag;\n      });\n\n    if (!utils.isEmpty(tags)) {\n      const payloadJson = {tags: [...tags], user: userObj};\n      if (member > 0) {\n        payloadJson.member_id = member;\n      }\n      const payload = JSON.stringify(payloadJson);\n      ajax(ENDPOINT, handleResponse, payload, {\n        contentType: 'text/plain',\n        withCredentials : true\n      });\n    }\n  };\n\n  /* Notify Prebid of bid responses so bids can get in the auction */\n  function handleResponse(response) {\n    let parsed;\n\n    try {\n      parsed = JSON.parse(response);\n    } catch (error) {\n      utils.logError(error);\n    }\n\n    if (!parsed || parsed.error) {\n      let errorMessage = `in response for ${baseAdapter.getBidderCode()} adapter`;\n      if (parsed && parsed.error) {errorMessage += `: ${parsed.error}`;}\n      utils.logError(errorMessage);\n\n      // signal this response is complete\n      Object.keys(bidRequests)\n        .map(bidId => bidRequests[bidId].placementCode)\n        .forEach(placementCode => {\n          bidmanager.addBidResponse(placementCode, createBid(STATUS.NO_BID));\n        });\n      return;\n    }\n\n    parsed.tags.forEach(tag => {\n      const ad = getRtbBid(tag);\n      const cpm = ad && ad.cpm;\n      const type = ad && ad.ad_type;\n\n      let status;\n      if (cpm !== 0 && (type === 'banner' || type === 'video')) {\n        status = STATUS.GOOD;\n      } else {\n        status = STATUS.NO_BID;\n      }\n\n      if (type && (type !== 'banner' && type !== 'video')) {\n        utils.logError(`${type} ad type not supported`);\n      }\n\n      tag.bidId = tag.uuid;  // bidfactory looks for bidId on requested bid\n      const bid = createBid(status, tag);\n      if (type === 'video') bid.mediaType = 'video';\n      const placement = bidRequests[bid.adId].placementCode;\n      bidmanager.addBidResponse(placement, bid);\n    });\n\n    if (!usersync) {\n      const iframe = utils.createInvisibleIframe();\n      iframe.src = '//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html';\n      try {\n        document.body.appendChild(iframe);\n      } catch (error) {\n        utils.logError(error);\n      }\n      usersync = true;\n    }\n  }\n\n  /* Check that a bid has required paramters */\n  function valid(bid) {\n    if (bid.params.placementId || bid.params.member && bid.params.invCode) {\n      return bid;\n    } else {\n      utils.logError('bid requires placementId or (member and invCode) params');\n    }\n  }\n\n  /* Turn keywords parameter into ut-compatible format */\n  function getKeywords(keywords) {\n    let arrs = [];\n\n    utils._each(keywords, (v, k) => {\n      if (utils.isArray(v)) {\n        let values = [];\n        utils._each(v, (val) => {\n          val = utils.getValueString('keywords.' + k, val);\n          if (val) {values.push(val);}\n        });\n        v = values;\n      } else {\n        v = utils.getValueString('keywords.' + k, v);\n        if (utils.isStr(v)) {v = [v];}\n        else {return;} // unsuported types - don't send a key\n      }\n      arrs.push({key: k, value: v});\n    });\n\n    return arrs;\n  }\n\n  /* Turn bid request sizes into ut-compatible format */\n  function getSizes(requestSizes) {\n    let sizes = [];\n    let sizeObj = {};\n\n    if (utils.isArray(requestSizes) && requestSizes.length === 2 &&\n       !utils.isArray(requestSizes[0])) {\n      sizeObj.width = parseInt(requestSizes[0], 10);\n      sizeObj.height = parseInt(requestSizes[1], 10);\n      sizes.push(sizeObj);\n    } else if (typeof requestSizes === 'object') {\n      for (let i = 0; i < requestSizes.length; i++) {\n        let size = requestSizes[i];\n        sizeObj = {};\n        sizeObj.width = parseInt(size[0], 10);\n        sizeObj.height = parseInt(size[1], 10);\n        sizes.push(sizeObj);\n      }\n    }\n\n    return sizes;\n  }\n\n  function getRtbBid(tag) {\n    return tag && tag.ads && tag.ads.length && tag.ads.find(ad => ad.rtb);\n  }\n\n  /* Create and return a bid object based on status and tag */\n  function createBid(status, tag) {\n    const ad = getRtbBid(tag);\n    let bid = bidfactory.createBid(status, tag);\n    bid.code = baseAdapter.getBidderCode();\n    bid.bidderCode = baseAdapter.getBidderCode();\n\n    if (ad && status === STATUS.GOOD) {\n      bid.cpm = ad.cpm;\n      bid.creative_id = ad.creative_id;\n      bid.dealId = ad.deal_id;\n\n      if (ad.rtb.video) {\n        bid.width = ad.rtb.video.player_width;\n        bid.height = ad.rtb.video.player_height;\n        bid.vastUrl = ad.rtb.video.asset_url;\n        bid.descriptionUrl = ad.rtb.video.asset_url;\n      } else {\n        bid.width = ad.rtb.banner.width;\n        bid.height = ad.rtb.banner.height;\n        bid.ad = ad.rtb.banner.content;\n        try {\n          const url = ad.rtb.trackers[0].impression_urls[0];\n          const tracker = utils.createTrackPixelHtml(url);\n          bid.ad += tracker;\n        } catch (error) {\n          utils.logError('Error appending tracking pixel', error);\n        }\n      }\n    }\n\n    return bid;\n  }\n\n  return {\n    createNew: AppnexusAstAdapter.createNew,\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n  };\n\n}\n\nAppnexusAstAdapter.createNew = function() {\n  return new AppnexusAstAdapter();\n};\n\nmodule.exports = AppnexusAstAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/appnexusAst.js","/**\n * @file Audience Network <==> prebid.js adaptor\n */\n\n\nlet events = require('../events');\nlet bidmanager = require('../bidmanager');\nlet bidfactory = require('../bidfactory');\nlet utils = require('../utils');\nlet CONSTANTS = require('../constants.json');\n\nlet AudienceNetworkAdapter = function AudienceNetworkAdapter() {\n  \"use strict\";\n\n  /**\n   * Request the specified bids from Audience Network\n   * @param {Object} params the bidder-level params (from prebid)\n   * @param {Array} params.bids the bids requested\n   */\n  function _callBids(params) {\n\n    if (!params.bids && params.bids[0]) {\n      // no bids requested\n      return;\n    }\n\n    let getPlacementSize = function(bid, warn = false){\n      let adWidth = 0, adHeight = 0;\n      let sizes = bid.sizes || {};\n\n      if (sizes.length === 2 &&\n          typeof sizes[0] === 'number' &&\n          typeof sizes[1] === 'number') {\n        // The array contains 1 size (the items are the values)\n        adWidth = sizes[0];\n        adHeight = sizes[1];\n      } else if (sizes.length >= 1) {\n        // The array contains array of sizes, use the first size\n        adWidth = sizes[0][0];\n        adHeight = sizes[0][1];\n\n        if (warn && sizes.length > 1) {\n          utils.logInfo(\n            `AudienceNetworkAdapter supports only one size per ` +\n            `impression, but ${sizes.length} sizes passed for ` +\n            `placementId ${bid.params.placementId}. Using first only.`\n          );\n        }\n      }\n      return {height: adHeight, width: adWidth};\n    };\n\n    let getPlacementWebAdFormat = function(bid) {\n      if (bid.params.native) {\n        return 'native';\n      }\n      if (bid.params.fullwidth) {\n        return 'fullwidth';\n      }\n\n      let size = getPlacementSize(bid);\n      if (\n        (size.width === 320 && size.height === 50) ||\n        (size.width === 300 && size.height === 250) ||\n        (size.width === 728 && size.height === 90)\n      ) {\n        return `${size.width}x${size.height}`;\n      }\n    };\n\n    let getTagVersion = function() {\n      const tagVersion = params.bids[0].params.tagVersion;\n      if (Array.isArray(tagVersion)) {\n        return tagVersion[Math.floor(Math.random() * tagVersion.length)];\n      }\n      return tagVersion || '5.5.web';\n    }\n\n    const tagVersion = getTagVersion();\n    let url = `https://an.facebook.com/v2/placementbid.json?sdk=${tagVersion}&`;\n\n    let wwwExperimentChance = Number(params.bids[0].params.wwwExperiment);\n    if (\n      wwwExperimentChance > 0 &&\n      wwwExperimentChance <= 100 &&\n      Math.floor(Math.random() * wwwExperimentChance) === 0\n    ) {\n      url = url.replace('an.facebook.com', 'www.facebook.com/an');\n    }\n\n    let adPlacementIdToBidMap = new Map();\n    for (let pbjsBidReq of params.bids) {\n      if (adPlacementIdToBidMap[pbjsBidReq.params.placementId] === undefined) {\n        adPlacementIdToBidMap[pbjsBidReq.params.placementId] = [];\n      }\n      adPlacementIdToBidMap[pbjsBidReq.params.placementId].push(pbjsBidReq);\n\n      url +=\n        `placementids[]=${encodeURIComponent(pbjsBidReq.params.placementId)}&` +\n        `adformats[]=${encodeURIComponent(getPlacementWebAdFormat(pbjsBidReq))}&`;\n    }\n    if (params.bids[0].params.testMode) {\n      url += 'testmode=true&';\n    }\n\n    let http = new HttpClient();\n    const requestTimeMS = new Date().getTime();\n    http.get(url, function(response) {\n      const placementIDArr = [];\n      const anBidRequestId = response.request_id;\n      for (let placementId in adPlacementIdToBidMap) {\n        let anBidArr = response.bids[placementId];\n        let anBidReqArr = adPlacementIdToBidMap[placementId];\n        for (let idx = 0; idx < anBidReqArr.length; idx++) {\n          let pbjsBid = anBidReqArr[idx];\n\n          if (anBidArr === null || anBidArr === undefined ||\n            anBidArr[idx] === null || anBidArr[idx] === undefined) {\n            let noResponseBidObject = bidfactory.createBid(2);\n            noResponseBidObject.bidderCode = params.bidderCode;\n            bidmanager.addBidResponse(pbjsBid.placementCode, noResponseBidObject);\n            continue;\n          }\n\n          let anBid = anBidArr[idx];\n          let bidObject = bidfactory.createBid(1);\n          bidObject.bidderCode = params.bidderCode;\n          bidObject.cpm = anBid.bid_price_cents / 100;\n          let size = getPlacementSize(pbjsBid);\n          bidObject.width = size.width;\n          bidObject.height = size.height;\n          bidObject.fbBidId = anBid.bid_id;\n          bidObject.fbPlacementId = placementId;\n          placementIDArr.push(placementId);\n          const format = getPlacementWebAdFormat(pbjsBid);\n          bidObject.fbFormat = format;\n          bidObject.ad = getTag(tagVersion, placementId, anBid.bid_id, format);\n          bidmanager.addBidResponse(pbjsBid.placementCode, bidObject);\n        }\n      }\n\n      const responseTimeMS = new Date().getTime();\n      const bidLatencyMS = responseTimeMS - requestTimeMS;\n      const latencySincePageLoad = responseTimeMS - performance.timing.navigationStart;\n      const existingEvents = events.getEvents();\n      const timeout = existingEvents.some(\n        event => event.args &&\n          event.eventType === CONSTANTS.EVENTS.BID_TIMEOUT &&\n          event.args.bidderCode === params.bidderCode);\n\n      let latencyUrl = 'https://an.facebook.com/placementbidlatency.json?';\n      latencyUrl += 'bid_request_id=' + anBidRequestId;\n      latencyUrl += '&latency_ms=' + bidLatencyMS.toString();\n      latencyUrl += '&bid_returned_time_since_page_load_ms=' + latencySincePageLoad.toString();\n      latencyUrl += '&timeout=' + timeout.toString();\n      for (const placement_id of placementIDArr) {\n        latencyUrl += '&placement_ids[]=' + placement_id;\n      }\n\n      let httpRequest = new XMLHttpRequest();\n      httpRequest.open('GET', latencyUrl, true);\n      httpRequest.withCredentials = true;\n      httpRequest.send(null);\n    });\n  }\n\n  let HttpClient = function() {\n    this.get = function(aUrl, aCallback) {\n      let anHttpRequest = new XMLHttpRequest();\n      anHttpRequest.onreadystatechange = function() {\n        if (anHttpRequest.readyState === 4 && anHttpRequest.status === 200) {\n          let resp = JSON.parse(anHttpRequest.responseText);\n          utils.logInfo(`ANAdapter: ${aUrl} ==> ${JSON.stringify(resp)}`);\n          aCallback(resp);\n        }\n      };\n\n      anHttpRequest.open( \"GET\", aUrl, true );\n      anHttpRequest.withCredentials = true;\n      anHttpRequest.send( null );\n    };\n  };\n\n  let getTag = function(tagVersion, placementId, bidId, format) {\n    const script = `(function(a,b,c){var d='https://www.facebook.com',e='https://connect.facebook.net/en_US/fbadnw55.js',f={iframeLoaded:true,xhrLoaded:true},g=5,h=a.data,i=0,j=function(ea){if(ea==null)throw new Error();return ea;},k=function(ea){if(ea instanceof HTMLElement)return ea;throw new Error();},l=function(){if(Date.now){return Date.now();}else return +new Date();},m=function(ea){if(++i>g)return;var fa=d+'/audience_network/client_event',ga={cb:l(),event_name:'ADNW_ADERROR',ad_pivot_type:'audience_network_mobile_web',sdk_version:'5.5.web',app_id:h.placementid.split('_')[0],publisher_id:h.placementid.split('_')[1],error_message:ea},ha=[];for(var ia in ga)ha.push(encodeURIComponent(ia)+'='+encodeURIComponent(ga[ia]));var ja=fa+'?'+ha.join('&'),ka=new XMLHttpRequest();ka.open('GET',ja,true);ka.send();},n=function(){if(b.currentScript){return b.currentScript;}else{var ea=b.getElementsByTagName('script');return ea[ea.length-1];}},o=function(ea){try{return ea.document.referrer;}catch(fa){}return '';},p=function(){var ea=a;try{while(ea!=ea.parent){ea.parent.origin;ea=ea.parent;}}catch(fa){}return ea;},q=function(ea){var fa=ea.indexOf('/',ea.indexOf('://')+3);if(fa===-1)return ea;return ea.substring(0,fa);},r=function(ea){return ea.location.href||o(ea);},s=function(ea,fa){if(ea.sdkLoaded)return;var ga=fa.createElement('iframe');ga.name='fbadnw';ga.style.display='none';j(fa.body).appendChild(ga);ga.contentWindow.addEventListener('error',function(event){m(event.message);},false);var ha=ga.contentDocument.createElement('script');ha.src=e;ha.async=true;j(ga.contentDocument.body).appendChild(ha);ea.sdkLoaded=true;},t=function(ea){var fa=/^https?:\\\\/\\\\/www\\\\.google(\\\\.com?)?.\\\\w{2,3}$/;return !!ea.match(fa);},u=function(ea){return ea.endsWith('cdn.ampproject.org');},v=function(){var ea=c.ancestorOrigins||[],fa=ea[ea.length-1]||c.origin,ga=ea[ea.length-2]||c.origin;if(t(fa)&&u(ga)){return q(ga);}else return q(fa);},w=function(ea){try{return JSON.parse(ea);}catch(fa){m(fa.message);return null;}},x=function(ea,fa,ga){if(!ea.iframe){var ha=ga.createElement('iframe');ha.src=d+'/audiencenetwork/iframe/';ha.style.display='none';j(ga.body).appendChild(ha);ea.iframe=ha;ea.iframeAppendedTime=l();ea.iframeData={};}fa.iframe=j(ea.iframe);fa.iframeData=ea.iframeData;fa.tagJsIframeAppendedTime=ea.iframeAppendedTime||0;},y=function(ea){var fa=d+'/audiencenetwork/xhr/?sdk=5.5.web';for(var ga in ea)if(typeof ea[ga]!=='function')fa+='&'+ga+'='+encodeURIComponent(ea[ga]);var ha=new XMLHttpRequest();ha.open('GET',fa,true);ha.withCredentials=true;ha.onreadystatechange=function(){if(ha.readyState===4){var ia=w(ha.response);if(ia)ea.events.push({name:'xhrLoaded',source:ea.iframe.contentWindow,data:ia,postMessageTimestamp:l(),receivedTimestamp:l()});}};ha.send();},z=function(ea,fa){var ga=d+'/audiencenetwork/xhriframe/?sdk=5.5.web';for(var ha in fa)if(typeof fa[ha]!=='function')ga+='&'+ha+'='+encodeURIComponent(fa[ha]);var ia=b.createElement('iframe');ia.src=ga;ia.style.display='none';j(b.body).appendChild(ia);fa.iframe=ia;fa.iframeData={};fa.tagJsIframeAppendedTime=l();},aa=function(ea){var fa=function(event){try{var ia=event.data;if(ia.name in f)ea.events.push({name:ia.name,source:event.source,data:ia.data});}catch(ha){}},ga=j(ea.iframe).contentWindow.parent;ga.addEventListener('message',fa,false);},ba=function(ea){if(ea.context)return true;try{return !!JSON.parse(decodeURI(ea.name)).ampcontextVersion;}catch(fa){return false;}},ca=function(ea){var fa=l(),ga=p(),ha=k(n().parentElement),ia=ga!=a.top,ja=ga.$sf&&ga.$sf.ext,ka=r(ga);ga.ADNW=ga.ADNW||{};ga.ADNW.v55=ga.ADNW.v55||{ads:[]};var la=ga.ADNW.v55;s(la,ga.document);var ma={amp:ba(ga),events:[],tagJsInitTime:fa,rootElement:ha,iframe:null,tagJsIframeAppendedTime:la.iframeAppendedTime||0,url:ka,domain:v(),channel:q(r(ga)),width:screen.width,height:screen.height,pixelratio:a.devicePixelRatio,placementindex:la.ads.length,crossdomain:ia,safeframe:!!ja,placementid:h.placementid,format:h.format||'300x250',testmode:!!h.testmode,onAdLoaded:h.onAdLoaded,onAdError:h.onAdError};if(h.bidid)ma.bidid=h.bidid;if(ia){z(la,ma);}else{x(la,ma,ga.document);y(ma);}aa(ma);ma.rootElement.dataset.placementid=ma.placementid;la.ads.push(ma);};try{ca();}catch(da){m(da.message||da);throw da;}})(window,document,location);`;\n\n    switch (tagVersion) {\n      case '5.5.web':\n        if (format === 'native') {\n          return `\n            <html>\n              <head>\n                <script type=\"text/javascript\">\n                  window.onload = function() {\n                      if (parent) {\n                          var oHead = document.getElementsByTagName(\"head\")[0];\n                          var arrStyleSheets = parent.document.getElementsByTagName(\"style\");\n                          for (var i = 0; i < arrStyleSheets.length; i++)\n                              oHead.appendChild(arrStyleSheets[i].cloneNode(true));\n                      }\n                  }\n                </script>\n              </head>\n              <body>\n                <div style=\"display:none; position: relative;\">\n                  <script type=\"text/javascript\">\n                    var data = {\n                      placementid: '${placementId}',\n                      bidid: '${bidId}',\n                      format: '${format}',\n                      testmode: false,\n                      onAdLoaded: function(element) {\n                        console.log('Audience Network [${placementId}] ad loaded');\n                        element.style.display = 'block';\n                      },\n                      onAdError: function(errorCode, errorMessage) {\n                        console.log('Audience Network [${placementId}] error (' + errorCode + ') ' + errorMessage);\n                      }\n                    };\n                    ${script}\n                  </script>\n                  <div class=\"thirdPartyRoot\">\n                    <a class=\"fbAdLink\">\n                      <div class=\"fbAdMedia thirdPartyMediaClass\"></div>\n                      <div class=\"fbAdSubtitle thirdPartySubtitleClass\"></div>\n                      <div class=\"fbDefaultNativeAdWrapper\">\n                        <div class=\"fbAdCallToAction thirdPartyCallToActionClass\"></div>\n                        <div class=\"fbAdTitle thirdPartyTitleClass\"></div>\n                      </div>\n                    </a>\n                  </div>\n                </div>\n              </body>\n            </html>`;\n        }\n        return `\n          <div style=\"display:none; position: relative;\">\n            <script type=\"text/javascript\">\n              var data = {\n                placementid: '${placementId}',\n                bidid: '${bidId}',\n                format: '${format}',\n                testmode: false,\n                onAdLoaded: function(element) {\n                  console.log('Audience Network [${placementId}] ad loaded');\n                  element.style.display = 'block';\n                },\n                onAdError: function(errorCode, errorMessage) {\n                  console.log('Audience Network [${placementId}] error (' + errorCode + ') ' + errorMessage);\n                  // PASSBACK goes here\n                }\n              };\n            </script>\n            <script>\n              ${script}\n            </script>\n          </div>`;\n\n      default:\n        throw new Exception ('Unsupported tag version ' + tagVersion);\n    }\n  }\n\n  // Export the callBids function, so that prebid.js can execute this function\n  // when the page asks to send out anBid requests.\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = AudienceNetworkAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/audienceNetwork.js","'use strict';\nvar VERSION = '2.0.1',\n    CONSTANTS = require('../constants.json'),\n    utils = require('../utils.js'),\n    bidfactory = require('../bidfactory.js'),\n    bidmanager = require('../bidmanager.js'),\n    adloader = require('../adloader'),\n    ajax = require('../ajax').ajax;\n\n/**\n * Adapter for requesting bids from Conversant\n */\nvar ConversantAdapter = function () {\n  var w = window,\n    n = navigator;\n\n  // production endpoint\n  var conversantUrl = '//media.msg.dotomi.com/s2s/header?callback=pbjs.conversantResponse';\n\n  // SSAPI returns JSONP with window.pbjs.conversantResponse as the cb\n  var appendScript = function (code) {\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.className = 'cnvr-response';\n\n    try {\n      script.appendChild(document.createTextNode(code));\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } catch (e) {\n      script.text = code;\n      document.getElementsByTagName('head')[0].appendChild(script);\n    }\n  };\n\n  var getDNT = function () {\n    return n.doNotTrack === '1' || w.doNotTrack === '1' || n.msDoNotTrack === '1' || n.doNotTrack === 'yes';\n  };\n\n  var getDevice = function () {\n    const language = n.language ? 'language' : 'userLanguage';\n    return {\n      h: screen.height,\n      w: screen.width,\n      dnt: getDNT() ? 1 : 0,\n      language: n[language].split('-')[0],\n      make: n.vendor ? n.vendor : '',\n      ua: n.userAgent\n    };\n  };\n\n  var callBids = function (params) {\n    var conversantBids = params.bids || [];\n    requestBids(conversantBids);\n  };\n\n  var requestBids = function (bidReqs) {\n    // build bid request object\n    var page = location.pathname + location.search + location.hash,\n      siteId = '',\n      conversantImps = [],\n      conversantBidReqs,\n      secure = 0;\n\n    //build impression array for conversant\n    utils._each(bidReqs, function (bid) {\n      var bidfloor = utils.getBidIdParameter('bidfloor', bid.params),\n        adW = 0,\n        adH = 0,\n        imp;\n\n      secure = utils.getBidIdParameter('secure', bid.params) ? 1 : secure;\n      siteId = utils.getBidIdParameter('site_id', bid.params) + '';\n\n      // Allow sizes to be overridden per placement\n      var bidSizes = Array.isArray(bid.params.sizes) ? bid.params.sizes : bid.sizes;\n\n      if (bidSizes.length === 2 && typeof bidSizes[0] === 'number' && typeof bidSizes[1] === 'number') {\n        adW = bidSizes[0];\n        adH = bidSizes[1];\n      } else {\n        adW = bidSizes[0][0];\n        adH = bidSizes[0][1];\n      }\n\n      imp = {\n        id: bid.bidId,\n        banner: {\n          w: adW,\n          h: adH\n        },\n        secure: secure,\n        bidfloor: bidfloor ? bidfloor : 0,\n        displaymanager: 'Prebid.js',\n        displaymanagerver: VERSION\n      };\n\n      conversantImps.push(imp);\n    });\n\n    conversantBidReqs = {\n      'id': utils.getUniqueIdentifierStr(),\n      'imp': conversantImps,\n\n      'site': {\n        'id': siteId,\n        'mobile': document.querySelector('meta[name=\"viewport\"][content*=\"width=device-width\"]') !== null ? 1 : 0,\n        'page': page\n      },\n\n      'device': getDevice(),\n      'at': 1\n    };\n\n    var url = secure ? 'https:' + conversantUrl : location.protocol + conversantUrl;\n    ajax(url, appendScript, JSON.stringify(conversantBidReqs), {\n      withCredentials : true\n    });\n  };\n\n  var addEmptyBidResponses = function (placementsWithBidsBack) {\n    var allConversantBidRequests = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'conversant');\n\n    if (allConversantBidRequests && allConversantBidRequests.bids){\n      utils._each(allConversantBidRequests.bids, function (conversantBid) {\n        if (!utils.contains(placementsWithBidsBack, conversantBid.placementCode)) {\n          // Add a no-bid response for this placement.\n          var bid = bidfactory.createBid(2, conversantBid);\n          bid.bidderCode = 'conversant';\n          bidmanager.addBidResponse(conversantBid.placementCode, bid);\n        }\n      });\n    }\n  };\n\n  var parseSeatbid = function (bidResponse) {\n    var placementsWithBidsBack = [];\n    utils._each(bidResponse.bid, function (conversantBid) {\n      var responseCPM,\n        placementCode = '',\n        id = conversantBid.impid,\n        bid = {},\n        responseAd,\n        responseNurl,\n        sizeArrayLength;\n\n      // Bid request we sent Conversant\n      var bidRequested = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'conversant').bids.find(bid => bid.bidId === id);\n\n      if (bidRequested) {\n        placementCode = bidRequested.placementCode;\n        bidRequested.status = CONSTANTS.STATUS.GOOD;\n        responseCPM = parseFloat(conversantBid.price);\n\n        if (responseCPM !== 0.0) {\n          conversantBid.placementCode = placementCode;\n          placementsWithBidsBack.push(placementCode);\n          conversantBid.size = bidRequested.sizes;\n          responseAd = conversantBid.adm || '';\n          responseNurl = conversantBid.nurl || '';\n\n          // Our bid!\n          bid = bidfactory.createBid(1, bidRequested);\n          bid.creative_id = conversantBid.id || '';\n          bid.bidderCode = 'conversant';\n\n          bid.cpm = responseCPM;\n\n          // Track impression image onto returned html\n          bid.ad = responseAd + '<img src=\\\"' + responseNurl + '\\\" />';\n\n          sizeArrayLength = bidRequested.sizes.length;\n          if (sizeArrayLength === 2 && typeof bidRequested.sizes[0] === 'number' && typeof bidRequested.sizes[1] === 'number') {\n            bid.width = bidRequested.sizes[0];\n            bid.height = bidRequested.sizes[1];\n          } else {\n            bid.width = bidRequested.sizes[0][0];\n            bid.height = bidRequested.sizes[0][1];\n          }\n\n          bidmanager.addBidResponse(placementCode, bid);\n        }\n      }\n    });\n    addEmptyBidResponses(placementsWithBidsBack);\n  };\n\n  // Register our callback to the global object:\n  pbjs.conversantResponse = function (conversantResponseObj, path) {\n    // valid object?\n    if (conversantResponseObj && conversantResponseObj.id) {\n      if (conversantResponseObj.seatbid && conversantResponseObj.seatbid.length > 0 && conversantResponseObj.seatbid[0].bid && conversantResponseObj.seatbid[0].bid.length > 0) {\n        utils._each(conversantResponseObj.seatbid, parseSeatbid);\n      } else {\n        //no response data for any placements\n        addEmptyBidResponses([]);\n      }\n    } else {\n      //no response data for any placements\n      addEmptyBidResponses([]);\n    }\n    // for debugging purposes\n    if (path){\n      adloader.loadScript(path, function () {\n        var allConversantBidRequests = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'conversant');\n\n        if (pbjs.conversantDebugResponse){\n          pbjs.conversantDebugResponse(allConversantBidRequests);\n        }\n      });\n    }\n  }; // conversantResponse\n\n  return {\n    callBids: callBids\n  };\n};\n\nmodule.exports = ConversantAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/conversant.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adLoader = require('../adloader');\n\nvar DistrictmAdaptor = function districtmAdaptor(){\n  let districtmUrl = window.location.protocol + '//prebid.districtm.ca/lib.js';\n  this.callBids = params =>{\n    if(!window.hb_dmx_res){\n      adLoader.loadScript(districtmUrl,()=>{\n        this.sendBids(params);\n      });\n    }else{\n      this.sendBids(params);\n    }\n    return params;\n  };\n\n\n  this.handlerRes = function(response, bidObject){\n    let bid;\n    if(parseFloat(response.result.cpm) > 0){\n      bid = bidfactory.createBid(1);\n      bid.bidderCode = bidObject.bidder;\n      bid.cpm = response.result.cpm;\n      bid.width = response.result.width;\n      bid.height = response.result.height;\n      bid.ad = response.result.banner;\n      bidmanager.addBidResponse(bidObject.placementCode, bid);\n    }else{\n      bid = bidfactory.createBid(2);\n      bid.bidderCode = bidObject.bidder;\n      bidmanager.addBidResponse(bidObject.placementCode, bid);\n    }\n\n    return bid;\n  };\n\n\n  this.sendBids = function(params){\n    var bids = params.bids;\n    for(var i = 0; i < bids.length; i++){\n      bids[i].params.sizes = window.hb_dmx_res.auction.fixSize(bids[i].sizes);\n    }\n    window.hb_dmx_res.auction.run(window.hb_dmx_res.ssp, bids, this.handlerRes);\n    return bids;\n  };\n\n\n  return {\n    callBids: this.callBids,\n    sendBids: this.sendBids,\n    handlerRes: this.handlerRes\n  };\n};\n\nmodule.exports = DistrictmAdaptor;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/districtmDMX.js","var utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\nvar STATUS = require('../constants').STATUS;\n\nvar FidelityAdapter = function FidelityAdapter() {\n  var FIDELITY_BIDDER_NAME = 'fidelity';\n  var FIDELITY_SERVER_NAME = 'x.fidelity-media.com';\n\n  function _callBids(params) {\n    var bids = params.bids || [];\n    bids.forEach(function (currentBid) {\n      var server = currentBid.params.server || FIDELITY_SERVER_NAME;\n      var m3_u = window.location.protocol + '//'+server+'/delivery/hb.php?';\n      m3_u += 'callback=window.pbjs.fidelityResponse';\n      m3_u += '&requestid='+utils.getUniqueIdentifierStr();\n      m3_u += '&impid='+currentBid.bidId;\n      m3_u += '&zoneid='+currentBid.params.zoneid;\n      m3_u += '&cb='+Math.floor(Math.random()*99999999999);\n      m3_u += document.charset ? '&charset='+document.charset : (document.characterSet ? '&charset='+document.characterSet : '');\n\n      var loc;\n      try {\n        loc = window.top !== window ? document.referrer : window.location.href;\n      } catch (e) {\n        loc = document.referrer;\n      }\n      loc = currentBid.params.loc || loc;\n      m3_u += '&loc=' + encodeURIComponent(loc);\n\n      var subid = currentBid.params.subid || 'hb';\n      m3_u += '&subid=' + subid;\n      if (document.referrer) m3_u += '&referer=' + encodeURIComponent(document.referrer);\n      if (currentBid.params.click) m3_u += '&ct0=' + encodeURIComponent(currentBid.params.click);\n      m3_u += '&flashver=' + encodeURIComponent(getFlashVersion());\n\n      adloader.loadScript(m3_u);\n    });\n  }\n\n  function getFlashVersion(){\n    var plugins, plugin, result;\n\n    if (navigator.plugins && navigator.plugins.length > 0) {\n      plugins = navigator.plugins;\n      for (var i = 0; i < plugins.length && !result; i++) {\n        plugin = plugins[i];\n        if (plugin.name.indexOf(\"Shockwave Flash\") > -1) {\n          result = plugin.description.split(\"Shockwave Flash \")[1];\n        }\n      }\n    }\n    return result ? result : \"\";\n  }\n\n  function addBlankBidResponses(placementsWithBidsBack) {\n    var allFidelityBidRequests = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === FIDELITY_BIDDER_NAME);\n\n    if (allFidelityBidRequests && allFidelityBidRequests.bids){\n      utils._each(allFidelityBidRequests.bids, function (fidelityBid) {\n        if (!utils.contains(placementsWithBidsBack, fidelityBid.placementCode)) {\n          // Add a no-bid response for this placement.\n          var bid = bidfactory.createBid(STATUS.NO_BID, fidelityBid);\n          bid.bidderCode = FIDELITY_BIDDER_NAME;\n          bidmanager.addBidResponse(fidelityBid.placementCode, bid);\n        }\n      });\n    }\n  }\n  \n  pbjs.fidelityResponse = function(responseObj) {\n\n    if (!responseObj || !responseObj.seatbid || responseObj.seatbid.length === 0 || !responseObj.seatbid[0].bid || responseObj.seatbid[0].bid.length === 0) {\n      addBlankBidResponses([]); \n      return;\n    }\n\n    var bid = responseObj.seatbid[0].bid[0];\n    var status = bid.adm ? STATUS.GOOD : STATUS.NO_BID;\n    var requestObj = utils.getBidRequest(bid.impid);\n\n    var bidResponse = bidfactory.createBid(status);\n    bidResponse.bidderCode = FIDELITY_BIDDER_NAME;\n    if (status === STATUS.GOOD) {\n      bidResponse.cpm = parseFloat(bid.price);\n      bidResponse.ad = bid.adm;\n      bidResponse.width = parseInt(bid.width);\n      bidResponse.height = parseInt(bid.height);\n    }\n    var placementCode = requestObj && requestObj.placementCode;\n    bidmanager.addBidResponse(placementCode, bidResponse);\n  };\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = FidelityAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/fidelity.js","const bidfactory = require('../bidfactory');\nconst bidmanager = require('../bidmanager');\nconst utils      = require('../utils');\nconst adloader   = require('../adloader');\n\nconst BIDDER_CODE = 'gumgum';\nconst CALLBACKS = {};\n\nconst GumgumAdapter = function GumgumAdapter() {\n\n  const bidEndpoint = `https://g2.gumgum.com/hbid/imp`;\n\n  let topWindow;\n  let topScreen;\n  let pageViewId;\n  const requestCache = {};\n  const throttleTable = {};\n  const defaultThrottle = 3e4;\n\n  try {\n    topWindow = global.top;\n    topScreen = topWindow.screen;\n  } catch (error) {\n    return utils.logError(error);\n  }\n\n  function _getTimeStamp() {\n    return new Date().getTime();\n  }\n\n  function _callBids({ bids }) {\n    const browserParams = {\n      vw: topWindow.innerWidth,\n      vh: topWindow.innerHeight,\n      sw: topScreen.width,\n      sh: topScreen.height,\n      pu: topWindow.location.href,\n      ce: navigator.cookieEnabled,\n      dpr: topWindow.devicePixelRatio || 1\n    };\n    utils._each(bids, bidRequest => {\n      const { bidId\n            , params = {}\n            , placementCode\n            } = bidRequest;\n      const timestamp  = _getTimeStamp();\n      const trackingId = params.inScreen;\n      const nativeId   = params.native;\n      const slotId     = params.inSlot;\n      const bid        = { tmax: pbjs.cbTimeout };\n\n      /* slot/native ads need the placement id */\n      switch (true) {\n        case !!(params.inImage):  bid.pi = 1; break;\n        case !!(params.inScreen): bid.pi = 2; break;\n        case !!(params.inSlot):   bid.pi = 3; break;\n        case !!(params.native):   bid.pi = 5; break;\n        default: return utils.logWarn(\n          `[GumGum] No product selected for the placement ${placementCode}` +\n          ', please check your implementation.'\n        );\n      }\n\n      /* throttle based on the latest request for this product */\n      const productId     = bid.pi;\n      const requestKey    = productId + '|' + placementCode;\n      const throttle      = throttleTable[productId];\n      const latestRequest = requestCache[requestKey];\n      if (latestRequest && throttle && (timestamp - latestRequest) < throttle) {\n        return utils.logWarn(\n          `[GumGum] The refreshes for \"${ placementCode }\" with the params ` +\n          `${ JSON.stringify(params) } should be at least ${ throttle / 1e3 }s apart.`\n        );\n      }\n      /* update the last request */\n      requestCache[requestKey] = timestamp;\n\n      /* tracking id is required for in-image and in-screen */\n      if (trackingId) bid.t = trackingId;\n      /* native ads require a native placement id */\n      if (nativeId) bid.ni = nativeId;\n      /* slot ads require a slot id */\n      if (slotId) bid.si = slotId;\n\n      /* include the pageViewId, if any */\n      if (pageViewId) bid.pv = pageViewId;\n\n      const cachedBid = Object.assign({\n        placementCode,\n        id: bidId\n      }, bid);\n\n      const callback = { jsonp: `pbjs.handleGumGumCB['${ bidId }']` };\n      CALLBACKS[bidId] = _handleGumGumResponse(cachedBid);\n      const query = Object.assign(callback, browserParams, bid);\n      const bidCall = `${bidEndpoint}?${utils.parseQueryStringParameters(query)}`;\n      adloader.loadScript(bidCall);\n    });\n  }\n\n  const _handleGumGumResponse = cachedBidRequest => (bidResponse = {}) => {\n    const { pi: productId\n          } = cachedBidRequest;\n    const { ad = {}\n          , pag = {}\n          , thms: throttle\n          } = bidResponse;\n    /* cache the pageViewId */\n    if (pag && pag.pvid) pageViewId = pag.pvid;\n    if (ad && ad.id) {\n      /* set the new throttle */\n      throttleTable[productId] = throttle || defaultThrottle;\n      /* create the bid */\n      const bid = bidfactory.createBid(1);\n      const { t: trackingId\n            } = pag;\n      bidResponse.request = cachedBidRequest;\n      const encodedResponse = encodeURIComponent(JSON.stringify(bidResponse));\n      const gumgumAdLoader = `<script>\n        (function (context, topWindow, d, s, G) {\n          G = topWindow.GUMGUM;\n          d = topWindow.document;\n          function loadAd() {\n            topWindow.GUMGUM.pbjs(\"${ trackingId }\", ${ productId }, \"${ encodedResponse }\" , context);\n          }\n          if (G) {\n            loadAd();\n          } else {\n            topWindow.pbjs.loadScript(\"https://g2.gumgum.com/javascripts/ggv2.js\", loadAd);\n          }\n        }(window, top));\n      </script>`;\n      Object.assign(bid, {\n        cpm: ad.price,\n        ad: gumgumAdLoader,\n        width: ad.width,\n        height: ad.height,\n        bidderCode: BIDDER_CODE\n      });\n      bidmanager.addBidResponse(cachedBidRequest.placementCode, bid);\n    } else {\n      const noBid = bidfactory.createBid(2);\n      noBid.bidderCode = BIDDER_CODE;\n      bidmanager.addBidResponse(cachedBidRequest.placementCode, noBid);\n    }\n    delete CALLBACKS[cachedBidRequest.id];\n  };\n\n  window.pbjs.handleGumGumCB = CALLBACKS;\n\n  return {\n    callBids: _callBids\n  };\n\n};\n\nmodule.exports = GumgumAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/gumgum.js","/*jslint white:true, browser:true*/\r\n/*global pbjs, require, module*/\r\n\r\n/**\r\n * Adapter for HIRO Media\r\n *\r\n * @module HiroMediaAdapter\r\n *\r\n * @requires src/adloader\r\n * @requires src/bidfactory\r\n * @requires src/bidmanager\r\n * @requires src/constants\r\n * @requires src/utils\r\n */\r\nvar adloader = require('src/adloader');\r\nvar bidfactory = require('src/bidfactory');\r\nvar bidmanager = require('src/bidmanager');\r\nvar utils = require('src/utils');\r\nvar STATUS = require('src/constants').STATUS;\r\n\r\nvar HiroMediaAdapter = function HiroMediaAdapter() {\r\n\r\n  'use strict';\r\n\r\n  /**\r\n   * Bidder code\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @constant {string}\r\n   * @private\r\n   */\r\n  var BIDDER_CODE = 'hiromedia';\r\n\r\n  /**\r\n   * Adapter version\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @constant {number}\r\n   * @private\r\n   */\r\n  var ADAPTER_VERSION = 2;\r\n\r\n  /**\r\n   * Default bid param values\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @constant {module:HiroMediaAdapter~bidParams}\r\n   * @private\r\n   */\r\n  var REQUIRED_BID_PARAMS = ['accountId'];\r\n\r\n  /**\r\n   * Default bid param values\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @constant {module:HiroMediaAdapter~bidParams}\r\n   * @private\r\n   */\r\n  var DEFAULT_BID_PARAMS = {\r\n    bidUrl: 'https://hb-rtb.ktdpublishers.com/bid/get',\r\n    allowedSize: [300,250],\r\n    sizeTolerance: 5\r\n  };\r\n\r\n  /**\r\n   * Storage for bid objects.\r\n   *\r\n   * Bids need to be stored between requests and response since the response\r\n   * is a global callback.\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @var {array.<module:HiroMediaAdapter~bidInfo>}\r\n   * @private\r\n   */\r\n  var _bidStorage = [];\r\n\r\n  /**\r\n   * Call bidmanager.addBidResponse\r\n   *\r\n   * Simple wrapper that will create a bid object with the correct status\r\n   * and add the response for the placement.\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {module:HiroMediaAdapter~bidInfo} bidInfo bid object wrapper to respond for\r\n   * @param  {object|boolean} [bidResponse] response object for bid, if not\r\n   * set the response will be an empty bid response.\r\n   */\r\n  function addBidResponse(bidInfo, bidResponse) {\r\n\r\n    var placementCode = bidInfo.bid.placementCode;\r\n    var bidStatus = bidResponse ? STATUS.GOOD : STATUS.NO_BID;\r\n    var bidObject = bidfactory.createBid(bidStatus, bidInfo.bid);\r\n\r\n    bidObject.bidderCode = BIDDER_CODE;\r\n\r\n    if (bidResponse) {\r\n      bidObject.cpm = bidResponse.cpm;\r\n      bidObject.ad = bidResponse.ad;\r\n      bidObject.width = bidInfo.selectedSize[0];\r\n      bidObject.height = bidInfo.selectedSize[1];\r\n    }\r\n\r\n    utils.logMessage('hiromedia.callBids, addBidResponse for ' + placementCode + ' status: ' + bidStatus);\r\n    bidmanager.addBidResponse(placementCode, bidObject);\r\n\r\n  }\r\n\r\n  /**\r\n   * Return `true` if sampling is larger than a newly created random value\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {number} sampling the value to check\r\n   * @return {boolean}  `true` if the sampling is larger, `false` otherwise\r\n   */\r\n  function checkChance(sampling) {\r\n    return Math.random() < sampling;\r\n  }\r\n\r\n  /**\r\n   * Apply a response for all pending bids that have the same response batch key\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {object} response [description]\r\n   */\r\n  function handleResponse(response) {\r\n\r\n    _bidStorage.filter(function (bidInfo) {\r\n      return bidInfo.batchKey === response.batchKey;\r\n    }).forEach(function (bidInfo) {\r\n\r\n      // Sample the bid responses according to `response.chance`,\r\n      // if `response.chance` is not provided, sample at 100%.\r\n      if (response.chance === undefined || checkChance(response.chance)) {\r\n        addBidResponse(bidInfo, response);\r\n      } else {\r\n        addBidResponse(bidInfo, false);\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * Call {@linkcode module:HiroMediaAdapter~handleResponse} for valid responses\r\n   *\r\n   * @global\r\n   *\r\n   * @param  {object} [response] the response from the server\r\n   */\r\n  pbjs.hiromedia_callback = function (response) {\r\n\r\n    if (response && response.batchKey) {\r\n      handleResponse(response);\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Find browser name and version\r\n   *\r\n   * Super basic UA parser for the major browser configurations.\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @return {module:HiroMediaAdapter~browserInfo} object containing name and version of browser\r\n   * or empty strings.\r\n   */\r\n  function getBrowser() {\r\n\r\n    var ua = navigator.userAgent;\r\n    var browsers = [{\r\n      name: 'Mobile',\r\n      stringSearch: 'Mobi'\r\n    }, {\r\n      name: 'Edge'\r\n    }, {\r\n      name: 'Chrome'\r\n    }, {\r\n      name: 'Firefox'\r\n    }, {\r\n      name: 'IE',\r\n      versionSearch: /MSIE\\s(\\d+)/\r\n    }, {\r\n      name: 'IE',\r\n      stringSearch: 'Trident',\r\n      versionSearch: /rv:(\\d+)/\r\n    }];\r\n\r\n    var name = '';\r\n    var version = '';\r\n\r\n    browsers.some(function (browser) {\r\n\r\n      var nameSearch = browser.stringSearch || browser.name;\r\n      var defaultVersionSearch = nameSearch + '\\\\/(\\\\d+)';\r\n      var versionSearch = browser.versionSearch || defaultVersionSearch;\r\n      var versionMatch;\r\n\r\n      if (ua.indexOf(nameSearch) !== -1) {\r\n        name = browser.name;\r\n        versionMatch = ua.match(versionSearch);\r\n        if (versionMatch) {\r\n          version = versionMatch && versionMatch[1];\r\n        }\r\n        return true;\r\n      }\r\n\r\n    });\r\n\r\n    return {\r\n      name: name,\r\n      version: version\r\n    };\r\n\r\n  }\r\n\r\n  /**\r\n   * Return top context domain\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @return {string}  domain of top context url.\r\n   */\r\n  function getDomain() {\r\n\r\n    var a = document.createElement('a');\r\n    a.href = utils.getTopWindowUrl();\r\n    return a.hostname;\r\n\r\n  }\r\n\r\n  /**\r\n   * Convert a `string` to an integer with radix 10.\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {string} value string to convert\r\n   * @return {number}  the converted integer\r\n   */\r\n  function parseInt10(value) {\r\n    return parseInt(value, 10);\r\n  }\r\n\r\n  /**\r\n   * Return `true` if a given value is in a certain range, `false` otherwise\r\n   *\r\n   * Returns `true` if the distance between `allowedValue` and `value`\r\n   * is smaller than the value of `tolerance`\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {number} value the value to test\r\n   * @param  {number} allowedValue the value to test against\r\n   * @param  {number} tolerance tolerance value\r\n   * @return {Boolean} `true` if `dimension` is in range, `false` otherwise.\r\n   */\r\n  function isValueInRange(value, allowedValue, tolerance) {\r\n\r\n    value = parseInt10(value);\r\n    allowedValue = parseInt10(allowedValue);\r\n    tolerance = parseInt10(tolerance);\r\n\r\n    return (allowedValue - tolerance) <= value && value <= (allowedValue + tolerance);\r\n\r\n  }\r\n\r\n  /**\r\n   * Returns `true` if a size array has both dimensions in range an allowed size array,\r\n   * `false` otherwise\r\n   *\r\n   * Each dimension of `size` will be checked against the corresponding dimension\r\n   * of `allowedSize`\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {module:HiroMediaAdapter~size} size size array to test\r\n   * @param  {module:HiroMediaAdapter~size} allowedSize size array to test against\r\n   * @param  {number} tolerance tolerance value (same for both dimensions)\r\n   * @return {Boolean} `true` if the dimensions of `size` are in range of the\r\n   * dimensions of `allowedSize`, `false` otherwise.\r\n   */\r\n  function isSizeInRange(size, allowedSize, tolerance) {\r\n    return isValueInRange(allowedSize[0], size[0], tolerance) && isValueInRange(allowedSize[1], size[1], tolerance);\r\n  }\r\n\r\n  /**\r\n   * Normalize sizes and return an array with sizes in WIDTHxHEIGHT format\r\n   *\r\n   * Simple wrapper around `util.parseSizesInput`\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {array} sizes array of sizes that are passed to `util.parseSizesInput`\r\n   * @return {array}  normalized array of sizes.\r\n   */\r\n  function normalizeSizes(sizes) {\r\n    return utils.parseSizesInput(sizes).map(function (size) {\r\n      return size.split('x');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Apply default parameters to an object if the parameters are not set\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {module:HiroMediaAdapter~bidParams} bidParams custom parameters for bid\r\n   * @return {module:HiroMediaAdapter~bidParams} `bidParams` shallow merged with\r\n   * {@linkcode module:HiroMediaAdapter~DEFAULT_BID_PARAMS|DEFAULT_BID_PARAMS}\r\n   */\r\n  function defaultParams(bidParams) {\r\n    return Object.assign({}, DEFAULT_BID_PARAMS, bidParams);\r\n  }\r\n\r\n  /**\r\n   * Calculate and return a batchKey key for a bid\r\n   *\r\n   * Bid of similar placement can have similar responses,\r\n   * we can calculate a key based on the variant properties\r\n   * of a bid which can share the same response\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {module:HiroMediaAdapter~bidInfo} bidInfo bid information\r\n   * @return {string}  batch key for bid\r\n   */\r\n  function getBatchKey(bidInfo) {\r\n\r\n    var bidParams = bidInfo.bidParams;\r\n    var batchParams = [\r\n      bidParams.bidUrl,\r\n      bidParams.accountId,\r\n      bidInfo.selectedSize.join('x')\r\n    ];\r\n\r\n    return batchParams.join('-');\r\n\r\n  }\r\n\r\n  /**\r\n   * Build a set of {@linkcode module:HiroMediaAdapter~bidInfo|bidInfo} objects based on the\r\n   * bids sent to {@linkcode module:HiroMediaAdapter#callBids|callBids}\r\n   *\r\n   * This routine determines if a bid request should be sent for the placement, it\r\n   * will set `selectedSize` based on `params.allowedSize` and calculate the batch\r\n   * key.\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {object} bids bids sent from `Prebid.js`\r\n   * @return {array.<module:HiroMediaAdapter~bidInfo>} wrapped bids\r\n   */\r\n  function processBids(bids) {\r\n\r\n    var result = [];\r\n\r\n    if (bids) {\r\n\r\n      utils.logMessage('hiromedia.processBids, processing ' + bids.length + ' bids');\r\n\r\n      bids.forEach(function (bid) {\r\n\r\n        var sizes = normalizeSizes(bid.sizes);\r\n        var bidParams = defaultParams(bid.params);\r\n        var allowedSizes = normalizeSizes([bidParams.allowedSize])[0];\r\n        var selectedSize = sizes.find(function (size) {\r\n          return isSizeInRange(size, allowedSizes, bidParams.sizeTolerance);\r\n        });\r\n        var hasValidBidRequest = utils.hasValidBidRequest(bidParams, REQUIRED_BID_PARAMS, BIDDER_CODE);\r\n        var shouldBid = hasValidBidRequest && (selectedSize !== undefined);\r\n        var bidInfo = {\r\n          bid: bid,\r\n          bidParams: bidParams,\r\n          selectedSize: selectedSize,\r\n          shouldBid: shouldBid\r\n        };\r\n\r\n        if (shouldBid) {\r\n          bidInfo.batchKey = getBatchKey(bidInfo);\r\n        }\r\n\r\n        result.push(bidInfo);\r\n\r\n      });\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  }\r\n\r\n  /**\r\n   * Send a bid request to the bid server endpoint\r\n   *\r\n   * Calls `adLoader.loadScript`\r\n   *\r\n   * @memberof module:HiroMediaAdapter~\r\n   * @private\r\n   *\r\n   * @param  {string} url base url, can already contain query parameters\r\n   * @param  {object} requestParams parameters to add to query\r\n   */\r\n  function sendBidRequest(url,requestParams) {\r\n\r\n    if (requestParams) {\r\n\r\n      if (url.indexOf('?') !== -1) {\r\n        url = url + '&';\r\n      } else {\r\n        url = url + '?';\r\n      }\r\n\r\n      Object.keys(requestParams).forEach(function (key) {\r\n        url = utils.tryAppendQueryString(url, key, requestParams[key]);\r\n      });\r\n\r\n    }\r\n\r\n    utils.logMessage('hiromedia.callBids, url:' + url);\r\n\r\n    adloader.loadScript(url);\r\n\r\n  }\r\n\r\n  /**\r\n   * Receive a set of bid placements and create bid requests and responses accordingly\r\n   *\r\n   * @alias module:HiroMediaAdapter#callBids\r\n   *\r\n   * @param  {object} params placement and bid data from `Prebid.js`\r\n   */\r\n  function _callBids(params) {\r\n\r\n    var browser = getBrowser();\r\n    var domain = getDomain();\r\n    var bidsRequested = {};\r\n\r\n    utils.logMessage('hiromedia.callBids');\r\n\r\n    if (params) {\r\n\r\n      // Processed bids are stored in the adapter scope\r\n      _bidStorage = processBids(params.bids);\r\n\r\n    } else {\r\n\r\n      // Ensure we don't run on stale data\r\n      _bidStorage = [];\n\r\n    }\r\n\r\n    if (_bidStorage.length) {\r\n\r\n      // Loop over processed bids and send a request if a request for the bid\r\n      // batchKey has not been sent.\r\n      _bidStorage.forEach(function (bidInfo) {\r\n\r\n        var bid = bidInfo.bid;\r\n        var batchKey = bidInfo.batchKey;\r\n        var bidParams = bidInfo.bidParams;\r\n\r\n        utils.logMessage('hiromedia.callBids, bidInfo ' + bid.placementCode + ' ' + bidInfo.shouldBid);\r\n\r\n        if (bidInfo.shouldBid) {\r\n\r\n          var url = bidParams.bidUrl;\r\n\r\n          if (!bidsRequested[batchKey]) {\r\n\r\n            bidsRequested[batchKey] = true;\r\n\r\n            sendBidRequest(url,{\r\n              adapterVersion: ADAPTER_VERSION,\r\n              callback: 'pbjs.hiromedia_callback',\r\n              batchKey: batchKey,\r\n              placementCode: bid.placementCode,\r\n              accountId: bidParams.accountId,\r\n              browser: browser.name,\r\n              browserVersion: browser.version,\r\n              domain: domain,\r\n              selectedSize: utils.parseSizesInput([bidInfo.selectedSize]),\r\n              placementSizes: utils.parseSizesInput(bid.sizes)\r\n            });\r\n\r\n          }\r\n\r\n        } else {\r\n\r\n          // No bid\r\n          addBidResponse(bidInfo, false);\r\n\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  return {\r\n    callBids: _callBids\r\n  };\r\n\r\n\r\n  // JSDoc typedefs\r\n\r\n  /**\r\n   * A size array where the width is the first array item and the height is\r\n   * the second array item.\r\n   *\r\n   * @typedef {array.<number>} module:HiroMediaAdapter~size\r\n   * @private\r\n   */\r\n\r\n  /**\r\n   * Parameters for bids to HIRO Media adapter\r\n   *\r\n   * @typedef {object} module:HiroMediaAdapter~bidParams\r\n   * @private\r\n   *\r\n   * @property {string} bidUrl the bid server endpoint url\r\n   * @property {module:HiroMediaAdapter~size} allowedSize allowed placement size\r\n   * @property {number} sizeTolerance custom tolerance for `allowedSize`\r\n   */\r\n\r\n  /**\r\n   * Bid object wrapper\r\n   *\r\n   * @typedef {object} module:HiroMediaAdapter~bidInfo\r\n   * @private\r\n   *\r\n   * @property {object} bid original bid passed to #callBids\r\n   * @property {module:HiroMediaAdapter~size} selectedSize the selected size of the placement\r\n   * @property {string} batchKey key used for batching requests which have the same basic properties\r\n   * @property {module:HiroMediaAdapter~bidParams} bidParams original params passed for bid in #callBids\r\n   * @property {boolean} shouldBid flag to determine if the bid is valid for bidding or not\r\n   */\r\n\r\n  /**\r\n   * browserInfo\r\n   *\r\n   * @typedef {object} module:HiroMediaAdapter~browserInfo\r\n   * @private\r\n   *\r\n   * @property {string} name browser name (e.g. `'Chrome'` or `'Firefox'`)\r\n   * @property {string} version browser major version (e.g. `'53'`)\r\n   */\r\n\r\n};\r\n\r\nmodule.exports = HiroMediaAdapter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/hiromedia.js","//Factory for creating the bidderAdaptor\n// jshint ignore:start\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nvar ADAPTER_NAME = 'INDEXEXCHANGE';\nvar ADAPTER_CODE = 'indexExchange';\n\nvar CONSTANTS = {\n  \"INDEX_DEBUG_MODE\": {\n    \"queryParam\": \"pbjs_ix_debug\",\n    \"mode\": {\n      \"sandbox\": {\n        \"topFrameLimit\": 10,\n        \"queryValue\": \"sandbox\",\n        \"siteID\": \"999990\"\n      }\n    }\n  }\n};\n\nvar OPEN_MARKET = 'IOM';\nvar PRIVATE_MARKET = 'IPM';\n\nwindow.cygnus_index_parse_res = function(response) {\n  try {\n    if (response) {\n      if (typeof _IndexRequestData !== \"object\" || typeof _IndexRequestData.impIDToSlotID !== \"object\" || typeof _IndexRequestData.impIDToSlotID[response.id] === \"undefined\") {\n        return;\n      }\n      var targetMode = 1;\n      var callbackFn;\n      if (typeof _IndexRequestData.reqOptions === 'object' && typeof _IndexRequestData.reqOptions[response.id] === 'object') {\n        if (typeof _IndexRequestData.reqOptions[response.id].callback === \"function\") {\n          callbackFn = _IndexRequestData.reqOptions[response.id].callback;\n        }\n        if (typeof _IndexRequestData.reqOptions[response.id].targetMode === \"number\") {\n          targetMode = _IndexRequestData.reqOptions[response.id].targetMode;\n        }\n      }\n\n      _IndexRequestData.lastRequestID = response.id;\n      _IndexRequestData.targetIDToBid = {};\n      _IndexRequestData.targetIDToResp = {};\n      _IndexRequestData.targetIDToCreative = {};\n\n      var allBids = [];\n      var seatbidLength = typeof response.seatbid === \"undefined\" ? 0 : response.seatbid.length;\n      for (var i = 0; i < seatbidLength; i++) {\n        for (var j = 0; j < response.seatbid[i].bid.length; j++) {\n          var bid = response.seatbid[i].bid[j];\n          if (typeof bid.ext !== \"object\" || typeof bid.ext.pricelevel !== \"string\") {\n            continue;\n          }\n          if (typeof _IndexRequestData.impIDToSlotID[response.id][bid.impid] === \"undefined\") {\n            continue;\n          }\n          var slotID = _IndexRequestData.impIDToSlotID[response.id][bid.impid];\n          var targetID;\n          var noTargetModeTargetID;\n          var targetPrefix;\n          if (typeof bid.ext.dealid === \"string\") {\n            if (targetMode === 1) {\n              targetID = slotID + bid.ext.pricelevel;\n            } else {\n              targetID = slotID + \"_\" + bid.ext.dealid;\n            }\n            noTargetModeTargetID = slotID + '_' + bid.ext.dealid;\n            targetPrefix = PRIVATE_MARKET + '_';\n          } else {\n            targetID = slotID + bid.ext.pricelevel;\n            noTargetModeTargetID = slotID + bid.ext.pricelevel;\n            targetPrefix = OPEN_MARKET + '_';\n          }\n          if (_IndexRequestData.targetIDToBid[targetID] === undefined) {\n            _IndexRequestData.targetIDToBid[targetID] = [bid.adm];\n          } else {\n            _IndexRequestData.targetIDToBid[targetID].push(bid.adm);\n          }\n          if (_IndexRequestData.targetIDToCreative[noTargetModeTargetID] === undefined) {\n            _IndexRequestData.targetIDToCreative[noTargetModeTargetID] = [bid.adm];\n          } else {\n            _IndexRequestData.targetIDToCreative[noTargetModeTargetID].push(bid.adm);\n          }\n          var impBid = {};\n          impBid.impressionID = bid.impid;\n          if (typeof bid.ext.dealid !== 'undefined') {\n            impBid.dealID = bid.ext.dealid;\n          }\n          impBid.bid = bid.price;\n          impBid.slotID = slotID;\n          impBid.priceLevel = bid.ext.pricelevel;\n          impBid.target = targetPrefix + targetID;\n          _IndexRequestData.targetIDToResp[targetID] = impBid;\n          allBids.push(impBid);\n        }\n      }\n      if (typeof callbackFn === \"function\") {\n        if (allBids.length === 0) {\n          callbackFn(response.id);\n        } else {\n          callbackFn(response.id, allBids);\n        }\n      }\n\n    }\n  } catch (e) {}\n\n  if (typeof window.cygnus_index_ready_state === 'function') {\n    window.cygnus_index_ready_state();\n  }\n}\n\nwindow.index_render = function(doc, targetID) {\n  try {\n    var ad = _IndexRequestData.targetIDToCreative[targetID].pop();\n    if (ad != null) {\n      doc.write(ad);\n    } else {\n      var url = window.location.protocol === 'https:' ? 'https://as-sec.casalemedia.com' : 'http://as.casalemedia.com';\n      url += '/headerstats?type=RT&s=' + cygnus_index_args.siteID + '&u=' + encodeURIComponent(location.href) + '&r=' + _IndexRequestData.lastRequestID;\n      var px_call = new Image();\n      px_call.src = url + '&blank=' + targetID;\n    }\n  } catch (e) {}\n}\n\nwindow.headertag_render = function(doc, targetID, slotID) {\n  var index_slot = slotID;\n  var index_ary = targetID.split(',');\n  for (var i = 0; i < index_ary.length; i++) {\n    var unpack = index_ary[i].split('_');\n    if (unpack[0] == index_slot) {\n      index_render(doc, index_ary[i]);\n      return;\n    }\n  }\n}\n\nwindow.cygnus_index_args = {};\n\nvar cygnus_index_adunits =  [[728, 90], [120, 600], [300, 250], [160, 600], [336, 280], [234, 60], [300, 600], [300, 50], [320, 50], [970, 250], [300, 1050], [970, 90], [180, 150]]; // jshint ignore:line\n\nvar getIndexDebugMode = function() {\n  return getParameterByName(CONSTANTS.INDEX_DEBUG_MODE.queryParam).toUpperCase();\n}\n\nvar getParameterByName = function (name) {\n  var wdw = window;\n  var childsReferrer = '';\n  for (var x = 0; x < CONSTANTS.INDEX_DEBUG_MODE.mode.sandbox.topFrameLimit; x++) {\n    if (wdw.parent == wdw) {\n      break;\n    }\n    try {\n      childsReferrer = wdw.document.referrer;\n    } catch (err) {}\n    wdw = wdw.parent;\n  }\n  var topURL = top === self ? location.href : childsReferrer;\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(topURL);\n  if (results === null) {\n    return '';\n  }\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\nvar cygnus_index_start = function () {\n  window.cygnus_index_args.parseFn = cygnus_index_parse_res;\n  var escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n  var meta = {\n    '\\b': '\\\\b',\n    '\\t': '\\\\t',\n    '\\n': '\\\\n',\n    '\\f': '\\\\f',\n    '\\r': '\\\\r',\n    '\"': '\\\\\"',\n    '\\\\': '\\\\\\\\'\n  };\n\n  function escapeCharacter(character) {\n    var escaped = meta[character];\n    if (typeof escaped === 'string') {\n      return escaped;\n    } else {\n      return '\\\\u' + ('0000' + character.charCodeAt(0).toString(16)).slice(-4);\n    }\n  }\n\n  function quote(string) {\n    escapable.lastIndex = 0;\n    if (escapable.test(string)) {\n      return string.replace(escapable, escapeCharacter);\n    } else {\n      return string;\n    }\n  }\n\n  function OpenRTBRequest(siteID, parseFn, timeoutDelay) {\n    this.initialized = false;\n    if (typeof siteID !== 'number' || siteID % 1 !== 0 || siteID < 0) {\n      throw 'Invalid Site ID';\n    }\n\n    timeoutDelay = Number(timeoutDelay);\n    if (typeof timeoutDelay === 'number' && timeoutDelay % 1 === 0 && timeoutDelay >= 0) {\n      this.timeoutDelay = timeoutDelay;\n    }\n\n    this.siteID = siteID;\n    this.impressions = [];\n    this._parseFnName = undefined;\n    if (top === self) {\n      this.sitePage = location.href;\n      this.topframe = 1;\n    } else {\n      this.sitePage = document.referrer;\n      this.topframe = 0;\n    }\n\n    if (typeof parseFn !== 'undefined') {\n      if (typeof parseFn === 'function') {\n        this._parseFnName = 'cygnus_index_args.parseFn';\n      } else {\n        throw 'Invalid jsonp target function';\n      }\n    }\n\n    if (typeof _IndexRequestData.requestCounter === 'undefined') {\n      _IndexRequestData.requestCounter = Math.floor(Math.random() * 256);\n    } else {\n      _IndexRequestData.requestCounter = (_IndexRequestData.requestCounter + 1) % 256;\n    }\n\n    this.requestID = String((new Date().getTime() % 2592000) * 256 + _IndexRequestData.requestCounter + 256);\n    this.initialized = true;\n  }\n\n  OpenRTBRequest.prototype.serialize = function () {\n    var json = '{\"id\":\"' + this.requestID + '\",\"site\":{\"page\":\"' + quote(this.sitePage) + '\"';\n    if (typeof document.referrer === 'string' && document.referrer !== \"\") {\n      json += ',\"ref\":\"' + quote(document.referrer) + '\"';\n    }\n\n    json += '},\"imp\":[';\n    for (var i = 0; i < this.impressions.length; i++) {\n      var impObj = this.impressions[i];\n      var ext = [];\n      json += '{\"id\":\"' + impObj.id + '\", \"banner\":{\"w\":' + impObj.w + ',\"h\":' + impObj.h + ',\"topframe\":' + String(this.topframe) + '}';\n      if (typeof impObj.bidfloor === 'number') {\n        json += ',\"bidfloor\":' + impObj.bidfloor;\n        if (typeof impObj.bidfloorcur === 'string') {\n          json += ',\"bidfloorcur\":\"' + quote(impObj.bidfloorcur) + '\"';\n        }\n      }\n\n      if (typeof impObj.slotID === 'string' && (!impObj.slotID.match(/^\\s*$/))) {\n        ext.push('\"sid\":\"' + quote(impObj.slotID) + '\"');\n      }\n\n      if (typeof impObj.siteID === 'number') {\n        ext.push('\"siteID\":' + impObj.siteID);\n      }\n\n      if (ext.length > 0) {\n        json += ',\"ext\": {' + ext.join() + '}';\n      }\n\n      if (i + 1 === this.impressions.length) {\n        json += '}';\n      } else {\n        json += '},';\n      }\n    }\n\n    json += ']}';\n    return json;\n  };\n\n  OpenRTBRequest.prototype.setPageOverride = function (sitePageOverride) {\n    if (typeof sitePageOverride === 'string' && (!sitePageOverride.match(/^\\s*$/))) {\n      this.sitePage = sitePageOverride;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  OpenRTBRequest.prototype.addImpression = function (width, height, bidFloor, bidFloorCurrency, slotID, siteID) {\n    var impObj = {\n      id: String(this.impressions.length + 1)\n    };\n    if (typeof width !== 'number' || width <= 1) {\n      return null;\n    }\n\n    if (typeof height !== 'number' || height <= 1) {\n      return null;\n    }\n\n    if ((typeof slotID === 'string' || typeof slotID === 'number') && String(slotID).length <= 50) {\n      impObj.slotID = String(slotID);\n    }\n\n    impObj.w = width;\n    impObj.h = height;\n    if (bidFloor !== undefined && typeof bidFloor !== 'number') {\n      return null;\n    }\n\n    if (typeof bidFloor === 'number') {\n      if (bidFloor < 0) {\n        return null;\n      }\n\n      impObj.bidfloor = bidFloor;\n      if (bidFloorCurrency !== undefined && typeof bidFloorCurrency !== 'string') {\n        return null;\n      }\n\n      impObj.bidfloorcur = bidFloorCurrency;\n    }\n\n    if (typeof siteID !== 'undefined') {\n      if (typeof siteID === 'number' && siteID % 1 === 0 && siteID >= 0) {\n        impObj.siteID = siteID;\n      } else {\n        return null;\n      }\n    }\n\n    this.impressions.push(impObj);\n    return impObj.id;\n  };\n\n  OpenRTBRequest.prototype.buildRequest = function () {\n    if (this.impressions.length === 0 || this.initialized !== true) {\n      return;\n    }\n\n    var jsonURI = encodeURIComponent(this.serialize());\n\n    var scriptSrc;\n    if (getIndexDebugMode() == CONSTANTS.INDEX_DEBUG_MODE.mode.sandbox.queryValue.toUpperCase()) {\n      this.siteID = CONSTANTS.INDEX_DEBUG_MODE.mode.sandbox.siteID;\n      scriptSrc = window.location.protocol === 'https:' ? 'https://sandbox.ht.indexexchange.com' : 'http://sandbox.ht.indexexchange.com';\n      utils.logMessage('IX DEBUG: Sandbox mode activated');\n    } else {\n      scriptSrc = window.location.protocol === 'https:' ? 'https://as-sec.casalemedia.com' : 'http://as.casalemedia.com';\n    }\n    var prebidVersion = encodeURIComponent(\"0.21.0\");\n    scriptSrc += '/cygnus?v=7&fn=cygnus_index_parse_res&s=' + this.siteID + '&r=' + jsonURI + '&pid=pb' + prebidVersion;\n    if (typeof this.timeoutDelay === 'number' && this.timeoutDelay % 1 === 0 && this.timeoutDelay >= 0) {\n      scriptSrc += '&t=' + this.timeoutDelay;\n    }\n\n    return scriptSrc;\n  };\n\n  try {\n    if (typeof cygnus_index_args === 'undefined' || typeof cygnus_index_args.siteID === 'undefined' || typeof cygnus_index_args.slots === 'undefined') {\n      return;\n    }\n\n    var req = new OpenRTBRequest(cygnus_index_args.siteID, cygnus_index_args.parseFn, cygnus_index_args.timeout);\n    if (cygnus_index_args.url && typeof cygnus_index_args.url === 'string') {\n      req.setPageOverride(cygnus_index_args.url);\n    }\n\n    _IndexRequestData.impIDToSlotID[req.requestID] = {};\n    _IndexRequestData.reqOptions[req.requestID] = {};\n    var slotDef, impID;\n\n    for (var i = 0; i < cygnus_index_args.slots.length; i++) {\n      slotDef = cygnus_index_args.slots[i];\n\n      impID = req.addImpression(slotDef.width, slotDef.height, slotDef.bidfloor, slotDef.bidfloorcur, slotDef.id, slotDef.siteID);\n      if (impID) {\n        _IndexRequestData.impIDToSlotID[req.requestID][impID] = String(slotDef.id);\n      }\n    }\n\n    if (typeof cygnus_index_args.targetMode === 'number') {\n      _IndexRequestData.reqOptions[req.requestID].targetMode = cygnus_index_args.targetMode;\n    }\n\n    if (typeof cygnus_index_args.callback === 'function') {\n      _IndexRequestData.reqOptions[req.requestID].callback = cygnus_index_args.callback;\n    }\n\n    return req.buildRequest();\n  } catch (e) {\n    utils.logError('Error calling index adapter', ADAPTER_NAME, e);\n  }\n};\n\nvar IndexExchangeAdapter = function IndexExchangeAdapter() {\n  var slotIdMap = {};\n  var requiredParams = [\n    /* 0 */\n    'id',\n    /* 1 */\n    'siteID'\n  ];\n  var firstAdUnitCode = '';\n\n  function _callBids(request) {\n    var bidArr = request.bids;\n\n    if (typeof window._IndexRequestData === 'undefined') {\n      window._IndexRequestData = {};\n      window._IndexRequestData.impIDToSlotID = {};\n      window._IndexRequestData.reqOptions = {};\n    }\n    // clear custom targets at the beginning of every request\n    _IndexRequestData.targetAggregate = {'open':{},'private':{}};\n\n    if (!utils.hasValidBidRequest(bidArr[0].params, requiredParams, ADAPTER_NAME)) {\n      return;\n    }\n\n    //Our standard is to always bid for all known slots.\n    cygnus_index_args.slots = [];\n\n    var expectedBids = 0;\n\n    //Grab the slot level data for cygnus_index_args\n    for (var i = 0; i < bidArr.length; i++) {\n      var bid = bidArr[i];\n      var sizeID = 0;\n\n      expectedBids++;\n\n      // Expecting nested arrays for sizes\n      if (!(bid.sizes[0] instanceof Array)) {\n        bid.sizes = [bid.sizes];\n      }\n\n      // Create index slots for all bids and sizes\n      for (var j = 0; j < bid.sizes.length; j++) {\n        var validSize = false;\n        for (var k = 0; k < cygnus_index_adunits.length; k++) {\n          if (bid.sizes[j][0] == cygnus_index_adunits[k][0] &&\n              bid.sizes[j][1] == cygnus_index_adunits[k][1]) {\n            bid.sizes[j][0] = Number(bid.sizes[j][0]);\n            bid.sizes[j][1] = Number(bid.sizes[j][1]);\n            validSize = true;\n            break;\n          }\n        }\n\n        if (!validSize) {\n          utils.logMessage(ADAPTER_NAME + \" slot excluded from request due to no valid sizes\");\n          continue;\n        }\n\n        var usingSizeSpecificSiteID = false;\n        // Check for size defined in bidder params \n        if (bid.params.size && bid.params.size instanceof Array) {\n          if (!(bid.sizes[j][0] == bid.params.size[0] && bid.sizes[j][1] == bid.params.size[1]))\n            continue;\n          usingSizeSpecificSiteID = true;\n        }\n\n        if (bid.params.timeout && typeof cygnus_index_args.timeout === 'undefined') {\n          cygnus_index_args.timeout = bid.params.timeout;\n        }\n\n\n        var siteID = Number(bid.params.siteID);\n        if (typeof siteID !== \"number\" || siteID % 1 != 0 || siteID <= 0) {\n          utils.logMessage(ADAPTER_NAME + \" slot excluded from request due to invalid siteID\");\n          continue;\n        }\n        if (siteID && typeof cygnus_index_args.siteID === 'undefined') {\n          cygnus_index_args.siteID = siteID;\n        }\n\n        if (utils.hasValidBidRequest(bid.params, requiredParams, ADAPTER_NAME)) {\n          firstAdUnitCode = bid.placementCode;\n          var slotID = bid.params[requiredParams[0]];\n          if ( typeof slotID !== 'string' && typeof slotID !== 'number' ){\n            utils.logError(ADAPTER_NAME + \" bid contains invalid slot ID from \" + bid.placementCode + \". Discarding slot\");\n            continue\n          }\n\n          sizeID++;\n          var size = {\n            width: bid.sizes[j][0],\n            height: bid.sizes[j][1]\n          };\n\n          var slotName = usingSizeSpecificSiteID ? String(slotID) : slotID + '_' + sizeID;\n          slotIdMap[slotName] = bid;\n\n          //Doesn't need the if(primary_request) conditional since we are using the mergeSlotInto function which is safe\n          cygnus_index_args.slots = mergeSlotInto({\n            id: slotName,\n            width: size.width,\n            height: size.height,\n            siteID: siteID || cygnus_index_args.siteID\n          }, cygnus_index_args.slots);\n\n          if (bid.params.tier2SiteID) {\n            var tier2SiteID = Number(bid.params.tier2SiteID);\n            if (typeof tier2SiteID !== 'undefined' && !tier2SiteID) {\n              continue;\n            }\n\n            cygnus_index_args.slots = mergeSlotInto({\n              id: 'T1_' + slotName,\n              width: size.width,\n              height: size.height,\n              siteID: tier2SiteID\n            }, cygnus_index_args.slots);\n          }\n\n          if (bid.params.tier3SiteID) {\n            var tier3SiteID = Number(bid.params.tier3SiteID);\n            if (typeof tier3SiteID !== 'undefined' && !tier3SiteID) {\n              continue;\n            }\n\n            cygnus_index_args.slots = mergeSlotInto({\n              id: 'T2_' + slotName,\n              width: size.width,\n              height: size.height,\n              siteID: tier3SiteID\n            }, cygnus_index_args.slots);\n          }\n        }\n      }\n    }\n\n    if (cygnus_index_args.slots.length > 20) {\n      utils.logError('Too many unique sizes on slots, will use the first 20.', ADAPTER_NAME);\n    }\n\n    //bidmanager.setExpectedBidsCount(ADAPTER_CODE, expectedBids);\n    adloader.loadScript(cygnus_index_start());\n\n    var responded = false;\n\n    // Handle response\n    window.cygnus_index_ready_state = function () {\n      if (responded) {\n        return;\n      }\n      responded = true;\n\n      try {\n        var indexObj = _IndexRequestData.targetIDToBid;\n        var lookupObj = cygnus_index_args;\n\n        // Grab all the bids for each slot\n        for (var adSlotId in slotIdMap) {\n          var bidObj = slotIdMap[adSlotId];\n          var adUnitCode = bidObj.placementCode;\n\n          var bids = [];\n\n          // Grab the bid for current slot\n          for (var cpmAndSlotId in indexObj) {\n            var match = /^(T\\d_)?(.+)_(\\d+)$/.exec(cpmAndSlotId);\n            // if parse fail, move to next bid\n            if (!(match)){\n              utils.logError(\"Unable to parse \" + cpmAndSlotId + \", skipping slot\", ADAPTER_NAME);\n              continue;\n            }\n            var tier = match[1] || '';\n            var slotID = match[2];\n            var currentCPM = match[3];\n\n            var slotObj = getSlotObj(cygnus_index_args, tier + slotID);\n            // Bid is for the current slot\n            if (slotID === adSlotId) {\n              var bid = bidfactory.createBid(1);\n              bid.cpm = currentCPM / 100;\n              bid.ad = indexObj[cpmAndSlotId][0];\n              bid.bidderCode = ADAPTER_CODE;\n              bid.width = slotObj.width;\n              bid.height = slotObj.height;\n              bid.siteID = slotObj.siteID;\n              if ( typeof _IndexRequestData.targetIDToResp === 'object' && typeof _IndexRequestData.targetIDToResp[cpmAndSlotId] === 'object' && typeof _IndexRequestData.targetIDToResp[cpmAndSlotId].dealID !== 'undefined' ) {\n                if (typeof _IndexRequestData.targetAggregate['private'][adUnitCode] === 'undefined')\n                  _IndexRequestData.targetAggregate['private'][adUnitCode] = [];\n                bid.dealId = _IndexRequestData.targetIDToResp[cpmAndSlotId].dealID;\n                _IndexRequestData.targetAggregate['private'][adUnitCode].push( slotID + \"_\" + _IndexRequestData.targetIDToResp[cpmAndSlotId].dealID );\n              } else {\n                if (typeof _IndexRequestData.targetAggregate['open'][adUnitCode] === 'undefined')\n                  _IndexRequestData.targetAggregate['open'][adUnitCode] = [];\n                _IndexRequestData.targetAggregate['open'][adUnitCode].push( slotID + \"_\" + currentCPM );\n              }\n              bids.push(bid);\n            }\n          }\n\n          var currentBid = undefined;\n\n          if (bids.length > 0) {\n            // Add all bid responses\n            for (var i = 0; i < bids.length; i++) {\n              bidmanager.addBidResponse(adUnitCode, bids[i]);\n            }\n          // No bids for expected bid, pass bid\n          } else {\n            var bid = bidfactory.createBid(2);\n            bid.bidderCode = ADAPTER_CODE;\n            currentBid = bid;\n            bidmanager.addBidResponse(adUnitCode, currentBid);\n          }\n\n        }\n      } catch (e) {\n        utils.logError('Error calling index adapter', ADAPTER_NAME, e);\n        logErrorBidResponse();\n      }\n      finally {\n        // ensure that previous targeting mapping is cleared\n        _IndexRequestData.targetIDToBid = {};\n      }\n\n      //slotIdMap is used to determine which slots will be bid on in a given request.\n      //Therefore it needs to be blanked after the request is handled, else we will submit 'bids' for the wrong ads.\n      slotIdMap={};\n    };\n  }\n\n  /*\n  Function in order to add a slot into the list if it hasn't been created yet, else it returns the same list.\n  */\n  function mergeSlotInto(slot,slotList){\n    for(var i = 0; i < slotList.length; i++){\n      if(slot.id === slotList[i].id){\n        return slotList;\n      }\n    }\n    slotList.push(slot);\n    return slotList;\n  }\n\n  function getSlotObj(obj, id) {\n    var arr = obj.slots;\n    var returnObj = {};\n    utils._each(arr, function (value) {\n      if (value.id === id) {\n        returnObj = value;\n      }\n    });\n\n    return returnObj;\n  }\n\n  function logErrorBidResponse() {\n    //no bid response\n    var bid = bidfactory.createBid(2);\n    bid.bidderCode = ADAPTER_CODE;\n\n    //log error to first add unit\n    bidmanager.addBidResponse(firstAdUnitCode, bid);\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = IndexExchangeAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/indexExchange.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nfunction _qs(key, value) {\n  return encodeURIComponent(key) + '=' + encodeURIComponent(value);\n}\n\nfunction _makeBidResponse(placementCode, bid) {\n  var bidResponse = bidfactory.createBid(bid !== undefined ? 1 : 2);\n  bidResponse.bidderCode = 'kruxlink';\n  if (bid !== undefined) {\n    bidResponse.cpm = bid.price;\n    bidResponse.ad = bid.adm;\n    bidResponse.width = bid.w;\n    bidResponse.height = bid.h;\n  }\n  bidmanager.addBidResponse(placementCode, bidResponse);\n}\n\nfunction _makeCallback(id, placements) {\n  var callback = '_kruxlink_' + id;\n  pbjs[callback] = function(response) {\n    // Clean up our callback\n    delete pbjs[callback];\n\n    // Add in the bid respones\n    if (response.seatbid !== undefined) {\n      for (var i = 0; i < response.seatbid.length; i++) {\n        var seatbid = response.seatbid[i];\n        if (seatbid.bid !== undefined) {\n          for (var j = 0; j < seatbid.bid.length; j++) {\n            var bid = seatbid.bid[j];\n            if (bid.impid !== undefined) {\n              _makeBidResponse(placements[bid.impid], bid);\n              delete placements[bid.impid];\n            }\n          }\n        }\n      }\n    }\n\n    // Add any no-bids remaining\n    for (var impid in placements) {\n      if (placements.hasOwnProperty(impid)) {\n        _makeBidResponse(placements[impid]);\n      }\n    }\n  };\n\n  return 'pbjs.' + callback;\n}\n\nfunction _callBids(params) {\n  var impids = [];\n  var placements = {};\n\n  var bids = params.bids || [];\n  for (var i = 0; i < bids.length; i++) {\n    var bidRequest = bids[i];\n    var bidRequestParams = bidRequest.params || {};\n    var impid = bidRequestParams.impid;\n    placements[impid] = bidRequest.placementCode;\n\n    impids.push(impid);\n  }\n\n  var callback = _makeCallback(params.bidderRequestId, placements);\n  var qs = [\n    _qs('id', params.bidderRequestId),\n    _qs('u', window.location.href),\n    _qs('impid', impids.join(',')),\n    _qs('calltype', 'pbd'),\n    _qs('callback', callback)\n  ];\n  var url = 'https://link.krxd.net/hb?' + qs.join('&');\n\n  adloader.loadScript(url);\n}\n\nmodule.exports = function KruxAdapter() {\n  return {\n    callBids: _callBids\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/kruxlink.js","/*jshint loopfunc: true */\n\nimport { STATUS } from 'src/constants';\n\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nvar GetIntentAdapter = function GetIntentAdapter() {\n  var headerBiddingStaticJS = window.location.protocol + '//cdn.adhigh.net/adserver/hb.js';\n\n  function _callBids(params) {\n    if (typeof window.gi_hb === 'undefined') {\n      adloader.loadScript(headerBiddingStaticJS, function() {\n        bid(params);\n      }, true);\n    } else {\n      bid(params);\n    }\n  }\n\n  function addOptional(params, request, props) {\n    for (var i = 0; i < props.length; i++) {\n      if (params.hasOwnProperty(props[i])) {\n        request[props[i]] = params[props[i]];\n      }\n    }\n  }\n\n  function bid(params) {\n    var bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      var bidRequest = bids[i];\n      var request = {\n        pid: bidRequest.params.pid, // required\n        tid: bidRequest.params.tid, // required\n        known: bidRequest.params.known || 1,\n        is_video: bidRequest.mediaType === 'video',\n        video: bidRequest.params.video || {},\n        size: bidRequest.sizes[0].join(\"x\"),\n      };\n      addOptional(bidRequest.params, request, ['cur', 'floor']);\n      (function (r, br) {\n        window.gi_hb.makeBid(r, function(bidResponse) {\n          if (bidResponse.no_bid === 1) {\n            var nobid = bidfactory.createBid(STATUS.NO_BID);\n            nobid.bidderCode = br.bidder;\n            bidmanager.addBidResponse(br.placementCode, nobid);\n          } else {\n            var bid = bidfactory.createBid(STATUS.GOOD);\n            var size = bidResponse.size.split('x');\n            bid.bidderCode = br.bidder;\n            bid.cpm = bidResponse.cpm;\n            bid.width = size[0];\n            bid.height = size[1];\n            if (br.mediaType === 'video') {\n              bid.vastUrl = bidResponse.vast_url;\n              bid.descriptionUrl = bidResponse.vast_url;\n            } else {\n              bid.ad = bidResponse.ad;\n            }\n            bidmanager.addBidResponse(br.placementCode, bid);\n          }\n        });\n      })(request, bidRequest);\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = GetIntentAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/getintent.js","import Adapter from 'src/adapters/adapter';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\nimport { STATUS } from 'src/constants';\n\nconst ENDPOINT = '//bidder.komoona.com/v1/GetSBids';\n\nfunction KomoonaAdapter() {\n\n  let baseAdapter = Adapter.createNew('komoona');\n  let bidRequests = {};\n\n  /* Prebid executes this function when the page asks to send out bid requests */\n  baseAdapter.callBids = function(bidRequest) {\n    const bids = bidRequest.bids || [];\n    const tags = bids\n      .filter(bid => valid(bid))\n      .map(bid => {\n        // map request id to bid object to retrieve adUnit code in callback\n        bidRequests[bid.bidId] = bid;\n\n        let tag = {};\n        tag.sizes = bid.sizes;\n        tag.uuid = bid.bidId;\n        tag.placementid = bid.params.placementId;\n        tag.hbid = bid.params.hbid;\n\n        return tag;\n      });\n\n    if (!utils.isEmpty(tags)) {\n      const payload = JSON.stringify({bids: [...tags]});\n\n      ajax(ENDPOINT, handleResponse, payload, {\n        contentType: 'text/plain',\n        withCredentials : true\n      });\n    }\n  };\n\n  /* Notify Prebid of bid responses so bids can get in the auction */\n  function handleResponse(response) {\n    let parsed;\n\n    try {\n      parsed = JSON.parse(response);\n    } catch (error) {\n      utils.logError(error);\n    }\n\n    if (!parsed || parsed.error) {\n      let errorMessage = `in response for ${baseAdapter.getBidderCode()} adapter`;\n      if (parsed && parsed.error) {errorMessage += `: ${parsed.error}`;}\n      utils.logError(errorMessage);\n\n      // signal this response is complete\n      Object.keys(bidRequests)\n        .map(bidId => bidRequests[bidId].placementCode)\n        .forEach(placementCode => {\n          bidmanager.addBidResponse(placementCode, createBid(STATUS.NO_BID));\n        });\n\n      return;\n    }\n\n    parsed.bids.forEach(tag => {\n      let status;\n      if (tag.cpm > 0 && tag.creative) {\n        status = STATUS.GOOD;\n      } else {\n        status = STATUS.NO_BID;\n      }\n\n      tag.bidId = tag.uuid;  // bidfactory looks for bidId on requested bid\n      const bid = createBid(status, tag);\n      const placement = bidRequests[bid.adId].placementCode;\n\n      bidmanager.addBidResponse(placement, bid);\n    });\n  }\n\n  /* Check that a bid has required paramters */\n  function valid(bid) {\n    if (bid.params.placementId && bid.params.hbid) {\n      return bid;\n    } else {\n      utils.logError('bid requires placementId and hbid params');\n    }\n  }\n\n  /* Create and return a bid object based on status and tag */\n  function createBid(status, tag) {\n    let bid = bidfactory.createBid(status, tag);\n    bid.code = baseAdapter.getBidderCode();\n    bid.bidderCode = baseAdapter.getBidderCode();\n\n    if (status === STATUS.GOOD) {\n      bid.cpm = tag.cpm;\n      bid.width = tag.width;\n      bid.height = tag.height;\n      bid.ad = tag.creative;\n    }\n\n    return bid;\n  }\n\n  return {\n    createNew: KomoonaAdapter.createNew,\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n  };\n}\n\nKomoonaAdapter.createNew = function() {\n  return new KomoonaAdapter();\n};\n\nmodule.exports = KomoonaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/komoona.js","const bidfactory = require('../bidfactory.js');\nconst bidmanager = require('../bidmanager');\nconst utils = require('../utils.js');\nconst adloader = require('../adloader');\n\nconst LifestreetAdapter = function LifestreetAdapter() {\n  const BIDDER_CODE = 'lifestreet';\n  const ADAPTER_VERSION = 'prebidJS-1.0';\n  const SLOTS_LOAD_MAP = {};\n  const PREBID_REQUEST_MESSAGE = 'LSMPrebid Request';\n  const PREBID_RESPONSE_MESSAGE = 'LSMPrebid Response';\n\n  function _callBids(params) {\n    utils._each(params.bids, bid => {\n      const jstagUrl = bid.params.jstag_url;\n      const slot = bid.params.slot;\n      const adkey = bid.params.adkey;\n      const adSize = bid.params.ad_size;\n      let timeout = 700;\n      if (bid.params.timeout) {\n        timeout = bid.params.timeout;\n      }\n      let shouldRequest = false;\n      if (jstagUrl && jstagUrl.length > 0 && slot && slot.length > 0 &&\n          adkey && adkey.length > 0 && adSize && adSize.length > 0) {\n        let adSizeArray = adSize.split('x');\n        for (let i = 0; i < adSizeArray.length; ++i) {\n          adSizeArray[i] = +adSizeArray[i];\n        }\n        if (bid.sizes && (bid.sizes instanceof Array) && bid.sizes.length > 0 && adSizeArray.length > 1) {\n          bid.sizes = !(bid.sizes[0] instanceof Array) ? [ bid.sizes ] : bid.sizes;\n          for (let i = 0; i < bid.sizes.length; ++i) {\n            let size = bid.sizes[i];\n            if (size.length > 1) {\n              if (size[0] === adSizeArray[0] && size[1] === adSizeArray[1]) {\n                shouldRequest = true;\n                break;\n              }\n            }\n          }\n        } else {\n          shouldRequest = true;\n        }\n      }\n      if (shouldRequest) {\n        _callJSTag(bid, jstagUrl, timeout);\n      } else {\n        _addSlotBidResponse(bid, 0, null, 0, 0);\n      }\n    });\n  }\n\n  function _callJSTag(bid, jstagUrl, timeout) {\n    adloader.loadScript(jstagUrl, () => {\n      /*global LSM_Slot */\n      if (LSM_Slot && typeof LSM_Slot === 'function') {\n        let slotTagParams = {\n          _preload: 'wait',\n          _hb_request: ADAPTER_VERSION,\n          _timeout: timeout,\n          _onload: (slot, action, cpm, width, height) => {\n            if (slot.state() !== 'error') {\n              let slotName = slot.getSlotObjectName();\n              pbjs[slotName] = slot;\n              if (slotName && !SLOTS_LOAD_MAP[slotName]) {\n                SLOTS_LOAD_MAP[slotName] = true;\n                let ad = _constructLSMAd(jstagUrl, slotName);\n                _addSlotBidResponse(bid, cpm, ad, width, height);\n              } else {\n                slot.show();\n              }\n            } else {\n              _addSlotBidResponse(bid, 0, null, 0, 0);\n            }\n          }\n        };\n        for (let property in bid.params) {\n          if (property === 'jstag_url' || property === 'timeout') {\n            continue;\n          }\n          if (bid.params.hasOwnProperty(property)) {\n            slotTagParams[property] = bid.params[property];\n          }\n        }\n        /*jshint newcap: false */\n        LSM_Slot(slotTagParams);\n        window.addEventListener('message', (ev) => {\n          let key = ev.message ? 'message' : 'data';\n          let object = {};\n          try {\n            object = JSON.parse(ev[key]);\n          } catch (e) {\n            return;\n          }\n          if (object.message && object.message === PREBID_REQUEST_MESSAGE && object.slotName &&\n              window.pbjs[object.slotName]) {\n            ev.source.postMessage(JSON.stringify({\n              message: PREBID_RESPONSE_MESSAGE,\n              slotObject: window.pbjs[object.slotName]\n            }), '*');\n            window.pbjs[object.slotName].destroy();\n            window.pbjs[object.slotName] = null;\n          }\n        }, false);\n      } else {\n        _addSlotBidResponse(bid, 0, null, 0, 0);\n      }\n    });\n  }\n\n  function _addSlotBidResponse(bid, cpm, ad, width, height) {\n    let hasResponse = cpm && ad && ad.length > 0;\n    let bidObject = bidfactory.createBid(hasResponse ? 1 : 2, bid);\n    bidObject.bidderCode = BIDDER_CODE;\n    if (hasResponse) {\n      bidObject.cpm = cpm;\n      bidObject.ad = ad;\n      bidObject.width = width;\n      bidObject.height = height;\n    }\n    bidmanager.addBidResponse(bid.placementCode, bidObject);\n  }\n\n  function _constructLSMAd(jsTagUrl, slotName) {\n    if (jsTagUrl && slotName) {\n      return `<div id=\"LSM_AD\"></div>\n             <script type=\"text/javascript\" src='` + jsTagUrl + `'></script>\n             <script>\n              function receivedLSMMessage(ev) {\n                var key = ev.message ? 'message' : 'data';\n                var object = {};\n                try {\n                  object = JSON.parse(ev[key]);\n                } catch (e) {\n                  return;\n                }\n                if (object.message === '` + PREBID_RESPONSE_MESSAGE + `' && object.slotObject) {\n                  var slot  = object.slotObject;\n                  slot.__proto__ = slotapi.Slot.prototype;\n                  slot.getProperties()['_onload'] = function(slot) {\n                    if (slot.state() !== 'error') {\n                      slot.show();\n                    }\n                  };\n                  window[slot.getSlotObjectName()] = slot;\n                  slot.showInContainer(document.getElementById(\"LSM_AD\"));\n                }\n              }\n              window.addEventListener('message', receivedLSMMessage, false);\n              window.parent.postMessage(JSON.stringify({\n                message: '` + PREBID_REQUEST_MESSAGE + `',\n                slotName: '` + slotName +`'\n              }), '*');\n            </script>`;\n    }\n    return null;\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = LifestreetAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/lifestreet.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\nvar constants = require('../constants.json');\n\nmodule.exports = function () {\n  function inIframe() {\n    try {\n      return window.self !== window.top && !window.mantis_link;\n    } catch (e) {\n      return true;\n    }\n  }\n\n  function isDesktop(ignoreTouch) {\n    var scope = function (win) {\n      var width = win.innerWidth || win.document.documentElement.clientWidth || win.document.body.clientWidth;\n      var supportsTouch = !ignoreTouch && ('ontouchstart' in window || navigator.msMaxTouchPoints);\n\n      return !supportsTouch && (!width || width >= (window.mantis_breakpoint || 768));\n    };\n\n    if (inIframe()) {\n      try {\n        return scope(window.top);\n      } catch (ex) {\n      }\n    }\n\n    return scope(window);\n  }\n\n  function isSendable(val) {\n    if (val === null || val === undefined) {\n      return false;\n    }\n\n    if (typeof val === 'string') {\n      return !(!val || /^\\s*$/.test(val));\n    }\n\n    if (typeof val === 'number') {\n      return !isNaN(val);\n    }\n\n    return true;\n  }\n\n  function isObject(value) {\n    return Object.prototype.toString.call(value) === '[object Object]';\n  }\n\n  function isAmp() {\n    return typeof window.context === \"object\" && (window.context.tagName === \"AMP-AD\" || window.context.tagName === \"AMP-EMBED\");\n  }\n\n  function isSecure() {\n    return document.location.protocol === \"https:\";\n  }\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  function jsonp(callback) {\n    if (!window.mantis_jsonp) {\n      window.mantis_jsonp = [];\n    }\n\n    window.mantis_jsonp.push(callback);\n\n    return 'mantis_jsonp[' + (window.mantis_jsonp.length - 1) + ']';\n  }\n\n  function jsonToQuery(data, chain, form) {\n    if (!data) {\n      return null;\n    }\n\n    var parts = form || [];\n\n    for (var key in data) {\n      var queryKey = key;\n\n      if (chain) {\n        queryKey = chain + '[' + key + ']';\n      }\n\n      var val = data[key];\n\n      if (isArray(val)) {\n        for (var index = 0; index < val.length; index++) {\n          var akey = queryKey + '[' + index + ']';\n          var aval = val[index];\n\n          if (isObject(aval)) {\n            jsonToQuery(aval, akey, parts);\n          } else if (isSendable(aval)) {\n            parts.push(akey + '=' + encodeURIComponent(aval));\n          }\n        }\n      } else if (isObject(val)) {\n        jsonToQuery(val, queryKey, parts);\n      } else if (isSendable(val)) {\n        parts.push(queryKey + '=' + encodeURIComponent(val));\n      }\n    }\n\n    return parts.join('&');\n  }\n\n\n  function buildMantisUrl(path, data, domain) {\n    var params = {\n      referrer: document.referrer,\n      tz: new Date().getTimezoneOffset(),\n      buster: new Date().getTime(),\n      secure: isSecure()\n    };\n\n    if (!inIframe() || isAmp()) {\n      params.mobile = !isAmp() && isDesktop(true) ? 'false' : 'true';\n    }\n\n    if (window.mantis_uuid) {\n      params.uuid = window.mantis_uuid;\n    } else if (window.localStorage) {\n      var localUuid = window.localStorage.getItem('mantis:uuid');\n\n      if (localUuid) {\n        params.uuid = localUuid;\n      }\n    }\n\n    if (!inIframe()) {\n      try {\n        params.title = window.top.document.title;\n        params.referrer = window.top.document.referrer;\n        params.url = window.top.document.location.href;\n      } catch (ex) {\n\n      }\n    } else {\n      params.iframe = true;\n    }\n\n    if (isAmp()) {\n      if (!params.url && window.context.canonicalUrl) {\n        params.url = window.context.canonicalUrl;\n      }\n\n      if (!params.url && window.context.location) {\n        params.url = window.context.location.href;\n      }\n\n      if (!params.referrer && window.context.referrer) {\n        params.referrer = window.context.referrer;\n      }\n    }\n\n    Object.keys(data || {}).forEach(function (key) {\n      params[key] = data[key];\n    });\n\n    var query = jsonToQuery(params);\n\n    return (window.mantis_domain === undefined ? domain || 'https://mantodea.mantisadnetwork.com' : window.mantis_domain) + path + '?' + query;\n  }\n\n  var Prebid = function (bidfactory, bidmanager, adloader, constants) {\n    return {\n      callBids: function (params) {\n        var property = null;\n\n        params.bids.some(function (bid) {\n          if (bid.params.property) {\n            property = bid.params.property;\n\n            return true;\n          }\n        });\n\n        var url = {\n          jsonp: jsonp(function (resp) {\n            params.bids.forEach(function (bid) {\n              var ad = resp.ads[bid.bidId];\n\n              var bidObject;\n\n              if (ad) {\n                bidObject = bidfactory.createBid(constants.STATUS.GOOD);\n                bidObject.bidderCode = 'mantis';\n                bidObject.cpm = ad.cpm;\n                bidObject.ad = ad.html;\n                bidObject.width = ad.width;\n                bidObject.height = ad.height;\n              } else {\n                bidObject = bidfactory.createBid(constants.STATUS.NO_BID);\n                bidObject.bidderCode = 'mantis';\n              }\n\n              bidmanager.addBidResponse(bid.placementCode, bidObject);\n            });\n          }),\n          property: property,\n          bids: params.bids.map(function (bid) {\n            return {\n              bidId: bid.bidId,\n              sizes: bid.sizes.map(function (size) {\n                return {width: size[0], height: size[1]};\n              })\n            };\n          }),\n          version: 1\n        };\n\n        adloader.loadScript(buildMantisUrl('/website/prebid', url));\n      }\n    };\n  };\n\n  return new Prebid(bidfactory, bidmanager, adloader, constants);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/mantis.js","const bidfactory = require('../bidfactory.js');\nconst bidmanager = require('../bidmanager.js');\nconst adloader = require('../adloader');\nconst CONSTANTS = require('../constants.json');\nconst utils = require('../utils.js');\n\nconst OpenxAdapter = function OpenxAdapter() {\n  const BIDDER_CODE = 'openx';\n  const BIDDER_CONFIG = 'hb_pb';\n  let startTime;\n\n  let pdNode = null;\n\n  pbjs.oxARJResponse = function (oxResponseObj) {\n    let adUnits = oxResponseObj.ads.ad;\n    if (oxResponseObj.ads && oxResponseObj.ads.pixels) {\n      makePDCall(oxResponseObj.ads.pixels);\n    }\n\n    if (!adUnits) {\n      adUnits = [];\n    }\n\n    let bids = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'openx').bids;\n    for (let i = 0; i < bids.length; i++) {\n      let bid = bids[i];\n      let auid = null;\n      let adUnit = null;\n      // find the adunit in the response\n      for (let j = 0; j < adUnits.length; j++) {\n        adUnit = adUnits[j];\n        if (String(bid.params.unit) === String(adUnit.adunitid) && adUnitHasValidSizeFromBid(adUnit,bid) && !adUnit.used) {\n          auid = adUnit.adunitid;\n          break;\n        }\n      }\n\n      let beaconParams = {\n        bd: +(new Date()) - startTime,\n        br: '0', // maybe 0, t, or p\n        bt: pbjs.cbTimeout || pbjs.bidderTimeout , // For the timeout per bid request\n        bs: window.location.hostname\n      };\n\n      // no fill :(\n      if (!auid || !adUnit.pub_rev) {\n        addBidResponse(null, bid);\n        continue;\n      }\n      adUnit.used = true;\n\n      beaconParams.br = beaconParams.bt < beaconParams.bd ? 't' : 'p';\n      beaconParams.bp = adUnit.pub_rev;\n      beaconParams.ts = adUnit.ts;\n      addBidResponse(adUnit, bid);\n      buildBoPixel(adUnit.creative[0], beaconParams);\n    }\n  };\n\n  function getViewportDimensions(isIfr) {\n    let width,\n      height,\n      tWin = window,\n      tDoc = document,\n      docEl = tDoc.documentElement,\n      body;\n\n    if (isIfr) {\n      try {\n        tWin = window.top;\n        tDoc = window.top.document;\n      }\n      catch (e) {\n        return;\n      }\n      docEl = tDoc.documentElement;\n      body = tDoc.body;\n\n      width = tWin.innerWidth || docEl.clientWidth || body.clientWidth;\n      height = tWin.innerHeight || docEl.clientHeight || body.clientHeight;\n    } else {\n      docEl = tDoc.documentElement;\n      width = tWin.innerWidth || docEl.clientWidth;\n      height = tWin.innerHeight || docEl.clientHeight;\n    }\n\n    return `${width}x${height}`;\n  }\n\n  function makePDCall(pixelsUrl) {\n    let pdFrame = utils.createInvisibleIframe();\n    let name = 'openx-pd';\n    pdFrame.setAttribute(\"id\", name);\n    pdFrame.setAttribute(\"name\", name);\n    let rootNode = document.body;\n\n    if (!rootNode) {\n      return;\n    }\n\n    pdFrame.src = pixelsUrl;\n\n    if (pdNode) {\n      pdNode.parentNode.replaceChild(pdFrame, pdNode);\n      pdNode = pdFrame;\n    } else {\n      pdNode = rootNode.appendChild(pdFrame);\n    }\n  }\n\n  function addBidResponse(adUnit, bid) {\n    let bidResponse = bidfactory.createBid(adUnit ? CONSTANTS.STATUS.GOOD : CONSTANTS.STATUS.NO_BID, bid);\n    bidResponse.bidderCode = BIDDER_CODE;\n\n    if (adUnit) {\n      let creative = adUnit.creative[0];\n      bidResponse.ad = adUnit.html;\n      bidResponse.cpm = Number(adUnit.pub_rev) / 1000;\n      bidResponse.ad_id = adUnit.adid;\n      if (adUnit.deal_id) {\n        bidResponse.dealId = adUnit.deal_id;\n      }\n      if (creative) {\n        bidResponse.width = creative.width;\n        bidResponse.height = creative.height;\n      }\n    }\n    bidmanager.addBidResponse(bid.placementCode, bidResponse);\n  }\n\n  function buildQueryStringFromParams(params) {\n    for (let key in params) {\n      if (params.hasOwnProperty(key)) {\n        if (!params[key]) {\n          delete params[key];\n        }\n      }\n    }\n    return utils._map(Object.keys(params), key => `${key}=${params[key]}`)\n      .join('&');\n  }\n\n  function buildBoPixel(creative, params) {\n    let img = new Image();\n    let recordPixel = creative.tracking.impression;\n    let boBase = recordPixel.match(/([^?]+\\/)ri\\?/);\n\n    if (boBase) {\n      img.src = `${boBase[1]}bo?${buildQueryStringFromParams(params)}`;\n    }\n  }\n\n  function adUnitHasValidSizeFromBid(adUnit, bid) {\n    let sizes = utils.parseSizesInput(bid.sizes);\n    let sizeLength = sizes && sizes.length || 0;\n    let found = false;\n    let creative = adUnit.creative && adUnit.creative[0];\n    let creative_size = String(creative.width) + 'x' + String(creative.height);\n\n    if (utils.isArray(sizes)) {\n      for (let i = 0; i < sizeLength; i++) {\n        let size = sizes[i];\n        if (String(size) === String(creative_size)) {\n          found = true;\n          break;\n        }\n      }\n    }\n    return found;\n  }\n\n  function buildRequest(bids, params, delDomain) {\n    if (!utils.isArray(bids)) {\n      return;\n    }\n\n    params.auid = utils._map(bids, bid => bid.params.unit).join('%2C');\n    params.aus = utils._map(bids, bid => {\n      return utils.parseSizesInput(bid.sizes).join(',');\n    }).join('|');\n\n    bids.forEach(function (bid) {\n      for (let customParam in bid.params.customParams) {\n        if (bid.params.customParams.hasOwnProperty(customParam)) {\n          params[\"c.\" + customParam] = bid.params.customParams[customParam];\n        }\n      }\n    });\n\n    params.callback = 'window.pbjs.oxARJResponse';\n    let queryString = buildQueryStringFromParams(params);\n\n    adloader.loadScript(`//${delDomain}/w/1.0/arj?${queryString}`);\n  }\n\n  function callBids(params) {\n    let isIfr,\n      bids = params.bids || [],\n      currentURL = (window.parent !== window) ? document.referrer : window.location.href;\n    currentURL = currentURL && encodeURIComponent(currentURL);\n    try {\n      isIfr = window.self !== window.top;\n    }\n    catch (e) {\n      isIfr = false;\n    }\n    if (bids.length === 0) {\n      return;\n    }\n\n    let delDomain = bids[0].params.delDomain;\n\n    startTime = new Date(params.start);\n\n    buildRequest(bids, {\n      ju: currentURL,\n      jr: currentURL,\n      ch: document.charSet || document.characterSet,\n      res: `${screen.width}x${screen.height}x${screen.colorDepth}`,\n      ifr: isIfr,\n      tz: startTime.getTimezoneOffset(),\n      tws: getViewportDimensions(isIfr),\n      ee: 'api_sync_write',\n      ef: 'bt%2Cdb',\n      be: 1,\n      bc: BIDDER_CONFIG\n    },\n      delDomain);\n  }\n\n  return {\n    callBids: callBids\n  };\n};\n\nmodule.exports = OpenxAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/openx.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\nvar adloader = require('../adloader.js');\nvar Adapter = require('./adapter.js');\n\nvar PiximediaAdapter = function PiximediaAdapter() {\n  var PREBID_URL = '//static.adserver.pm/prebid';\n  var baseAdapter = Adapter.createNew('piximedia');\n  var bidStash = {};\n\n  var tryAppendPixiQueryString = function(url, name, value) {\n    return url + \"/\" + encodeURIComponent(name) + \"=\" + value;\n  };\n\n  baseAdapter.callBids = function callBidsPiximedia(params) {\n    utils._each(params.bids, function(bid) {\n\n      // valid bids must include a siteId and an placementId\n      if (bid.placementCode && bid.sizes && bid.params && bid.params.siteId && bid.params.placementId) {\n\n        var sizes = bid.params.hasOwnProperty('sizes')? bid.params.sizes: bid.sizes;\n        sizes = utils.parseSizesInput(sizes);\n\n        var cbid = utils.getUniqueIdentifierStr();\n\n        // we allow overriding the URL in the params\n        var url = bid.params.prebidUrl || PREBID_URL;\n\n        // params are passed to the Piximedia endpoint, including custom params\n        for(var key in bid.params) {\n          /* istanbul ignore else */\n          if(bid.params.hasOwnProperty(key)) {\n            var value = bid.params[key];\n            switch(key) {\n              case \"siteId\":\n                url = tryAppendPixiQueryString(url, 'site_id', encodeURIComponent(value));\n                break;\n\n              case \"placementId\":\n                url = tryAppendPixiQueryString(url, 'placement_id', encodeURIComponent(value));\n                break;\n\n              case \"dealId\":\n                url = tryAppendPixiQueryString(url, 'l_id', encodeURIComponent(value));\n                break;\n\n              case \"sizes\":\n              case \"prebidUrl\":\n                break;\n\n              default:\n                if(typeof value === \"function\") {\n                  url = tryAppendPixiQueryString(url, key, encodeURIComponent((value(baseAdapter, params, bid) || \"\").toString()));\n                } else {\n                  url = tryAppendPixiQueryString(url, key, encodeURIComponent((value || \"\").toString()));\n                }\n                break;\n            }\n          }\n        }\n\n        url = tryAppendPixiQueryString(url, 'jsonp', 'pbjs.handlePiximediaCallback');\n        url = tryAppendPixiQueryString(url, 'sizes', encodeURIComponent(sizes.join(\",\")));\n        url = tryAppendPixiQueryString(url, 'cbid', encodeURIComponent(cbid));\n        url = tryAppendPixiQueryString(url, 'rand', String(Math.floor(Math.random() * 1000000000)));\n\n        bidStash[cbid] = {\n          'bidObj': bid,\n          'url': url,\n          'start': new Date().getTime()\n        };\n        utils.logMessage('[Piximedia] Dispatching header Piximedia to URL ' + url);\n        adloader.loadScript(url);\n      }\n    });\n  };\n\n  /*\n   * Piximedia's bidResponse should look like:\n   *\n   * {\n   *   'foundbypm': true,            // a Boolean, indicating if an ad was found\n   *   'currency': 'EUR',        // the currency, as a String\n   *   'cpm': 1.99,              // the win price as a Number, in currency\n   *   'dealId': null,           // or string value of winning deal ID\n   *   'width': 300,             // width in pixels of winning ad\n   *   'height': 250,            // height in pixels of winning ad\n   *   'html': 'tag_here'        // HTML tag to load if we are picked\n   * }\n   *\n   */\n  pbjs.handlePiximediaCallback = function(bidResponse) {\n    if (bidResponse && bidResponse.hasOwnProperty(\"foundbypm\")) {\n      var stash = bidStash[bidResponse.cbid]; // retrieve our stashed data, by using the cbid\n      var bid;\n\n      if (stash) {\n        var bidObj = stash.bidObj;\n        var timelapsed = new Date().getTime();\n        timelapsed = timelapsed - stash.start;\n\n        if (bidResponse.foundbypm && bidResponse.width && bidResponse.height && bidResponse.html && bidResponse.cpm && bidResponse.currency) {\n          \n          /* we have a valid ad to display */\n          bid = bidfactory.createBid(CONSTANTS.STATUS.GOOD);\n          bid.bidderCode = bidObj.bidder;\n          bid.width = bidResponse.width;\n          bid.height = bidResponse.height;\n          bid.ad = bidResponse.html;\n          bid.cpm = bidResponse.cpm;\n          bid.currency = bidResponse.currency;\n\n          if (bidResponse.dealId) {\n            bid.dealId = bidResponse.dealId;\n          } else {\n            bid.dealId = null;\n          }\n\n          bidmanager.addBidResponse(bidObj.placementCode, bid);\n\n          utils.logMessage('[Piximedia] Registered bidresponse from URL ' + stash.url +\n                           ' (time: ' + String(timelapsed) + ')');\n          utils.logMessage('[Piximedia] ======> BID placementCode: ' + bidObj.placementCode +\n                           ' CPM: ' + String(bid.cpm) + ' ' + bid.currency +\n                           ' Format: ' + String(bid.width) + 'x' + String(bid.height));\n        } else {\n\n          /* we have no ads to display */\n          bid = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n          bid.bidderCode = bidObj.bidder;\n          bidmanager.addBidResponse(bidObj.placementCode, bid);\n\n          utils.logMessage('[Piximedia] Registered BLANK bidresponse from URL ' + stash.url +\n                           ' (time: ' + String(timelapsed) + ')');\n          utils.logMessage('[Piximedia] ======> NOBID placementCode: ' + bidObj.placementCode);\n        }\n\n        // We should no longer need this stashed object, so drop reference:\n        bidStash[bidResponse.cbid] = null;\n\n      } else {\n        utils.logMessage(\"[Piximedia] Couldn't find stash for cbid=\" + bidResponse.cbid);\n      }\n    }\n  };\n\n  // return an object with PiximediaAdapter methods\n  return {\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    getBidderCode: baseAdapter.getBidderCode\n  };\n};\n\nmodule.exports = PiximediaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/piximedia.js","var utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\n\n/**\n * Adapter for requesting bids from Pubmatic.\n *\n * @returns {{callBids: _callBids}}\n * @constructor\n */\nvar PubmaticAdapter = function PubmaticAdapter() {\n\n  var bids;\n  var _pm_pub_id;\n  var _pm_optimize_adslots = [];\n  let iframe;\n\n  function _callBids(params) {\n    bids = params.bids;\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i];\n      //bidmanager.pbCallbackMap['' + bid.params.adSlot] = bid;\n      _pm_pub_id = _pm_pub_id || bid.params.publisherId;\n      _pm_optimize_adslots.push(bid.params.adSlot);\n    }\n\n    // Load pubmatic script in an iframe, because they call document.write\n    _getBids();\n  }\n\n  function _getBids() {\n\n\n    //create the iframe\n    iframe = utils.createInvisibleIframe();\n\n    var elToAppend = document.getElementsByTagName('head')[0];\n\n    //insert the iframe into document\n    elToAppend.insertBefore(iframe, elToAppend.firstChild);\n\n    var iframeDoc = utils.getIframeDocument(iframe);\n    iframeDoc.write(_createRequestContent());\n    iframeDoc.close();\n  }\n\n  function _createRequestContent() {\n    var content = '<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"' +\n      ' \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><base target=\"_top\" /><scr' +\n      'ipt>inDapIF=true;</scr' + 'ipt></head>';\n    content += '<body>';\n    content += '<scr' + 'ipt>';\n    content += '' +\n      'window.pm_pub_id  = \"%%PM_PUB_ID%%\";' +\n      'window.pm_optimize_adslots     = [%%PM_OPTIMIZE_ADSLOTS%%];' +\n      'window.pm_async_callback_fn = \"window.parent.pbjs.handlePubmaticCallback\";';\n    content += '</scr' + 'ipt>';\n\n    var map = {};\n    map.PM_PUB_ID = _pm_pub_id;\n    map.PM_OPTIMIZE_ADSLOTS = _pm_optimize_adslots.map(function (adSlot) {\n      return \"'\" + adSlot + \"'\";\n    }).join(',');\n\n    content += '<scr' + 'ipt src=\"https://ads.pubmatic.com/AdServer/js/gshowad.js\"></scr' + 'ipt>';\n    content += '<scr' + 'ipt>';\n    content += '</scr' + 'ipt>';\n    content += '</body></html>';\n    content = utils.replaceTokenInString(content, map, '%%');\n\n    return content;\n  }\n\n  pbjs.handlePubmaticCallback = function () {\n    let bidDetailsMap = {};\n    let progKeyValueMap = {};\n    try {\n      bidDetailsMap = iframe.contentWindow.bidDetailsMap;\n      progKeyValueMap = iframe.contentWindow.progKeyValueMap;\n    }\n    catch(e) {\n      utils.logError(e, 'Error parsing Pubmatic response');\n    }\n\n    var i;\n    var adUnit;\n    var adUnitInfo;\n    var bid;\n    var bidResponseMap = bidDetailsMap || {};\n    var bidInfoMap = progKeyValueMap || {};\n    var dimensions;\n\n    for (i = 0; i < bids.length; i++) {\n      var adResponse;\n      bid = bids[i].params;\n\n      adUnit = bidResponseMap[bid.adSlot] || {};\n\n      // adUnitInfo example: bidstatus=0;bid=0.0000;bidid=39620189@320x50;wdeal=\n\n      // if using DFP GPT, the params string comes in the format:\n      // \"bidstatus;1;bid;5.0000;bidid;hb_test@468x60;wdeal;\"\n      // the code below detects and handles this.\n      if (bidInfoMap[bid.adSlot] && bidInfoMap[bid.adSlot].indexOf('=') === -1) {\n        bidInfoMap[bid.adSlot] = bidInfoMap[bid.adSlot].replace(/([a-z]+);(.[^;]*)/ig, '$1=$2');\n      }\n\n      adUnitInfo = (bidInfoMap[bid.adSlot] || '').split(';').reduce(function (result, pair) {\n        var parts = pair.split('=');\n        result[parts[0]] = parts[1];\n        return result;\n      }, {});\n\n      if (adUnitInfo.bidstatus === '1') {\n        dimensions = adUnitInfo.bidid.split('@')[1].split('x');\n        adResponse = bidfactory.createBid(1);\n        adResponse.bidderCode = 'pubmatic';\n        adResponse.adSlot = bid.adSlot;\n        adResponse.cpm = Number(adUnitInfo.bid);\n        adResponse.ad = unescape(adUnit.creative_tag);  // jshint ignore:line\n        adResponse.ad += utils.createTrackPixelIframeHtml(decodeURIComponent(adUnit.tracking_url));\n        adResponse.width = dimensions[0];\n        adResponse.height = dimensions[1];\n        adResponse.dealId = adUnitInfo.wdeal;\n\n        bidmanager.addBidResponse(bids[i].placementCode, adResponse);\n      } else {\n        // Indicate an ad was not returned\n        adResponse = bidfactory.createBid(2);\n        adResponse.bidderCode = 'pubmatic';\n        bidmanager.addBidResponse(bids[i].placementCode, adResponse);\n      }\n    }\n  };\n\n  return {\n    callBids: _callBids\n  };\n\n};\n\nmodule.exports = PubmaticAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/pubmatic.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\nvar utils = require('../utils.js');\n\nvar PulsePointAdapter = function PulsePointAdapter() {\n\n  var getJsStaticUrl = window.location.protocol + '//tag-st.contextweb.com/getjs.static.js';\n  var bidUrl = window.location.protocol + '//bid.contextweb.com/header/tag';\n\n  function _callBids(params) {\n    if (typeof window.pp === 'undefined') {\n      adloader.loadScript(getJsStaticUrl, function () { bid(params); }, true);\n    } else {\n      bid(params);\n    }\n  }\n\n  function bid(params) {\n    var bids = params.bids;\n    for (var i = 0; i < bids.length; i++) {\n      var bidRequest = bids[i];\n      requestBid(bidRequest);\n    }\n  }\n\n  function requestBid(bidRequest) {\n    try {\n      var ppBidRequest = new window.pp.Ad(bidRequestOptions(bidRequest));\n      ppBidRequest.display();\n    } catch(e) {\n      //register passback on any exceptions while attempting to fetch response.\n      utils.logError('pulsepoint.requestBid', 'ERROR', e);\n      bidResponseAvailable(bidRequest);\n    }\n  }\n\n  function bidRequestOptions(bidRequest) {\n    var callback = bidResponseCallback(bidRequest);\n    var options = {\n      cn: 1,\n      ca: window.pp.requestActions.BID,\n      cu: bidUrl,\n      adUnitId: bidRequest.placementCode,\n      callback: callback\n    };\n    for(var param in bidRequest.params) {\n      if(bidRequest.params.hasOwnProperty(param)) {\n        options[param] = bidRequest.params[param];\n      }\n    }\n    return options;\n  }\n\n  function bidResponseCallback(bid) {\n    return function (bidResponse) {\n      bidResponseAvailable(bid, bidResponse);\n    };\n  }\n\n  function bidResponseAvailable(bidRequest, bidResponse) {\n    if (bidResponse) {\n      var adSize = bidRequest.params.cf.toUpperCase().split('X');\n      var bid = bidfactory.createBid(1, bidRequest);\n      bid.bidderCode = bidRequest.bidder;\n      bid.cpm = bidResponse.bidCpm;\n      bid.ad = bidResponse.html;\n      bid.width = adSize[0];\n      bid.height = adSize[1];\n      bidmanager.addBidResponse(bidRequest.placementCode, bid);\n    } else {\n      var passback = bidfactory.createBid(2, bidRequest);\n      passback.bidderCode = bidRequest.bidder;\n      bidmanager.addBidResponse(bidRequest.placementCode, passback);\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n\n};\n\nmodule.exports = PulsePointAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/pulsepoint.js","import {createBid} from 'src/bidfactory';\nimport {addBidResponse} from 'src/bidmanager';\nimport {logError,getTopWindowLocation} from 'src/utils';\nimport {ajax} from 'src/ajax';\nimport {STATUS} from 'src/constants';\n\nfunction PulsePointLiteAdapter() {\n\n  const bidUrl = window.location.protocol + '//bid.contextweb.com/header/tag?';\n  const ajaxOptions = {\n    method: 'GET',\n    withCredentials: true,\n    contentType: 'text/plain'\n  };\n\n  function _callBids(bidderRequest) {\n    bidderRequest.bids.forEach(bidRequest => {\n      try {\n        var params = Object.assign({}, environment(), bidRequest.params);\n        var url = bidUrl + Object.keys(params).map(k => k + '=' + encodeURIComponent(params[k])).join('&');\n        ajax(url, (bidResponse) => {\n          bidResponseAvailable(bidRequest, bidResponse);\n        }, null, ajaxOptions);\n      } catch(e) {\n        //register passback on any exceptions while attempting to fetch response.\n        logError('pulsepoint.requestBid', 'ERROR', e);\n        bidResponseAvailable(bidRequest);\n      }\n    });\n  }\n\n  function environment() {\n    return {\n      cn: 1,\n      ca: 'BID',\n      tl: 1,\n      'if': 0,\n      cwu: getTopWindowLocation().href,\n      cwr: referrer(),\n      dw: document.documentElement.clientWidth,\n      cxy: document.documentElement.clientWidth + ',' + document.documentElement.clientHeight,\n      tz: new Date().getTimezoneOffset(),\n      ln: (navigator.language || navigator.browserLanguage || navigator.userLanguage || navigator.systemLanguage)\n    };\n  }\n\n  function referrer() {\n    try {\n      return window.top.document.referrer;\n    } catch (e) {\n      return document.referrer;\n    }\n  }\n\n  function bidResponseAvailable(bidRequest, rawResponse) {\n    if (rawResponse) {\n      var bidResponse = parse(rawResponse);\n      if(bidResponse) {\n        var adSize = bidRequest.params.cf.toUpperCase().split('X');\n        var bid = createBid(STATUS.GOOD, bidRequest);\n        bid.bidderCode = bidRequest.bidder;\n        bid.cpm = bidResponse.bidCpm;\n        bid.ad = bidResponse.html;\n        bid.width = adSize[0];\n        bid.height = adSize[1];\n        addBidResponse(bidRequest.placementCode, bid);\n        return;\n      }\n    }\n    var passback = createBid(STATUS.NO_BID, bidRequest);\n    passback.bidderCode = bidRequest.bidder;\n    addBidResponse(bidRequest.placementCode, passback);\n  }\n\n  function parse(rawResponse) {\n    try {\n      return JSON.parse(rawResponse);\n    } catch (ex) {\n      logError('pulsepoint.safeParse', 'ERROR', ex);\n      return null;\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n\n}\n\nmodule.exports = PulsePointLiteAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/pulsepointLite.js","var bidmanager = require('../bidmanager.js'),\n  bidfactory = require('../bidfactory.js'),\n  CONSTANTS = require('../constants.json');\n\nimport {ajax as ajax} from '../ajax';\n\nfunction track(debug) {\n  if(debug === true){\n    //console.log('GA: %s %s %s', p1, p2, p3 || '');\n  }\n}\n\nvar w = (typeof window !== \"undefined\" ? window : {});\nw.trackR1Impression = track;\n  \nmodule.exports = function(bidManager, global, loader){\n\n  var version = \"0.9.0.0\",\n    defaultZone = \"1r\",\n    defaultPath = \"mvo\",\n    debug = false,\n    auctionEnded = false,\n    requestCompleted = false,\n    placementCodes = {};\n    \n  if(typeof global === \"undefined\")\n    global = window;\n      \n  if(typeof bidManager === \"undefined\")\n    bidManager = bidmanager;\n    \n  if(typeof loader === \"undefined\")\n    loader = ajax;\n  \n  function applyMacros(txt, values){\n    return txt.replace(/\\{([^\\}]+)\\}/g, function(match){\n      var v = values[match.replace(/[\\{\\}]/g, \"\").toLowerCase()];\n      if(typeof v !== \"undefined\") return v;\n      return match;\n    });\n  }\n  \n  function load(bidParams, url, callback){\n    loader(url, function(responseText, response){\n      if(response.status === 200)\n        callback(200, \"success\", response.responseText);\n      else\n        callback(-1, \"http error \"+response.status, response.responseText);\n    }, false, {method:\"GET\", withCredentials: true});\n  }\n\n  function flashInstalled(){\n    var n = global.navigator,\n      p = n.plugins,\n      m = n.mimeTypes,\n      t = \"application/x-shockwave-flash\",\n      x = global.ActiveXObject;\n\n    if(p && \n      p[\"Shockwave Flash\"] &&\n      m &&\n      m[t] &&\n      m[t].enabledPlugin)\n        return true;\n\n    if(x){\n      try{if((new global.ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\"))) return true;}\n      catch(e){}\n    }\n\n    return false;\n  }\n  \n  var bidderCode = \"rhythmone\",\n    bidLostTimeout = null;\n  \n  function attempt(valueFunction, defaultValue){\n    try{\n      return valueFunction();\n    }catch(ex){}\n    return defaultValue;\n  }\n  \n  function logToConsole(txt){\n    if(debug)\n      console.log(txt);\n  }\n  \n  function sniffAuctionEnd(){\n  \n    global.pbjs.onEvent('bidWon', function (e) {\n    \n      if(e.bidderCode === bidderCode){\n        placementCodes[e.adUnitCode] = true;\n        track(debug, 'hb', \"bidWon\");\n      }\n      \n      if(auctionEnded){\n        clearTimeout(bidLostTimeout);\n        bidLostTimeout = setTimeout(function(){\n          for(var k in placementCodes)\n            if(placementCodes[k] === false)\n              track(debug, 'hb', \"bidLost\");\n        }, 50);\n      }\n    });\n  \n    global.pbjs.onEvent('auctionEnd', function () {\n    \n      auctionEnded = true;\n\n      if(requestCompleted === false)\n        track(debug, 'hb', 'rmpReplyFail', \"prebid timeout post auction\");\n    });\n  }\n  \n  function getBidParameters(bids){\n    for(var i=0;i<bids.length;i++)\n      if(typeof bids[i].params === \"object\" && bids[i].params.placementId)\n        return bids[i].params;\n    return null;\n  }\n  \n  function noBids(params){\n    for(var i=0; i<params.bids.length; i++){\n      if(params.bids[i].success !== 1){\n        logToConsole(\"registering nobid for slot \"+params.bids[i].placementCode);\n        var bid = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n        bid.bidderCode = bidderCode;\n        track(debug, 'hb', 'bidResponse', 0);\n        bidmanager.addBidResponse(params.bids[i].placementCode, bid);\n      }\n    }\n  }\n  \n  function getRMPURL(bidParams, bids){\n    var endpoint = \"//tag.1rx.io/rmp/{placementId}/0/{path}?z={zone}\",\n      query = [];\n\n    if(typeof bidParams.endpoint === \"string\")\n      endpoint = bidParams.endpoint;\n    \n    if(typeof bidParams.zone === \"string\")\n      defaultZone = bidParams.zone;\n      \n    if(typeof bidParams.path === \"string\")\n      defaultPath = bidParams.path;\n      \n    if(bidParams.debug === true)\n      debug = true;\n    \n    if(bidParams.trace === true)\n      query.push(\"trace=true\");\n    \n    endpoint = applyMacros(endpoint, {\n      placementid:bidParams.placementId,\n      zone: defaultZone,\n      path: defaultPath\n    });\n\n    function p(k,v){\n      if(v instanceof Array)\n        v = v.join(\",\");\n      if(typeof v !== \"undefined\")\n        query.push(encodeURIComponent(k)+\"=\"+encodeURIComponent(v));\n    }\n\n    p(\"domain\", attempt(function(){\n        var d = global.document.location.ancestorOrigins;\n        if(d && d.length > 0)\n          return d[d.length-1];\n        return global.top.document.location.hostname;\n      },\"\"));\n    p(\"title\", attempt(function(){return global.top.document.title;},\"\"));\n    p(\"url\", attempt(function(){\n        var l;\n        try{l = global.top.document.location.href.toString();}\n        catch(ex){l = global.document.location.href.toString();}\n        return l;\n      },\"\"));\n    p(\"dsh\", (global.screen ? global.screen.height : \"\"));\n    p(\"dsw\", (global.screen ? global.screen.width : \"\"));\n    p(\"tz\", (new Date()).getTimezoneOffset());\n    p(\"dtype\", ((/(ios|ipod|ipad|iphone|android)/i).test(global.navigator.userAgent) ? 1 : ((/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\\.tv|viera|nettv|roku|\\bdtv\\b|sonydtv|inettvbrowser|\\btv\\b)/i).test(global.navigator.userAgent) ? 3 : 2)));\n    p(\"flash\", (flashInstalled() ? 1 : 0));\n    \n    var placementCodes = [],\n      heights = [],\n      widths = [],\n      floors = [],\n      mediaTypes = [],\n      fat = /(^v|(\\.0)+$)/gi,\n      i=0;\n\n    p(\"hbv\", global.pbjs.version.replace(fat,\"\")+\",\"+version.replace(fat,\"\"));\n\t\n    for(; i<bids.length; i++){\n\n      track(debug, 'hb', 'bidRequest');\n      var th = [], tw = [];\n      \n      if(bids[i].sizes.length > 0 && typeof bids[i].sizes[0] === \"number\")\n        bids[i].sizes = [bids[i].sizes];\n      \n      for(var j = 0; j<bids[i].sizes.length; j++){\n        tw.push(bids[i].sizes[j][0]);\n        th.push(bids[i].sizes[j][1]);\n      }\n      placementCodes.push(bids[i].placementCode);\n      heights.push(th.join(\"|\"));\n      widths.push(tw.join(\"|\"));\n      mediaTypes.push(((/video/i).test(bids[i].mediaType) ? \"v\" : \"d\"));\n      floors.push(0);\n    }\n    \n    p(\"imp\", placementCodes);\n    p(\"w\", widths);\n    p(\"h\", heights);\n    p(\"floor\", floors);\n    p(\"t\", mediaTypes);\n    \n    endpoint += \"&\"+query.join(\"&\");\n    \n    return endpoint;\n  }\n  \n  this.callBids = function(params){\n\n    var slotMap = {},\n      bidParams = getBidParameters(params.bids);\n  \n    debug = (bidParams !== null && bidParams.debug === true);\n  \n    track(debug, 'hb', 'callBids');\n\n    if(bidParams === null){\n      noBids(params);\n      track(debug, 'hb', 'misconfiguration');\n      return;\n    }\n\n    sniffAuctionEnd();\n\n    track(debug, 'hb', 'rmpRequest');\n\n    for(var i = 0; i<params.bids.length; i++)\n      slotMap[params.bids[i].placementCode] = params.bids[i];\n    \n    load(bidParams, getRMPURL(bidParams, params.bids), function(code, msg, txt){\n    \n      if(auctionEnded === true)\n        return;\n    \n      requestCompleted = true;\n    \n      logToConsole(\"response text: \"+txt);\n    \n      if(code === -1)\n        track(debug, \"hb\", \"rmpReplyFail\", msg);\n      else{\n        try{\n          var result = JSON.parse(txt),\n            registerBid = function(bid){\n            \n              //{\"id\":\"ffe73abd-91b3-56d3-d0ee-015a91b356d4\",\n              //\t\"impid\":\"123\",\n              //    \"price\":17.13,\n              //    \"nurl\":\"http://1r-qa-ads.rhythmxchange.com/rmp/389633/0/ivh?reqId=6594035297396414163\",\n              //    \"cid\":\"366183\",\n              //    \"crid\":\"366182\",\n              //    \"h\":480,\n              //    \"w\":640}\n\t\t\t\n              slotMap[bid.impid].success = 1;\n              \n              var pbResponse = bidfactory.createBid(CONSTANTS.STATUS.GOOD),\n                placementCode = slotMap[bid.impid].placementCode;\n            \n              placementCodes[placementCode] = false;\n            \n              pbResponse.bidderCode = bidderCode;\n              pbResponse.cpm = parseFloat(bid.price);\n              pbResponse.width = bid.w;\n              pbResponse.height = bid.h;\n              \n              if((/video/i).test(slotMap[bid.impid].mediaType)){\n                pbResponse.mediaType = \"video\";\n                pbResponse.vastUrl = bid.nurl;\n                pbResponse.descriptionUrl = bid.nurl;\n              }\n              else\n                pbResponse.ad = bid.adm;\n              \n              logToConsole(\"registering bid \"+placementCode+\" \"+JSON.stringify(pbResponse));\n              \n              track(debug, \"hb\", \"bidResponse\", 1);\n              bidManager.addBidResponse(placementCode, pbResponse);\n            };\n            \n          track(debug, \"hb\", \"rmpReplySuccess\");\n          \n          for(i=0; result.seatbid && i<result.seatbid.length; i++)\n            for(var j=0; result.seatbid[i].bid && j<result.seatbid[i].bid.length; j++){\n              registerBid(result.seatbid[i].bid[j]);\n            }\n        }\n        catch(ex){\n          track(debug, \"hb\", \"rmpReplyFail\", \"invalid json in rmp response\");\n        }\n      }\n\n      // if no bids are successful, inform prebid\n      noBids(params);\n      \n      // when all bids are complete, log a report\n      track(debug, 'hb', 'bidsComplete');\n    });\n    \n    logToConsole(\"version: \"+version);\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/rhythmone.js","import * as Adapter from './adapter.js';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\nimport { STATUS } from 'src/constants';\n\nconst RUBICON_BIDDER_CODE = 'rubicon';\n\n// use deferred function call since version isn't defined yet at this point\nfunction getIntegration() {\n  return 'pbjs_lite_' + pbjs.version;\n}\n\n// use protocol relative urls for http or https\nconst FASTLANE_ENDPOINT = '//fastlane.rubiconproject.com/a/api/fastlane.json';\nconst VIDEO_ENDPOINT = '//optimized-by-adv.rubiconproject.com/v1/auction/video';\n\nconst TIMEOUT_BUFFER = 500;\n\nvar sizeMap = {\n  1:'468x60',\n  2:'728x90',\n  8:'120x600',\n  9:'160x600',\n  10:'300x600',\n  15:'300x250',\n  16:'336x280',\n  19:'300x100',\n  43:'320x50',\n  44:'300x50',\n  48:'300x300',\n  54:'300x1050',\n  55:'970x90',\n  57:'970x250',\n  58:'1000x90',\n  59:'320x80',\n  61:'1000x1000',\n  65:'640x480',\n  67:'320x480',\n  68:'1800x1000',\n  72:'320x320',\n  73:'320x160',\n  83:'480x300',\n  94:'970x310',\n  96:'970x210',\n  101:'480x320',\n  102:'768x1024',\n  113:'1000x300',\n  117:'320x100',\n  125:'800x250',\n  126:'200x600'\n};\nutils._each(sizeMap, (item, key) => sizeMap[item] = key);\n\nfunction RubiconAdapter() {\n\n  function _callBids(bidderRequest) {\n    var bids = bidderRequest.bids || [];\n\n    bids.forEach(bid => {\n      try {\n        // Video endpoint only accepts POST calls\n        if (bid.mediaType === 'video') {\n          ajax(\n            VIDEO_ENDPOINT,\n            {\n              success: bidCallback,\n              error: bidError\n            },\n            buildVideoRequestPayload(bid, bidderRequest),\n            {\n              withCredentials: true\n            }\n          );\n        } else {\n          ajax(\n            buildOptimizedCall(bid),\n            {\n              success: bidCallback,\n              error: bidError\n            },\n            undefined,\n            {\n              withCredentials: true\n            }\n          );\n        }\n      } catch(err) {\n        utils.logError('Error sending rubicon request for placement code ' + bid.placementCode, null, err);\n        addErrorBid();\n      }\n\n      function bidCallback(responseText) {\n        try {\n          utils.logMessage('XHR callback function called for ad ID: ' + bid.bidId);\n          handleRpCB(responseText, bid);\n        } catch (err) {\n          if (typeof err === 'string') {\n            utils.logWarn(`${err} when processing rubicon response for placement code ${bid.placementCode}`);\n          } else {\n            utils.logError('Error processing rubicon response for placement code ' + bid.placementCode, null, err);\n          }\n          addErrorBid();\n        }\n      }\n\n      function bidError(err, xhr) {\n        utils.logError('Request for rubicon responded with:', xhr.status, err);\n        addErrorBid();\n      }\n\n      function addErrorBid() {\n        let badBid = bidfactory.createBid(STATUS.NO_BID, bid);\n        badBid.bidderCode = bid.bidder;\n        bidmanager.addBidResponse(bid.placementCode, badBid);\n      }\n    });\n  }\n\n  function _getScreenResolution() {\n    return [window.screen.width, window.screen.height].join('x');\n  }\n\n  function buildVideoRequestPayload(bid, bidderRequest) {\n    bid.startTime = new Date().getTime();\n\n    let params = bid.params;\n\n    if(!params || typeof params.video !== 'object') {\n      throw 'Invalid Video Bid';\n    }\n\n    let size;\n    if(params.video.playerWidth && params.video.playerHeight) {\n      size = [\n        params.video.playerWidth,\n        params.video.playerHeight\n      ];\n    } else if(\n        Array.isArray(bid.sizes) && bid.sizes.length > 0 &&\n        Array.isArray(bid.sizes[0]) && bid.sizes[0].length > 1\n    ) {\n      size = bid.sizes[0];\n    } else {\n      throw 'Invalid Video Bid - No size provided';\n    }\n\n    let postData =  {\n      page_url: !params.referrer ? utils.getTopWindowUrl() : params.referrer,\n      resolution:  _getScreenResolution(),\n      account_id: params.accountId,\n      integration: getIntegration(),\n      timeout: bidderRequest.timeout - (Date.now() - bidderRequest.auctionStart + TIMEOUT_BUFFER),\n      stash_creatives: true,\n      ae_pass_through_parameters: params.video.aeParams,\n      slots: []\n    };\n\n    // Define the slot object\n    let slotData = {\n      site_id: params.siteId,\n      zone_id: params.zoneId,\n      position: params.position || 'btf',\n      floor: 0.01,\n      element_id: bid.placementCode,\n      name: bid.placementCode,\n      language: params.video.language,\n      width: size[0],\n      height: size[1]\n    };\n\n    // check and add inventory, keywords, visitor and size_id data\n    if(params.video.size_id) {\n      slotData.size_id = params.video.size_id;\n    } else {\n      throw 'Invalid Video Bid - Invalid Ad Type!';\n    }\n\n    if(params.inventory && typeof params.inventory === 'object') {\n      slotData.inventory = params.inventory;\n    }\n\n    if(params.keywords && Array.isArray(params.keywords)) {\n      slotData.keywords = params.keywords;\n    }\n\n    if(params.visitor && typeof params.visitor === 'object') {\n      slotData.visitor = params.visitor;\n    }\n\n    postData.slots.push(slotData);\n\n    return(JSON.stringify(postData));\n  }\n\n  function buildOptimizedCall(bid) {\n    bid.startTime = new Date().getTime();\n\n    var {\n      accountId,\n      siteId,\n      zoneId,\n      position,\n      floor,\n      keywords,\n      visitor,\n      inventory,\n      userId,\n      referrer: pageUrl\n    } = bid.params;\n\n    // defaults\n    floor = (floor = parseFloat(floor)) > 0.01 ? floor : 0.01;\n    position = position || 'btf';\n\n    // use rubicon sizes if provided, otherwise adUnit.sizes\n    var parsedSizes = RubiconAdapter.masSizeOrdering(Array.isArray(bid.params.sizes) ?\n      bid.params.sizes.map(size => (sizeMap[size] || '').split('x')) : bid.sizes\n    );\n\n    if(parsedSizes.length < 1) {\n      throw 'no valid sizes';\n    }\n\n    if(!/^\\d+$/.test(accountId)) {\n      throw 'invalid accountId provided';\n    }\n\n    // using array to honor ordering. if order isn't important (it shouldn't be), an object would probably be preferable\n    var queryString = [\n      'account_id', accountId,\n      'site_id', siteId,\n      'zone_id', zoneId,\n      'size_id', parsedSizes[0],\n      'alt_size_ids', parsedSizes.slice(1).join(',') || undefined,\n      'p_pos', position,\n      'rp_floor', floor,\n      'tk_flint', getIntegration(),\n      'p_screen_res', _getScreenResolution(),\n      'kw', keywords,\n      'tk_user_key', userId\n    ];\n\n    if(visitor !== null && typeof visitor === 'object') {\n      utils._each(visitor, (item, key) => queryString.push(`tg_v.${key}`, item));\n    }\n\n    if(inventory !== null && typeof inventory === 'object') {\n      utils._each(inventory, (item, key) => queryString.push(`tg_i.${key}`, item));\n    }\n\n    queryString.push(\n      'rand', Math.random(),\n      'rf', !pageUrl ? utils.getTopWindowUrl() : pageUrl\n    );\n\n    return queryString.reduce(\n      (memo, curr, index) =>\n        index % 2 === 0 && queryString[index + 1] !== undefined ?\n        memo + curr + '=' + encodeURIComponent(queryString[index + 1]) + '&' : memo,\n      FASTLANE_ENDPOINT + '?'\n    ).slice(0, -1); // remove trailing &\n  }\n\n  let _renderCreative = (script, impId) => `<html>\n<head><script type='text/javascript'>inDapIF=true;</script></head>\n<body style='margin : 0; padding: 0;'>\n<!-- Rubicon Project Ad Tag -->\n<div data-rp-impression-id='${impId}'>\n<script type='text/javascript'>${script}</script>\n</div>\n</body>\n</html>`;\n\n  function handleRpCB(responseText, bidRequest) {\n    var responseObj = JSON.parse(responseText), // can throw\n        ads = responseObj.ads,\n        adResponseKey = bidRequest.placementCode;\n\n    // check overall response\n    if(typeof responseObj !== 'object' || responseObj.status !== 'ok') {\n      throw 'bad response';\n    }\n\n    // video ads array is wrapped in an object\n    if (bidRequest.mediaType === 'video' && typeof ads === 'object') {\n      ads = ads[adResponseKey];\n    }\n\n    // check the ad response\n    if(!Array.isArray(ads) || ads.length < 1) {\n      throw 'invalid ad response';\n    }\n\n    // if there are multiple ads, sort by CPM\n    ads = ads.sort(_adCpmSort);\n\n    ads.forEach(ad => {\n      if(ad.status !== 'ok') {\n        throw 'bad ad status';\n      }\n\n      //store bid response\n      //bid status is good (indicating 1)\n      var bid = bidfactory.createBid(STATUS.GOOD, bidRequest);\n      bid.creative_id = ad.ad_id;\n      bid.bidderCode = bidRequest.bidder;\n      bid.cpm = ad.cpm || 0;\n      bid.dealId = ad.deal;\n      if (bidRequest.mediaType === 'video') {\n        bid.width = bidRequest.params.video.playerWidth;\n        bid.height = bidRequest.params.video.playerHeight;\n        bid.vastUrl = ad.creative_depot_url;\n        bid.descriptionUrl = ad.impression_id;\n        bid.impression_id = ad.impression_id;\n      } else {\n        bid.ad = _renderCreative(ad.script, ad.impression_id);\n        [bid.width, bid.height] = sizeMap[ad.size_id].split('x').map(num => Number(num));\n      }\n\n      // add server-side targeting\n      bid.rubiconTargeting = (Array.isArray(ad.targeting) ? ad.targeting : [])\n        .reduce((memo, item) => {\n          memo[item.key] = item.values[0];\n          return memo;\n        }, {'rpfl_elemid': bidRequest.placementCode});\n\n      try {\n        bidmanager.addBidResponse(bidRequest.placementCode, bid);\n      } catch (err) {\n        utils.logError('Error from addBidResponse', null, err);\n      }\n    });\n  }\n\n  function _adCpmSort(adA, adB) {\n    return (adB.cpm || 0.0) - (adA.cpm || 0.0);\n  }\n\n  return Object.assign(Adapter.createNew(RUBICON_BIDDER_CODE), {\n    callBids: _callBids,\n    createNew: RubiconAdapter.createNew\n  });\n}\n\nRubiconAdapter.masSizeOrdering = function(sizes) {\n  const MAS_SIZE_PRIORITY = [15, 2, 9];\n\n  return utils.parseSizesInput(sizes)\n    // map sizes while excluding non-matches\n    .reduce((result, size) => {\n      let mappedSize = parseInt(sizeMap[size], 10);\n      if(mappedSize) {\n        result.push(mappedSize);\n      }\n      return result;\n    }, [])\n    .sort((first, second) => {\n      // sort by MAS_SIZE_PRIORITY priority order\n      let firstPriority = MAS_SIZE_PRIORITY.indexOf(first),\n          secondPriority = MAS_SIZE_PRIORITY.indexOf(second);\n\n      if(firstPriority > -1 || secondPriority > -1) {\n        if(firstPriority === -1) {\n          return 1;\n        }\n        if(secondPriority === -1) {\n          return -1;\n        }\n        return firstPriority - secondPriority;\n      }\n\n      // and finally ascending order\n      return first - second;\n    });\n};\n\nRubiconAdapter.createNew = function() {\n  return new RubiconAdapter();\n};\n\nmodule.exports = RubiconAdapter;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/rubicon.js","import * as Adapter from './adapter.js';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport {ajax} from 'src/ajax';\nimport {STATUS} from 'src/constants';\n\nconst SMARTYADS_BIDDER_CODE = 'smartyads';\n\nvar sizeMap = {\n  1: '468x60',\n  2: '728x90',\n  8: '120x600',\n  9: '160x600',\n  10: '300x600',\n  15: '300x250',\n  16: '336x280',\n  19: '300x100',\n  43: '320x50',\n  44: '300x50',\n  48: '300x300',\n  54: '300x1050',\n  55: '970x90',\n  57: '970x250',\n  58: '1000x90',\n  59: '320x80',\n  61: '1000x1000',\n  65: '640x480',\n  67: '320x480',\n  68: '1800x1000',\n  72: '320x320',\n  73: '320x160',\n  83: '480x300',\n  94: '970x310',\n  96: '970x210',\n  101: '480x320',\n  102: '768x1024',\n  113: '1000x300',\n  117: '320x100',\n  125: '800x250',\n  126: '200x600'\n};\n\nutils._each(sizeMap, (item, key) => sizeMap[item] = key);\n\nfunction SmartyadsAdapter() {\n\n  function _callBids(bidderRequest) {\n\n    var bids = bidderRequest.bids || [];\n\n    bids.forEach((bid) => {\n      try {\n        ajax(buildOptimizedCall(bid), bidCallback, undefined, { withCredentials: true });\n      } catch (err) {\n        utils.logError('Error sending smartyads request for placement code ' + bid.placementCode, null, err);\n      }\n\n      function bidCallback(responseText) {\n\n        try {\n          utils.logMessage('XHR callback function called for ad ID: ' + bid.bidId);\n          handleRpCB(responseText, bid);\n        } catch (err) {\n          if (typeof err === \"string\") {\n            utils.logWarn(`${err} when processing smartyads response for placement code ${bid.placementCode}`);\n          } else {\n            utils.logError('Error processing smartyads response for placement code ' + bid.placementCode, null, err);\n          }\n\n          //indicate that there is no bid for this placement\n          let badBid = bidfactory.createBid(STATUS.NO_BID, bid);\n          badBid.bidderCode = bid.bidder;\n          badBid.error = err;\n          bidmanager.addBidResponse(bid.placementCode, badBid);\n        }\n      }\n    });\n  }\n\n  function buildOptimizedCall(bid) {\n\n    bid.startTime = new Date().getTime();\n\n    // use smartyads sizes if provided, otherwise adUnit.sizes\n    var parsedSizes = SmartyadsAdapter.masSizeOrdering(\n      Array.isArray(bid.params.sizes) ? bid.params.sizes.map(size => (sizeMap[size] || '').split('x')) : bid.sizes\n    );\n\n    if (parsedSizes.length < 1) {\n      throw \"no valid sizes\";\n    }\n\n    var secure;\n    if (window.location.protocol !== 'http:') {\n      secure = 1;\n    } else {\n      secure = 0;\n    }\n\n    var host = window.location.host,\n      page = window.location.pathname,\n      language = navigator.language,\n      deviceWidth = window.screen.width,\n      deviceHeight = window.screen.height;\n\n    var queryString = [\n      'banner_id', bid.params.banner_id,\n      'size_ad', parsedSizes[0],\n      'alt_size_ad', parsedSizes.slice(1).join(',') || undefined,\n      'host', host,\n      \"page\", page,\n      \"language\", language,\n      \"deviceWidth\", deviceWidth,\n      \"deviceHeight\", deviceHeight,\n      \"secure\", secure,\n      \"bidId\", bid.bidId,\n      \"checkOn\", 'rf'\n    ];\n\n    return queryString.reduce(\n      (memo, curr, index) =>\n        index % 2 === 0 && queryString[index + 1] !== undefined ?\n        memo + curr + '=' + encodeURIComponent(queryString[index + 1]) + '&'\n          : memo,\n      '//ssp-nj.webtradehub.com/?'\n    ).slice(0, -1);\n\n  }\n\n  function handleRpCB(responseText, bidRequest) {\n\n    let ad = JSON.parse(responseText); // can throw\n\n    var bid = bidfactory.createBid(STATUS.GOOD, bidRequest);\n    bid.creative_id = ad.ad_id;\n    bid.bidderCode = bidRequest.bidder;\n    bid.cpm = ad.cpm || 0;\n    bid.ad = ad.adm;\n    bid.width = ad.width;\n    bid.height = ad.height;\n    bid.dealId = ad.deal;\n\n    bidmanager.addBidResponse(bidRequest.placementCode, bid);\n  }\n\n  return Object.assign(Adapter.createNew(SMARTYADS_BIDDER_CODE), {      // SMARTYADS_BIDDER_CODE smartyads\n    callBids: _callBids,\n    createNew: SmartyadsAdapter.createNew\n  });\n}\n\nSmartyadsAdapter.masSizeOrdering = function (sizes) {\n\n  const MAS_SIZE_PRIORITY = [15, 2, 9];\n\n  return utils.parseSizesInput(sizes)\n  // map sizes while excluding non-matches\n    .reduce((result, size) => {\n      let mappedSize = parseInt(sizeMap[size], 10);\n      if (mappedSize) {\n        result.push(mappedSize);\n      }\n      return result;\n    }, [])\n    .sort((first, second) => {\n      // sort by MAS_SIZE_PRIORITY priority order\n      let firstPriority = MAS_SIZE_PRIORITY.indexOf(first),\n        secondPriority = MAS_SIZE_PRIORITY.indexOf(second);\n\n      if (firstPriority > -1 || secondPriority > -1) {\n        if (firstPriority === -1) {\n          return 1;\n        }\n        if (secondPriority === -1) {\n          return -1;\n        }\n        return firstPriority - secondPriority;\n      }\n\n      return first - second;\n    });\n};\n\nSmartyadsAdapter.createNew = function () {\n  return new SmartyadsAdapter();\n};\n\nmodule.exports = SmartyadsAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/smartyads.js","var utils = require(\"../utils.js\");\nvar bidfactory = require(\"../bidfactory.js\");\nvar bidmanager = require(\"../bidmanager.js\");\nvar adloader = require(\"src/adloader.js\");\nvar url = require(\"url\");\n\nvar SmartAdServer = function SmartAdServer() {\n  var generateCallback = function(bid) {\n    var callbackId = \"sas_\" + utils.getUniqueIdentifierStr();\n    pbjs[callbackId] = function(adUnit) {\n      var bidObject;\n      if (adUnit) {\n        utils.logMessage(`[SmartAdServer] bid response for placementCode ${bid.placementCode}`);\n        bidObject = bidfactory.createBid(1);\n        bidObject.bidderCode = 'smartadserver';\n        bidObject.cpm = adUnit.cpm;\n        bidObject.currency = adUnit.currency;\n        bidObject.ad = adUnit.ad;\n        bidObject.width = adUnit.width;\n        bidObject.height = adUnit.height;\n        bidObject.dealId = adUnit.dealId;\n        bidmanager.addBidResponse(bid.placementCode, bidObject);\n      } else {\n        utils.logMessage(`[SmartAdServer] no bid response for placementCode ${bid.placementCode}`);\n        bidObject = bidfactory.createBid(2);\n        bidObject.bidderCode = 'smartadserver';\n        bidmanager.addBidResponse(bid.placementCode, bidObject);\n      }\n    };\n    return callbackId;\n  };\n\n  return {\n    callBids: function(params) {\n      for (var i = 0; i < params.bids.length; i++) {\n        var bid = params.bids[i];\n        var adCall = url.parse(bid.params.domain);\n        adCall.pathname = \"/prebid\";\n        adCall.search = {\n          \"pbjscbk\": \"pbjs.\" + generateCallback(bid),\n          \"siteid\": bid.params.siteId,\n          \"pgid\": bid.params.pageId,\n          \"fmtid\": bid.params.formatId,\n          \"ccy\": bid.params.currency || \"USD\",\n          \"tgt\": encodeURIComponent(bid.params.target || ''),\n          \"tag\": bid.placementCode,\n          \"sizes\": bid.sizes.map(size => size[0] + \"x\" + size[1]).join(\",\"),\n          \"async\": 1\n        };\n        adloader.loadScript(url.format(adCall));\n      }\n    }\n  };\n};\n\nmodule.exports = SmartAdServer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/smartadserver.js","import { getBidRequest } from '../utils.js';\nvar CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nvar sekindoUMAdapter;\nsekindoUMAdapter = function sekindoUMAdapter() {\n\n  function _callBids(params) {\n    var bids = params.bids;\n    var bidsCount = bids.length;\n\n    var pubUrl = null;\n    if (parent !== window)\n      pubUrl = document.referrer;\n    else\n      pubUrl = window.location.href;\n\n    for (var i = 0; i < bidsCount; i++) {\n      var bidReqeust = bids[i];\n      var callbackId = bidReqeust.bidId;\n      _requestBids(bidReqeust, callbackId, pubUrl);\n      //store a reference to the bidRequest from the callback id\n      //bidmanager.pbCallbackMap[callbackId] = bidReqeust;\n    }\n  }\n\n  pbjs.sekindoCB = function(callbackId, response) {\n    var bidObj = getBidRequest(callbackId);\n    if (typeof (response) !== 'undefined' && typeof (response.cpm) !== 'undefined') {\n      var bid = [];\n      if (bidObj) {\n        var bidCode = bidObj.bidder;\n        var placementCode = bidObj.placementCode;\n\n        if (response.cpm !== undefined && response.cpm > 0) {\n\n          bid = bidfactory.createBid(CONSTANTS.STATUS.GOOD);\n          bid.callback_uid = callbackId;\n          bid.bidderCode = bidCode;\n          bid.creative_id = response.adId;\n          bid.cpm = parseFloat(response.cpm);\n          bid.ad = response.ad;\n          bid.width = response.width;\n          bid.height = response.height;\n\n          bidmanager.addBidResponse(placementCode, bid);\n        }\n\n        else {\n          bid = bidfactory.createBid(CONSTANTS.STATUS.NO_BID);\n          bid.callback_uid = callbackId;\n          bid.bidderCode = bidCode;\n          bidmanager.addBidResponse(placementCode, bid);\n        }\n      }\n    }\n\n    else {\n      if (bidObj) {\n        utils.logMessage('No prebid response for placement '+bidObj.placementCode);\n      }\n\n      else {\n        utils.logMessage('sekindoUM callback general error');\n      }\n    }\n  };\n\n  function _requestBids(bid, callbackId, pubUrl) {\n    //determine tag params\n    var spaceId = utils.getBidIdParameter('spaceId', bid.params);\n    var subId = utils.getBidIdParameter('subId', bid.params);\n    var bidfloor = utils.getBidIdParameter('bidfloor', bid.params);\n    var protocol = ('https:' === document.location.protocol ? 's' : '');\n    var scriptSrc = 'http'+protocol+'://hb.sekindo.com/live/liveView.php?';\n\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 's', spaceId);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'subId', subId);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'pubUrl', pubUrl);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'hbcb', callbackId);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'hbver', '3');\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'hbobj', 'pbjs');\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'dcpmflr', bidfloor);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'hbto', pbjs.bidderTimeout);\n    scriptSrc = utils.tryAppendQueryString(scriptSrc, 'protocol', protocol);\n\n    adloader.loadScript(scriptSrc);\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = sekindoUMAdapter;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/sekindoUM.js","import Adapter from 'src/adapters/adapter';\nimport bidfactory from 'src/bidfactory';\nimport bidmanager from 'src/bidmanager';\nimport * as utils from 'src/utils';\nimport { ajax } from 'src/ajax';\n\nconst ServerBidAdapter = function ServerBidAdapter() {\n\n  const baseAdapter = Adapter.createNew('serverbid');\n\n  const BASE_URI = '//e.serverbid.com/api/v2';\n\n  const sizeMap = [null,\n    \"120x90\",\n    \"120x90\",\n    \"468x60\",\n    \"728x90\",\n    \"300x250\",\n    \"160x600\",\n    \"120x600\",\n    \"300x100\",\n    \"180x150\",\n    \"336x280\",\n    \"240x400\",\n    \"234x60\",\n    \"88x31\",\n    \"120x60\",\n    \"120x240\",\n    \"125x125\",\n    \"220x250\",\n    \"250x250\",\n    \"250x90\",\n    \"0x0\",\n    \"200x90\",\n    \"300x50\",\n    \"320x50\",\n    \"320x480\",\n    \"185x185\",\n    \"620x45\",\n    \"300x125\",\n    \"800x250\"\n  ];\n\n  const bidIds = [];\n\n  baseAdapter.callBids = function(params) {\n\n    if (params && params.bids && utils.isArray(params.bids) && params.bids.length) {\n\n      const data = {\n        placements: [],\n        time: Date.now(),\n        user: {},\n        url: utils.getTopWindowUrl(),\n        referrer: document.referrer,\n        enableBotFiltering: true,\n        includePricingData: true\n      };\n\n      const bids = params.bids || [];\n      for (let i = 0; i < bids.length; i++) {\n        const bid = bids[i];\n\n        bidIds.push(bid.bidId);\n\n        const bid_data = {\n          networkId: bid.params.networkId,\n          siteId: bid.params.siteId,\n          zoneIds: bid.params.zoneIds,\n          campaignId: bid.params.campaignId,\n          flightId: bid.params.flightId,\n          adId: bid.params.adId,\n          divName: bid.bidId,\n          adTypes: bid.adTypes || getSize(bid.sizes)\n        };\n\n        if (bid_data.networkId && bid_data.siteId) {\n          data.placements.push(bid_data);\n        }\n\n      }\n\n      if (data.placements.length) {\n        ajax(BASE_URI, _responseCallback, JSON.stringify(data), { method: 'POST', withCredentials: true, contentType: 'application/json' });\n      }\n\n    }\n\n  };\n\n  function _responseCallback(result) {\n\n    let bid;\n    let bidId;\n    let bidObj;\n    let bidCode;\n    let placementCode;\n\n    try {\n      result = JSON.parse(result);\n    } catch (error) {\n      utils.logError(error);\n    }\n\n    for (let i = 0; i < bidIds.length; i++) {\n\n      bidId = bidIds[i];\n      bidObj = utils.getBidRequest(bidId);\n      bidCode = bidObj.bidder;\n      placementCode = bidObj.placementCode;\n\n      if (result) {\n        const decision = result.decisions && result.decisions[bidId];\n        const price = decision && decision.pricing && decision.pricing.clearPrice;\n\n        if (decision && price) {\n          bid = bidfactory.createBid(1, bidObj);\n          bid.bidderCode = bidCode;\n          bid.cpm = price;\n          bid.width = decision.width;\n          bid.height = decision.height;\n          bid.ad = retrieveAd(decision);\n        } else {\n          bid = bidfactory.createBid(2, bidObj);\n          bid.bidderCode = bidCode;\n        }\n\n      } else {\n        bid = bidfactory.createBid(2, bidObj);\n        bid.bidderCode = bidCode;\n      }\n      bidmanager.addBidResponse(placementCode, bid);\n    }\n  }\n\n  function retrieveAd(decision) {\n    return decision.contents && decision.contents[0] && decision.contents[0].body + utils.createTrackPixelHtml(decision.impressionUrl);\n  }\n\n  function getSize(sizes) {\n    const result = [];\n    sizes.forEach(function(size) {\n      const index = sizeMap.indexOf(size[0] + \"x\" + size[1]);\n      if (index >= 0) {\n        result.push(index);\n      }\n    });\n    return result;\n  }\n\n  // Export the `callBids` function, so that Prebid.js can execute\n  // this function when the page asks to send out bid requests.\n  return {\n    callBids: baseAdapter.callBids\n  };\n\n};\n\nServerBidAdapter.createNew = function() {\n  return new ServerBidAdapter();\n};\n\nmodule.exports = ServerBidAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/serverbid.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\nvar utils = require('../utils');\n\nvar SonobiAdapter = function SonobiAdapter(){\n  var keymakerAssoc = {};   //  Remember placement codes for callback mapping\n  var bidReqAssoc = {};     //  Remember bids for bid complete reporting\n\n  function _phone_in(request){\n    var trinity = 'https://apex.go.sonobi.com/trinity.js?key_maker=';\n    var adSlots = request.bids || [];\n    var bidderRequestId = request.bidderRequestId;\n    var ref = (window.frameElement) ? '&ref=' + encodeURI(top.location.host || document.referrer) : '';\n    adloader.loadScript(trinity + JSON.stringify(_keymaker(adSlots)) + '&cv=' + _operator(bidderRequestId) + ref );\n  }\n\n  function _keymaker(adSlots){\n    var keyring = {};\n    utils._each(adSlots, function(bidRequest){\n      if(bidRequest.params){\n        //  Optional\n        var floor = (bidRequest.params.floor) ? bidRequest.params.floor : null;\n        //  Mandatory\n        var slotIdentifier = (bidRequest.params.ad_unit) ? bidRequest.params.ad_unit : (bidRequest.params.placement_id) ? bidRequest.params.placement_id : null;\n        var sizes = utils.parseSizesInput(bidRequest.sizes).toString() || null;\n        var bidId = bidRequest.bidId;\n        if (utils.isEmpty(sizes)){\n          utils.logError('Sonobi adapter expects sizes for ' + bidRequest.placementCode);\n        }\n        var args = (sizes) ? ((floor) ? (sizes + '|f=' + floor) : (sizes)) : (floor) ? ('f=' + floor) : '';\n        if (/^[\\/]?[\\d]+[[\\/].+[\\/]?]?$/.test(slotIdentifier)){\n          slotIdentifier = slotIdentifier.charAt(0) === '/' ? slotIdentifier : '/' + slotIdentifier;\n          keyring[slotIdentifier + '|' + bidId] = args;\n          keymakerAssoc[slotIdentifier + '|' + bidId] = bidRequest.placementCode;\n          bidReqAssoc[bidRequest.placementCode] = bidRequest;\n        } else if (/^[0-9a-fA-F]{20}$/.test(slotIdentifier) && slotIdentifier.length === 20){\n          keyring[bidId] = slotIdentifier + '|' + args;\n          keymakerAssoc[bidId] = bidRequest.placementCode;\n          bidReqAssoc[bidRequest.placementCode] = bidRequest;\n        } else  {\n          keymakerAssoc[bidId] = bidRequest.placementCode;\n          bidReqAssoc[bidRequest.placementCode] = bidRequest;\n          _failure(bidRequest.placementCode);\n          utils.logError('The ad unit code or Sonobi Placement id for slot ' + bidRequest.placementCode + ' is invalid');\n        }\n      }\n    });\n    return keyring;\n  }\n\n  function _operator(bidderRequestId){\n    var cb_name = \"sbi_\" + bidderRequestId;\n    window[cb_name] = _trinity;\n    return cb_name;\n  }\n\n  function _trinity(response){\n    var slots = response.slots || {};\n    var sbi_dc = response.sbi_dc || '';\n    utils._each(slots, function(bid, slot_id){\n      var placementCode = keymakerAssoc[slot_id];\n      if (bid.sbi_aid && bid.sbi_mouse && bid.sbi_size){\n        _success(placementCode, sbi_dc, bid);\n      } else {\n        _failure(placementCode);\n      }\n      delete keymakerAssoc[slot_id];\n    });\n  }\n\n  function _seraph(placementCode){\n    var theOne = bidReqAssoc[placementCode];\n    delete bidReqAssoc[placementCode];\n    return theOne;\n  }\n\n  function _success(placementCode, sbi_dc, bid){\n    var goodBid = bidfactory.createBid(1, _seraph(placementCode));\n    if(bid.sbi_dozer){\n      goodBid.dealId = bid.sbi_dozer;\n    }\n    goodBid.bidderCode = 'sonobi';\n    goodBid.ad = _creative(sbi_dc, bid.sbi_aid);\n    goodBid.cpm = Number(bid.sbi_mouse);\n    goodBid.width = Number(bid.sbi_size.split('x')[0]) || 1;\n    goodBid.height = Number(bid.sbi_size.split('x')[1]) || 1;\n    bidmanager.addBidResponse(placementCode, goodBid);\n  }\n\n  function _failure(placementCode){\n    var failBid = bidfactory.createBid(2, _seraph(placementCode));\n    failBid.bidderCode = 'sonobi';\n    bidmanager.addBidResponse(placementCode, failBid);\n  }\n\n  function _creative(sbi_dc, sbi_aid){\n    var src = 'https://' + sbi_dc + 'apex.go.sonobi.com/sbi.js?aid=' + sbi_aid + '&as=null';\n    return '<script type=\"text/javascript\" src=\"' + src + '\"></script>';\n  }\n\n  return {\n    callBids:    _phone_in,\n    formRequest: _keymaker,\n    parseResponse:  _trinity,\n    success: _success,\n    failure: _failure\n  };\n};\n\nmodule.exports = SonobiAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/sonobi.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\n/**\n * Adapter for requesting bids from Sovrn\n */\nvar SovrnAdapter = function SovrnAdapter() {\n  var sovrnUrl = 'ap.lijit.com/rtb/bid';\n\n  function _callBids(params) {\n    var sovrnBids = params.bids || [];\n\n    _requestBids(sovrnBids);\n  }\n\n  function _requestBids(bidReqs) {\n    // build bid request object\n    var domain = window.location.host;\n    var page = window.location.pathname + location.search + location.hash;\n\n    var sovrnImps = [];\n\n    //build impression array for sovrn\n    utils._each(bidReqs, function (bid) {\n      var tagId = utils.getBidIdParameter('tagid', bid.params);\n      var bidFloor = utils.getBidIdParameter('bidfloor', bid.params);\n      var adW = 0;\n      var adH = 0;\n\n      //sovrn supports only one size per tagid, so we just take the first size if there are more\n      //if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      var bidSizes = Array.isArray(bid.params.sizes) ? bid.params.sizes : bid.sizes;\n      var sizeArrayLength = bidSizes.length;\n      if (sizeArrayLength === 2 && typeof bidSizes[0] === 'number' && typeof bidSizes[1] === 'number') {\n        adW = bidSizes[0];\n        adH = bidSizes[1];\n      } else {\n        adW = bidSizes[0][0];\n        adH = bidSizes[0][1];\n      }\n\n      var imp =\n      {\n        id: bid.bidId,\n        banner: {\n          w: adW,\n          h: adH\n        },\n        tagid: tagId,\n        bidfloor: bidFloor\n      };\n      sovrnImps.push(imp);\n    });\n\n    // build bid request with impressions\n    var sovrnBidReq = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: sovrnImps,\n      site: {\n        domain: domain,\n        page: page\n      }\n    };\n\n    var scriptUrl = '//' + sovrnUrl + '?callback=window.pbjs.sovrnResponse' +\n      '&src=' + CONSTANTS.REPO_AND_VERSION +\n      '&br=' + encodeURIComponent(JSON.stringify(sovrnBidReq));\n    adloader.loadScript(scriptUrl);\n  }\n\n  function addBlankBidResponses(impidsWithBidBack) {\n    var missing = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'sovrn');\n    if (missing) {\n      missing = missing.bids.filter(bid => impidsWithBidBack.indexOf(bid.bidId) < 0);\n    } else {\n      missing = [];\n    }\n\n    missing.forEach(function (bidRequest) {\n      // Add a no-bid response for this bid request.\n      var bid = {};\n      bid = bidfactory.createBid(2, bidRequest);\n      bid.bidderCode = 'sovrn';\n      bidmanager.addBidResponse(bidRequest.placementCode, bid);\n    });\n  }\n\n  //expose the callback to the global object:\n  pbjs.sovrnResponse = function (sovrnResponseObj) {\n    // valid object?\n    if (sovrnResponseObj && sovrnResponseObj.id) {\n      // valid object w/ bid responses?\n      if (sovrnResponseObj.seatbid && sovrnResponseObj.seatbid.length !== 0 && sovrnResponseObj.seatbid[0].bid && sovrnResponseObj.seatbid[0].bid.length !== 0) {\n        var impidsWithBidBack = [];\n        sovrnResponseObj.seatbid[0].bid.forEach(function (sovrnBid) {\n\n          var responseCPM;\n          var placementCode = '';\n          var id = sovrnBid.impid;\n          var bid = {};\n\n          // try to fetch the bid request we sent Sovrn\n          var bidObj = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'sovrn').bids\n          .find(bid => bid.bidId === id);\n\n          if (bidObj) {\n            placementCode = bidObj.placementCode;\n            bidObj.status = CONSTANTS.STATUS.GOOD;\n\n            //place ad response on bidmanager._adResponsesByBidderId\n            responseCPM = parseFloat(sovrnBid.price);\n\n            if (responseCPM !== 0) {\n              sovrnBid.placementCode = placementCode;\n              sovrnBid.size = bidObj.sizes;\n              var responseAd = sovrnBid.adm;\n\n              // build impression url from response\n              var responseNurl = '<img src=\"' + sovrnBid.nurl + '\">';\n\n              //store bid response\n              //bid status is good (indicating 1)\n              bid = bidfactory.createBid(1, bidObj);\n              bid.creative_id = sovrnBid.id;\n              bid.bidderCode = 'sovrn';\n              bid.cpm = responseCPM;\n\n              //set ad content + impression url\n              // sovrn returns <script> block, so use bid.ad, not bid.adurl\n              bid.ad = decodeURIComponent(responseAd + responseNurl);\n\n              // Set width and height from response now\n              bid.width = parseInt(sovrnBid.w);\n              bid.height = parseInt(sovrnBid.h);\n\n              bidmanager.addBidResponse(placementCode, bid);\n              impidsWithBidBack.push(id);\n            }\n          }\n        });\n\n        addBlankBidResponses(impidsWithBidBack);\n      } else {\n        //no response data for all requests\n        addBlankBidResponses([]);\n      }\n    } else {\n      //no response data for all requests\n      addBlankBidResponses([]);\n    }\n\n  }; // sovrnResponse\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = SovrnAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/sovrn.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar SpringServeAdapter;\nSpringServeAdapter = function SpringServeAdapter() {\n\n  function buildSpringServeCall(bid) {\n\n    var spCall = window.location.protocol + '//bidder.springserve.com/display/hbid?';\n\n    //get width and height from bid attribute\n    var size = bid.sizes[0];\n    var width = size[0];\n    var height = size[1];\n\n    spCall += '&w=';\n    spCall += width;\n    spCall += '&h=';\n    spCall += height;\n\n    var params = bid.params;\n\n    //maps param attributes to request parameters\n    var requestAttrMap = {\n      sp: 'supplyPartnerId',\n      imp_id: 'impId'\n    };\n\n    for (var property in requestAttrMap) {\n      if (requestAttrMap.hasOwnProperty && params.hasOwnProperty(requestAttrMap[property])) {\n        spCall += '&';\n        spCall += property;\n        spCall += '=';\n\n        //get property from params and include it in request\n        spCall += params[requestAttrMap[property]];\n      }\n    }\n\n    var domain = window.location.hostname;\n\n    //override domain when testing\n    if (params.hasOwnProperty('test') && params.test === true) {\n      spCall += '&debug=true';\n      domain = 'test.com';\n    }\n\n    spCall += '&domain=';\n    spCall += domain;\n    spCall += '&callback=pbjs.handleSpringServeCB';\n\n    return spCall;\n  }\n\n  function _callBids(params) {\n    var bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i];\n      //bidmanager.pbCallbackMap[bid.params.impId] = params;\n      adloader.loadScript(buildSpringServeCall(bid));\n    }\n  }\n\n  pbjs.handleSpringServeCB = function (responseObj) {\n    if (responseObj && responseObj.seatbid && responseObj.seatbid.length > 0 &&\n      responseObj.seatbid[0].bid[0] !== undefined) {\n      //look up the request attributs stored in the bidmanager\n      var responseBid = responseObj.seatbid[0].bid[0];\n      //var requestObj = bidmanager.getPlacementIdByCBIdentifer(responseBid.impid);\n      var requestBids = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'springserve');\n      if (requestBids && requestBids.bids.length > 0) {\n        requestBids = requestBids.bids.filter(bid => bid.params && bid.params.impId === +responseBid.impid);\n      } else {\n        requestBids = [];\n      }\n      var bid = bidfactory.createBid(1);\n      var placementCode;\n\n      //assign properties from the original request to the bid object\n      for (var i = 0; i < requestBids.length; i++) {\n        var bidRequest = requestBids[i];\n        if (bidRequest.bidder === 'springserve') {\n          placementCode = bidRequest.placementCode;\n          var size = bidRequest.sizes[0];\n          bid.width = size[0];\n          bid.height = size[1];\n        }\n      }\n\n      if (requestBids[0]) {bid.bidderCode = requestBids[0].bidder;}\n\n      if (responseBid.hasOwnProperty('price') && responseBid.hasOwnProperty('adm')) {\n        //assign properties from the response to the bid object\n        bid.cpm = responseBid.price;\n        bid.ad = responseBid.adm;\n      } else {\n        //make object for invalid bid response\n        bid = bidfactory.createBid(2);\n        bid.bidderCode = 'springserve';\n      }\n\n      bidmanager.addBidResponse(placementCode, bid);\n    }\n  };\n\n  // Export the callBids function, so that prebid.js can execute this function\n  // when the page asks to send out bid requests.\n  return {\n    callBids: _callBids,\n    buildSpringServeCall: buildSpringServeCall\n  };\n};\n\nmodule.exports = SpringServeAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/springserve.js","\"use strict\";\nvar bidfactory = require(\"../bidfactory\");\nvar bidmanager = require(\"../bidmanager\");\nvar utils = require('../utils');\nvar adloader_1 = require(\"../adloader\");\nvar ROOT_URL = \"//cdn.thoughtleadr.com/v4/\";\nvar BID_AVAILABLE = 1;\n\nvar ThoughtleadrAdapter = (function () {\n  function ThoughtleadrAdapter() {\n  }\n\n  ThoughtleadrAdapter.prototype.callBids = function (params) {\n    if (!window.tldr || !window.tldr.requestPrebid) {\n      var rootUrl = ROOT_URL;\n      if (window.tldr && window.tldr.config && window.tldr.config.root_url) {\n        rootUrl = window.tldr.config.root_url;\n      }\n      adloader_1.loadScript(rootUrl + \"page.js\", this.handleBids.bind(this, params), true);\n    }\n    else {\n      this.handleBids(params);\n    }\n  };\n\n  ThoughtleadrAdapter.prototype.handleBids = function (params) {\n    var bids = (params.bids || []).filter(function (bid) {\n      return ThoughtleadrAdapter.valid(bid);\n    });\n\n    for (var _i = 0, bids_1 = bids; _i < bids_1.length; _i++) {\n      var bid = bids_1[_i];\n      this.requestPlacement(bid);\n    }\n  };\n\n  ThoughtleadrAdapter.prototype.requestPlacement = function (bid) {\n    var _this = this;\n    var rid = utils.generateUUID(null);\n    var size = ThoughtleadrAdapter.getSizes(bid.sizes);\n\n    window.tldr.requestPrebid(bid.params.placementId, rid).then(function (params) {\n      if (!params || !params.bid) {\n        utils.logError(\"invalid response from tldr.requestPrebid\", undefined, undefined);\n        return;\n      }\n\n      _this.receiver = function (ev) {\n        if (ev.origin === location.origin &&\n          ev.data && ev.data.TLDR_REQUEST && ev.data.TLDR_REQUEST.rid === rid) {\n          ev.source.postMessage({TLDR_RESPONSE: {config: params.config, rid: rid}}, location.origin);\n        }\n        _this.stopListen();\n      };\n      window.addEventListener(\"message\", _this.receiver, false);\n      setTimeout(function () {\n        return _this.stopListen();\n      }, 5000);\n\n      var bidObject;\n      if (params.bid.code === BID_AVAILABLE) {\n        bidObject = bidfactory.createBid(params.bid.code);\n        bidObject.bidderCode = 'thoughtleadr';\n        bidObject.cpm = params.bid.cpm;\n        bidObject.ad = params.bid.ad;\n        bidObject.width = size.width;\n        bidObject.height = size.height;\n      }\n      else {\n        bidObject = bidfactory.createBid(params.bid.code);\n        bidObject.bidderCode = 'thoughtleadr';\n      }\n      bidmanager.addBidResponse(bid.placementCode, bidObject);\n    });\n  };\n\n  ThoughtleadrAdapter.prototype.stopListen = function () {\n    if (this.receiver) {\n      window.removeEventListener(\"message\", this.receiver);\n      this.receiver = undefined;\n    }\n  };\n\n  ThoughtleadrAdapter.valid = function (bid) {\n    return !!(bid && bid.params && typeof bid.params.placementId === \"string\");\n  };\n\n  ThoughtleadrAdapter.getSizes = function (sizes) {\n    var first = sizes[0];\n    if (Array.isArray(first)) {\n      return ThoughtleadrAdapter.getSizes(first);\n    }\n    return {\n      width: sizes[0],\n      height: sizes[1]\n    };\n  };\n  return ThoughtleadrAdapter;\n}());\n\nmodule.exports = ThoughtleadrAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/thoughtleadr.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nvar StickyAdsTVAdapter = function StickyAdsTVAdapter() {\n\n  var MUSTANG_URL = \"//cdn.stickyadstv.com/mustang/mustang.min.js\";\n  var INTEXTROLL_URL = \"//cdn.stickyadstv.com/prime-time/intext-roll.min.js\";\n  var SCREENROLL_URL = \"//cdn.stickyadstv.com/prime-time/screen-roll.min.js\";\n  \n  var topMostWindow = getTopMostWindow();\n  topMostWindow.stickyadstv_cache = {};\n\n  function _callBids(params) {\n     \n    var bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i];\n      // Send out bid request for each bid given its tag IDs and query strings\n\n      if(bid.placementCode && bid.params.zoneId) {\n        sendBidRequest(bid);\n      }\n      else {\n        console.warn(\"StickyAdsTV: Missing mandatory field(s).\");\n      }\n\n    }\n  }\n\n  function sendBidRequest(bid){\n\n    var placementCode = bid.placementCode;\n\n    var integrationType = bid.params.format ? bid.params.format : \"inbanner\"; \n    var urltoLoad = MUSTANG_URL;\n\n    if(integrationType === \"intext-roll\"){\n      urltoLoad = INTEXTROLL_URL;\n    }\n    if(integrationType === \"screen-roll\"){\n      urltoLoad = SCREENROLL_URL;\n    }\n\n    var bidRegistered = false;\n    adloader.loadScript(urltoLoad, function(){\n\n      getBid(bid, function(bidObject){\n\n        if(!bidRegistered){\n          bidRegistered = true;\n          bidmanager.addBidResponse(placementCode, bidObject);\n        }\n        \n      });\n    }, true);\n  }\n\n  function getBid(bid, callback){\n    var zoneId = bid.params.zoneId || bid.params.zone; //accept both\n    var size = getBiggerSize(bid.sizes);\n\n    var vastLoader = new window.com.stickyadstv.vast.VastLoader();\n    bid.vast = topMostWindow.stickyadstv_cache[bid.placementCode] = vastLoader.getVast();\n\n    var vastCallback = {\n      onSuccess : bind(function(){\n        \n        //'this' is the bid request here\n        var bidRequest = this;\n        \n        var adHtml = formatAdHTML(bidRequest,size);\n        var price = extractPrice(bidRequest.vast);\n\n        callback(formatBidObject(bidRequest, true, price, adHtml, size[0], size[1]));\n        \n      },bid),\n      onError : bind(function(){\n        var bidRequest = this;\n        callback(formatBidObject(bidRequest, false));\n      },bid)\n    };\n\n    var config = {\n      zoneId:zoneId,\n      playerSize:size[0]+\"x\"+size[1],\n      vastUrlParams: bid.params.vastUrlParams,\n      componentId: \"prebid-sticky\"+(bid.params.format ? \"-\"+bid.params.format : \"\")\n    };\n\n    if(bid.params.format === \"screen-roll\"){\n      //in screenroll case we never use the original div size.\n      config.playerSize = window.com.stickyadstv.screenroll.getPlayerSize();\n    }\n    \n    vastLoader.load(config, vastCallback);\n  }\n\n  function getBiggerSize(array){\n    var result = [1,1];\n    for(var i = 0; i< array.length; i++){\n      if(array[i][0]*array[i][1] > result[0]*result[1]){\n        result = array[i];\n      }\n    }\n    return result;\n  }\n  \n  var formatInBannerHTML = function(bid,size){\n    var placementCode = bid.placementCode;\n    \n    var divHtml = \"<div id=\\\"stickyadstv_prebid_target\\\"></div>\";\n\n    var script = \"<script type='text/javascript'>\"+\n    //get the top most accessible window\n    \"var topWindow = (function(){var res=window; try{while(top != res){if(res.parent.location.href.length)res=res.parent;}}catch(e){}return res;})();\"+\n    \"var vast =  topWindow.stickyadstv_cache[\\\"\"+placementCode+\"\\\"];\"+\n    \"var config = {\"+\n    \"  preloadedVast:vast,\"+\n    \"  autoPlay:true\"+\n    \"};\"+\n    \"var ad = new topWindow.com.stickyadstv.vpaid.Ad(document.getElementById(\\\"stickyadstv_prebid_target\\\"),config);\"+\n    \"ad.initAd(\"+size[0]+\",\"+size[1]+\",\\\"\\\",0,\\\"\\\",\\\"\\\");\"+\n\n    \"</script>\";\n\n    return divHtml+script;\n  };\n\n  var formatIntextHTML = function(bid){\n    var placementCode = bid.placementCode;\n\n    var config = bid.params;\n\n    //default placement if no placement is set\n    if(!config.hasOwnProperty(\"domId\") && !config.hasOwnProperty(\"auto\") && !config.hasOwnProperty(\"p\") && !config.hasOwnProperty(\"article\")){\n      config.domId = placementCode;\n    }\n\n    var script = \"<script type='text/javascript'>\"+\n    //get the top most accessible window\n    \"var topWindow = (function(){var res=window; try{while(top != res){if(res.parent.location.href.length)res=res.parent;}}catch(e){}return res;})();\"+\n    \"var vast =  topWindow.stickyadstv_cache[\\\"\"+placementCode+\"\\\"];\"+\n    \"var config = {\"+\n    \"  preloadedVast:vast\";\n\n    for(var key in config){\n      //dont' send format parameter\n      //neither zone nor vastUrlParams value as Vast is already loaded\n      if(config.hasOwnProperty(key) && key !== \"format\" && key !== \"zone\" && key !== \"zoneId\" && key !== \"vastUrlParams\"){\n\n        script += \",\"+key+\":\\\"\"+config[key]+\"\\\"\";\n      }\n    }\n    script += \"};\"+\n    \n    \"topWindow.com.stickyadstv.intextroll.start(config);\"+\n\n    \"</script>\";\n\n    return script;\n  };\n\n  var formatScreenRollHTML = function(bid){\n    var placementCode = bid.placementCode;\n\n    var config = bid.params;\n\n    var script = \"<script type='text/javascript'>\"+\n       \n    //get the top most accessible window\n    \"var topWindow = (function(){var res=window; try{while(top != res){if(res.parent.location.href.length)res=res.parent;}}catch(e){}return res;})();\"+\n    \"var vast =  topWindow.stickyadstv_cache[\\\"\"+placementCode+\"\\\"];\"+\n    \"var config = {\"+\n    \"  preloadedVast:vast\";\n\n    for(var key in config){\n      //dont' send format parameter\n      //neither zone nor vastUrlParams values as Vast is already loaded\n      if(config.hasOwnProperty(key) && key !== \"format\" && key !== \"zone\" && key !== \"zoneId\" && key !== \"vastUrlParams\"){\n\n        script += \",\"+key+\":\\\"\"+config[key]+\"\\\"\";\n      }\n    }\n    script += \"};\"+\n    \n    \"topWindow.com.stickyadstv.screenroll.start(config);\"+\n\n    \"</script>\";\n\n    return script;\n  };\n\n  function formatAdHTML(bid, size){\n\n    var integrationType = bid.params.format;\n\n    var html = \"\";\n    if(integrationType === \"intext-roll\"){\n      html = formatIntextHTML(bid);\n    }\n    else if(integrationType === \"screen-roll\"){\n      html = formatScreenRollHTML(bid);\n    }\n    else {\n      html = formatInBannerHTML(bid,size);\n    }\n    \n    return html;\n  }\n  \n\n  function extractPrice(vast){\n    var priceData = vast.getPricing();\n\n    if(!priceData) {\n      console.warn(\"StickyAdsTV: Bid pricing Can't be retreived. You may need to enable pricing on you're zone. Please get in touch with your sticky contact.\");\n    }\n    \n    return priceData;\n  }\n\n  function formatBidObject(bidRequest, valid, priceData, html, width, height){\n    var bidObject;\n    if(valid && priceData) {\n      // valid bid response\n      bidObject = bidfactory.createBid(1, bidRequest);\n      bidObject.bidderCode = 'stickyadstv';\n      bidObject.cpm = priceData.price;\n      bidObject.currencyCode = priceData.currency;\n      bidObject.ad = html;\n      bidObject.width = width;\n      bidObject.height = height;\n      \n    }\n    else {\n      // invalid bid response\n      bidObject = bidfactory.createBid(2, bidRequest);\n      bidObject.bidderCode = 'stickyadstv';\n    }\n    return bidObject;\n  }\n\n\n  /**\n  * returns the top most accessible window\n  */\n  function getTopMostWindow(){\n    var res=window; \n\n    try {\n      while(top !== res){\n        if(res.parent.location.href.length)\n          res=res.parent;\n      }\n    }\n    catch(e){}\n\n    return res;\n  }\n  \n  /* Create a function bound to a given object (assigning `this`, and arguments,\n   * optionally). Binding with arguments is also known as `curry`.\n   * Delegates to **ECMAScript 5**'s native `Function.bind` if available.\n   * We check for `func.bind` first, to fail fast when `func` is undefined.\n   *\n   * @param {function} func\n   * @param {optional} context\n   * @param {...any} var_args \n   * @return {function}\n   */\n  var bind = function(func, context) {\n\n    return function() {         \n      return func.apply(context,arguments);\n    };\n  };\n\n\n  // Export the callBids function, so that prebid.js can execute\n  // this function when the page asks to send out bid requests.\n  return {\n    callBids: _callBids,\n    formatBidObject: formatBidObject,\n    formatAdHTML: formatAdHTML,\n    getBiggerSize:getBiggerSize,\n    getBid:getBid,\n    getTopMostWindow:getTopMostWindow\n  };\n};\n\nmodule.exports = StickyAdsTVAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/stickyadstv.js","var utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\n\n/* TripleLift bidder factory function\n*  Use to create a TripleLiftAdapter object\n*/\n\n\nvar TripleLiftAdapter = function TripleLiftAdapter() {\n\n  function _callBids(params) {\n    var tlReq = params.bids;\n    var bidsCount = tlReq.length;\n\n    // set expected bids count for callback execution\n    // bidmanager.setExpectedBidsCount('triplelift',bidsCount);\n\n    for (var i = 0; i < bidsCount; i++) {\n      var bidRequest = tlReq[i];\n      var callbackId = bidRequest.bidId;\n      adloader.loadScript(buildTLCall(bidRequest, callbackId));\n      // store a reference to the bidRequest from the callback id\n      // bidmanager.pbCallbackMap[callbackId] = bidRequest;\n    }\n  }\n\n\n  function buildTLCall(bid, callbackId) {\n    //determine tag params\n    var inventoryCode = utils.getBidIdParameter('inventoryCode', bid.params);\n    var floor = utils.getBidIdParameter('floor', bid.params);\n\n    // build our base tag, based on if we are http or https\n    var tlURI = '//tlx.3lift.com/header/auction?';\n    var tlCall = document.location.protocol + tlURI;\n\n    tlCall = utils.tryAppendQueryString(tlCall, 'callback', 'pbjs.TLCB');\n    tlCall = utils.tryAppendQueryString(tlCall, 'lib', 'prebid');\n    tlCall = utils.tryAppendQueryString(tlCall, 'v', '0.21.0');\n    tlCall = utils.tryAppendQueryString(tlCall, 'callback_id', callbackId);\n    tlCall = utils.tryAppendQueryString(tlCall, 'inv_code', inventoryCode);\n    tlCall = utils.tryAppendQueryString(tlCall, 'floor', floor);\n\n    // indicate whether flash support exists\n    tlCall = utils.tryAppendQueryString(tlCall, 'fe', isFlashEnabled());\n\n    // sizes takes a bit more logic\n    var sizeQueryString = utils.parseSizesInput(bid.sizes);\n    if (sizeQueryString) {\n      tlCall += 'size=' + sizeQueryString + '&';\n    }\n\n    // append referrer\n    var referrer = utils.getTopWindowUrl();\n    tlCall = utils.tryAppendQueryString(tlCall, 'referrer', referrer);\n\n    // remove the trailing \"&\"\n    if (tlCall.lastIndexOf('&') === tlCall.length - 1) {\n      tlCall = tlCall.substring(0, tlCall.length - 1);\n    }\n\n    // @if NODE_ENV='debug'\n    utils.logMessage('tlCall request built: ' + tlCall);\n    // @endif\n\n    // append a timer here to track latency\n    bid.startTime = new Date().getTime();\n\n    return tlCall;\n  }\n\n  function isFlashEnabled() {\n    var hasFlash = 0;\n    try {\n      // check for Flash support in IE\n      var fo = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n      if (fo) { hasFlash = 1; }\n    } catch (e) {\n      if (navigator.mimeTypes &&\n        navigator.mimeTypes['application/x-shockwave-flash'] !== undefined &&\n        navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin) {\n        hasFlash = 1;\n      }\n    }\n    return hasFlash;\n  }\n\n  // expose the callback to the global object:\n  pbjs.TLCB = function(tlResponseObj) {\n    if (tlResponseObj && tlResponseObj.callback_id) {\n      var bidObj = utils.getBidRequest(tlResponseObj.callback_id);\n      var placementCode = bidObj && bidObj.placementCode;\n\n      // @if NODE_ENV='debug'\n      if (bidObj) { utils.logMessage('JSONP callback function called for inventory code: ' + bidObj.params.inventoryCode); }\n      // @endif\n\n      var bid = [];\n      if (tlResponseObj && tlResponseObj.cpm && tlResponseObj.cpm !== 0) {\n\n        bid = bidfactory.createBid(1, bidObj);\n        bid.bidderCode = 'triplelift';\n        bid.cpm = tlResponseObj.cpm;\n        bid.ad = tlResponseObj.ad;\n        bid.width = tlResponseObj.width;\n        bid.height = tlResponseObj.height;\n        bid.dealId = tlResponseObj.deal_id;\n        bidmanager.addBidResponse(placementCode, bid);\n\n      } else {\n        // no response data\n        // @if NODE_ENV='debug'\n        if (bidObj) {utils.logMessage('No prebid response from TripleLift for inventory code: ' + bidObj.params.inventoryCode);}\n        // @endif\n        bid = bidfactory.createBid(2, bidObj);\n        bid.bidderCode = 'triplelift';\n        bidmanager.addBidResponse(placementCode, bid);\n      }\n\n    } else {\n      // no response data\n      // @if NODE_ENV='debug'\n      utils.logMessage('No prebid response for placement %%PLACEMENT%%');\n      // @endif\n\n    }\n\n  };\n\n  return {\n    callBids: _callBids\n\n  };\n};\nmodule.exports = TripleLiftAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/triplelift.js","import { getBidRequest } from '../utils.js';\n\nvar CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\nvar Adapter = require('./adapter.js');\n\nvar TwengaAdapter;\nTwengaAdapter = function TwengaAdapter() {\n  var baseAdapter = Adapter.createNew('twenga');\n\n  baseAdapter.callBids = function (params) {\n    for (var i = 0; i < params.bids.length; i++) {\n      var bidRequest = params.bids[i];\n      var callbackId = bidRequest.bidId;\n      adloader.loadScript(buildBidCall(bidRequest, callbackId));\n    }\n  };\n\n  function buildBidCall(bid, callbackId) {\n\n    var bidUrl = '//rtb.t.c4tw.net/Bid?';\n    bidUrl = utils.tryAppendQueryString(bidUrl, 's', 'h');\n    bidUrl = utils.tryAppendQueryString(bidUrl, 'callback', 'pbjs.handleTwCB');\n    bidUrl = utils.tryAppendQueryString(bidUrl, 'callback_uid', callbackId);\n    bidUrl = utils.tryAppendQueryString(bidUrl, 'referrer', utils.getTopWindowUrl());\n    if (bid.params) {\n      for (var key in bid.params) {\n        var value = bid.params[key];\n        switch (key) {\n        case 'placementId': key = 'id'; break;\n        case 'siteId': key = 'sid'; break;\n        case 'publisherId': key = 'pid'; break;\n        case 'currency': key = 'cur'; break;\n        case 'bidFloor': key = 'min'; break;\n        case 'country': key = 'gz'; break;\n        }\n        bidUrl = utils.tryAppendQueryString(bidUrl, key, value);\n      }\n    }\n\n    var sizes = utils.parseSizesInput(bid.sizes);\n    if (sizes.length > 0) {\n      bidUrl = utils.tryAppendQueryString(bidUrl, 'size', sizes.join(','));\n    }\n\n    bidUrl += 'ta=1';\n\n    // @if NODE_ENV='debug'\n    utils.logMessage('bid request built: ' + bidUrl);\n\n    // @endif\n\n    //append a timer here to track latency\n    bid.startTime = new Date().getTime();\n\n    return bidUrl;\n  }\n\n  //expose the callback to the global object:\n  pbjs.handleTwCB = function (bidResponseObj) {\n\n    var bidCode;\n\n    if (bidResponseObj && bidResponseObj.callback_uid) {\n\n      var responseCPM;\n      var id = bidResponseObj.callback_uid;\n      var placementCode = '';\n      var bidObj = getBidRequest(id);\n      if (bidObj) {\n\n        bidCode = bidObj.bidder;\n\n        placementCode = bidObj.placementCode;\n\n        bidObj.status = CONSTANTS.STATUS.GOOD;\n      }\n\n      // @if NODE_ENV='debug'\n      utils.logMessage('JSONP callback function called for ad ID: ' + id);\n\n      // @endif\n      var bid = [];\n      if (bidResponseObj.result &&\n          bidResponseObj.result.cpm &&\n          bidResponseObj.result.cpm !== 0 &&\n          bidResponseObj.result.ad) {\n\n        var result = bidResponseObj.result;\n\n        responseCPM = parseInt(result.cpm, 10);\n\n        //CPM response from /Bid is dollar/cent multiplied by 10000\n        //in order to avoid using floats\n        //switch CPM to \"dollar/cent\"\n        responseCPM = responseCPM / 10000;\n\n        var ad = result.ad.replace('%%WP%%', result.cpm);\n\n        //store bid response\n        //bid status is good (indicating 1)\n        bid = bidfactory.createBid(1, bidObj);\n        bid.creative_id = result.creative_id;\n        bid.bidderCode = bidCode;\n        bid.cpm = responseCPM;\n        if (ad && (ad.lastIndexOf('http', 0) === 0 || ad.lastIndexOf('//', 0) === 0))\n          bid.adUrl = ad;\n        else\n          bid.ad = ad;\n        bid.width = result.width;\n        bid.height = result.height;\n\n        bidmanager.addBidResponse(placementCode, bid);\n\n      } else {\n        //no response data\n        // @if NODE_ENV='debug'\n        utils.logMessage('No prebid response from Twenga for placement code ' + placementCode);\n\n        // @endif\n        //indicate that there is no bid for this placement\n        bid = bidfactory.createBid(2, bidObj);\n        bid.bidderCode = bidCode;\n        bidmanager.addBidResponse(placementCode, bid);\n      }\n\n    } else {\n      //no response data\n      // @if NODE_ENV='debug'\n      utils.logMessage('No prebid response for placement %%PLACEMENT%%');\n\n      // @endif\n    }\n  };\n\n  return {\n    callBids: baseAdapter.callBids,\n    setBidderCode: baseAdapter.setBidderCode,\n    createNew: TwengaAdapter.createNew,\n    buildBidCall: buildBidCall\n  };\n};\n\nTwengaAdapter.createNew = function () {\n  return new TwengaAdapter();\n};\n\nmodule.exports = TwengaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/twenga.js","/**\n * @overview Yieldbot sponsored Prebid.js adapter.\n * @author elljoh\n */\nvar adloader = require('../adloader');\nvar bidfactory = require('../bidfactory');\nvar bidmanager = require('../bidmanager');\nvar utils = require('../utils');\n\n/**\n * Adapter for requesting bids from Yieldbot.\n *\n * @returns {Object} Object containing implementation for invocation in {@link module:adaptermanger.callBids}\n * @class\n */\nvar YieldbotAdapter = function YieldbotAdapter() {\n\n  window.ybotq = window.ybotq || [];\n\n  var ybotlib = {\n    BID_STATUS: {\n      PENDING: 0,\n      AVAILABLE: 1,\n      EMPTY: 2\n    },\n    definedSlots: [],\n    pageLevelOption: false,\n    /**\n     * Builds the Yieldbot creative tag.\n     *\n     * @param {String} slot - The slot name to bid for\n     * @param {String} size - The dimenstions of the slot\n     * @private\n     */\n    buildCreative: function (slot, size) {\n      return '<script type=\"text/javascript\" src=\"//cdn.yldbt.com/js/yieldbot.intent.js\"></script>' +\n        '<script type=\"text/javascript\">var ybotq = ybotq || [];' +\n        'ybotq.push(function () {yieldbot.renderAd(\\'' + slot + ':' + size + '\\');});</script>';\n    },\n    /**\n     * Bid response builder.\n     *\n     * @param {Object} slotCriteria  - Yieldbot bid criteria\n     * @private\n     */\n    buildBid: function (slotCriteria) {\n      var bid = {};\n\n      if (slotCriteria && slotCriteria.ybot_ad && slotCriteria.ybot_ad !== 'n') {\n\n        bid = bidfactory.createBid(ybotlib.BID_STATUS.AVAILABLE);\n\n        bid.cpm = parseInt(slotCriteria.ybot_cpm) / 100.0 || 0; // Yieldbot CPM bids are in cents\n\n        var szArr = slotCriteria.ybot_size ? slotCriteria.ybot_size.split('x') : [0, 0];\n        var slot = slotCriteria.ybot_slot || '';\n        var sizeStr = slotCriteria.ybot_size || ''; // Creative template needs the dimensions string\n\n        bid.width = szArr[0] || 0;\n        bid.height = szArr[1] || 0;\n\n        bid.ad = ybotlib.buildCreative(slot, sizeStr);\n\n        // Add Yieldbot parameters to allow publisher bidderSettings.yieldbot specific targeting\n        for (var k in slotCriteria) {\n          bid[k] = slotCriteria[k];\n        }\n\n      } else {\n        bid = bidfactory.createBid(ybotlib.BID_STATUS.EMPTY);\n      }\n\n      bid.bidderCode = 'yieldbot';\n      return bid;\n    },\n    /**\n     * Yieldbot implementation of {@link module:adaptermanger.callBids}\n     * @param {Object} params - Adapter bid configuration object\n     * @private\n     */\n    callBids: function (params) {\n\n      var bids = params.bids || [];\n      var ybotq = window.ybotq || [];\n\n      ybotlib.pageLevelOption = false;\n\n      ybotq.push(function () {\n        var yieldbot = window.yieldbot;\n\n        utils._each(bids, function (v) {\n          var bid = v;\n          var psn = bid.params && bid.params.psn || 'ERROR_DEFINE_YB_PSN';\n          var slot = bid.params && bid.params.slot || 'ERROR_DEFINE_YB_SLOT';\n\n          yieldbot.pub(psn);\n          yieldbot.defineSlot(slot, { sizes: bid.sizes || [] });\n\n          ybotlib.definedSlots.push(bid.bidId);\n        });\n\n        yieldbot.enableAsync();\n        yieldbot.go();\n      });\n\n      ybotq.push(function () {\n        ybotlib.handleUpdateState();\n      });\n\n      adloader.loadScript('//cdn.yldbt.com/js/yieldbot.intent.js', null, true);\n    },\n    /**\n     * Yieldbot bid request callback handler.\n     *\n     * @see {@link YieldbotAdapter~_callBids}\n     * @private\n     */\n    handleUpdateState: function () {\n      var yieldbot = window.yieldbot;\n\n      utils._each(ybotlib.definedSlots, function (v) {\n        var slot;\n        var criteria;\n        var placementCode;\n        var adapterConfig;\n\n        adapterConfig = pbjs._bidsRequested\n            .find(bidderRequest => bidderRequest.bidderCode === 'yieldbot').bids\n              .find(bid => bid.bidId === v) || {};\n        slot = adapterConfig.params.slot || '';\n        criteria = yieldbot.getSlotCriteria(slot);\n\n        placementCode = adapterConfig.placementCode || 'ERROR_YB_NO_PLACEMENT';\n        var bid = ybotlib.buildBid(criteria);\n\n        bidmanager.addBidResponse(placementCode, bid);\n\n      });\n    }\n  };\n  return {\n    callBids: ybotlib.callBids\n  };\n};\n\nmodule.exports = YieldbotAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/yieldbot.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar defaultPlacementForBadBid = null;\n\n/**\n * Adapter for requesting bids from NginAd\n */\nvar NginAdAdapter = function NginAdAdapter() {\n\n  var rtbServerDomain = 'placeholder.for.nginad.server.com';\n\n  function _callBids(params) {\n    var nginadBids = params.bids || [];\n\n    // De-dupe by tagid then issue single bid request for all bids\n    _requestBids(_getUniqueTagids(nginadBids));\n  }\n\n  // filter bids to de-dupe them?\n  function _getUniqueTagids(bids) {\n    var key;\n    var map = {};\n    var PubZoneIds = [];\n\n    for (key in bids) {\n      map[utils.getBidIdParameter('pzoneid', bids[key].params)] = bids[key];\n    }\n\n    for (key in map) {\n      if (map.hasOwnProperty(key)) {\n        PubZoneIds.push(map[key]);\n      }\n    }\n\n    return PubZoneIds;\n  }\n\n  function getWidthAndHeight(bid) {\n\n    var adW = null;\n    var adH = null;\n\n    var sizeArrayLength = bid.sizes.length;\n    if (sizeArrayLength === 2 && typeof bid.sizes[0] === 'number' && typeof bid.sizes[1] === 'number') {\n      adW = bid.sizes[0];\n      adH = bid.sizes[1];\n    } else {\n      adW = bid.sizes[0][0];\n      adH = bid.sizes[0][1];\n    }\n\n    return [adW, adH];\n  }\n\n  function _requestBids(bidReqs) {\n    // build bid request object\n    var domain = window.location.host;\n    var page = window.location.pathname + location.search + location.hash;\n\n    var nginadImps = [];\n\n    //assign the first adUnit (placement) for bad bids;\n    defaultPlacementForBadBid = bidReqs[0].placementCode;\n\n\n    //build impression array for nginad\n    utils._each(bidReqs, function(bid) {\n      var tagId = utils.getBidIdParameter('pzoneid', bid.params);\n      var bidFloor = utils.getBidIdParameter('bidfloor', bid.params);\n\n      var whArr = getWidthAndHeight(bid);\n\n      var imp = {\n        id: bid.bidId,\n        banner: {\n          w: whArr[0],\n          h: whArr[1]\n        },\n        tagid: tagId,\n        bidfloor: bidFloor\n      };\n\n      nginadImps.push(imp);\n      //bidmanager.pbCallbackMap[imp.id] = bid;\n\n      rtbServerDomain = bid.params.nginadDomain;\n\n    });\n\n    // build bid request with impressions\n    var nginadBidReq = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: nginadImps,\n      site: {\n        domain: domain,\n        page: page\n      }\n    };\n\n    var scriptUrl = window.location.protocol + '//' + rtbServerDomain + '/bid/rtb?callback=window.pbjs.nginadResponse' +\n      '&br=' + encodeURIComponent(JSON.stringify(nginadBidReq));\n\n    adloader.loadScript(scriptUrl);\n  }\n\n  function handleErrorResponse(bidReqs, defaultPlacementForBadBid) {\n    //no response data\n    if (defaultPlacementForBadBid === null) {\n      // no id with which to create an dummy bid\n      return;\n    }\n\n    var bid = bidfactory.createBid(2);\n    bid.bidderCode = 'nginad';\n    bidmanager.addBidResponse(defaultPlacementForBadBid, bid);\n  }\n\n  //expose the callback to the global object:\n  pbjs.nginadResponse = function(nginadResponseObj) {\n    var bid = {};\n    var key;\n\n    // valid object?\n    if (!nginadResponseObj || !nginadResponseObj.id) {\n      return handleErrorResponse(nginadResponseObj, defaultPlacementForBadBid);\n    }\n\n    if (!nginadResponseObj.seatbid || nginadResponseObj.seatbid.length === 0 || !nginadResponseObj.seatbid[0].bid || nginadResponseObj.seatbid[0].bid.length === 0) {\n      return handleErrorResponse(nginadResponseObj, defaultPlacementForBadBid);\n    }\n\n    for (key in nginadResponseObj.seatbid[0].bid) {\n\n      var nginadBid = nginadResponseObj.seatbid[0].bid[key];\n\n      var responseCPM;\n      var placementCode = '';\n      var id = nginadBid.impid;\n\n      // try to fetch the bid request we sent NginAd\n      /*jshint -W083 */\n      var bidObj = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'nginad').bids\n        .find(bid => bid.bidId === id);\n      if (!bidObj) {\n        return handleErrorResponse(nginadBid, defaultPlacementForBadBid);\n      }\n\n      placementCode = bidObj.placementCode;\n      bidObj.status = CONSTANTS.STATUS.GOOD;\n\n      //place ad response on bidmanager._adResponsesByBidderId\n      responseCPM = parseFloat(nginadBid.price);\n\n      if (responseCPM === 0) {\n        handleErrorResponse(nginadBid, id);\n      }\n\n      nginadBid.placementCode = placementCode;\n      nginadBid.size = bidObj.sizes;\n      var responseAd = nginadBid.adm;\n\n      //store bid response\n      //bid status is good (indicating 1)\n      bid = bidfactory.createBid(1);\n      bid.creative_id = nginadBid.Id;\n      bid.bidderCode = 'nginad';\n      bid.cpm = responseCPM;\n\n      //The bid is a mock bid, the true bidding process happens after the publisher tag is called\n      bid.ad = decodeURIComponent(responseAd);\n\n      var whArr = getWidthAndHeight(bidObj);\n      bid.width = whArr[0];\n      bid.height = whArr[1];\n\n      bidmanager.addBidResponse(placementCode, bid);\n\n    }\n\n  }; // nginadResponse\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = NginAdAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/nginad.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\n/**\n * Adapter for requesting bids from Brightcom\n */\nvar BrightcomAdapter = function BrightcomAdapter() {\n\n  // Set Brightcom Bidder URL\n  var brightcomUrl = 'hb.iselephant.com/auc/ortb';\n\n  // Define the bidder code\n  var brightcomBidderCode = 'brightcom';\n\n  // Define the callback function\n  var brightcomCallbackFunction = 'window.pbjs=window.pbjs||window.parent.pbjs||window.top.pbjs;window.pbjs.brightcomResponse';\n\n  // Manage the requested and received ad units' codes, to know which are invalid (didn't return)\n  var reqAdUnitsCode = [],\n      resAdUnitsCode = [];\n\n  function _callBids(params) {\n\n    var bidRequests = params.bids || [];\n\n    // Get page data\n    var siteDomain = window.location.host;\n    var sitePage = window.location.href;\n\n    // Prepare impressions object\n    var brightcomImps = [];\n\n    // Prepare a variable for publisher id\n    var pubId = '';\n\n    // Go through the requests and build array of impressions\n    utils._each(bidRequests, function(bid) {\n\n      // Get impression details\n      var tagId = utils.getBidIdParameter('tagId', bid.params);\n      var ref = utils.getBidIdParameter('ref', bid.params);\n      var adWidth=0;\n      var adHeight=0;\n\n      // If no publisher id is set, use the current\n      if (pubId === '') {\n        // Get the current publisher id (if it doesn't exist, it'll return '')\n        pubId = utils.getBidIdParameter('pubId', bid.params);\n      }\n\n      // Brightcom supports only 1 size per impression\n      // Check if the array contains 1 size or array of sizes\n      if (bid.sizes.length === 2 && typeof bid.sizes[0] === 'number' && typeof bid.sizes[1] === 'number') {\n        // The array contains 1 size (the items are the values)\n        adWidth = bid.sizes[0];\n        adHeight = bid.sizes[1];\n      } else {\n        // The array contains array of sizes, use the first size\n        adWidth = bid.sizes[0][0];\n        adHeight = bid.sizes[0][1];\n      }\n\n      // Build the impression\n      var imp = {\n        id: utils.getUniqueIdentifierStr(),\n        banner: {\n          w: adWidth,\n          h: adHeight\n        },\n        tagid: tagId\n      };\n\n      // If ref exists, create it (in the \"ext\" object)\n      if (ref !== '') {\n        imp.ext = {\n          refoverride: ref\n        };\n      }\n\n      // Add current impression to collection\n      brightcomImps.push(imp);\n      // Add mapping to current bid via impression id\n      //bidmanager.pbCallbackMap[imp.id] = bid;\n\n      // Add current ad unit's code to tracking\n      reqAdUnitsCode.push(bid.placementCode);\n\n    });\n\n    // Build the bid request\n    var brightcomBidReq = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: brightcomImps,\n      site:{\n        publisher: {\n          id: pubId\n        },\n        domain: siteDomain,\n        page: sitePage\n      }\n    };\n\n    // Add timeout data, if available\n    var PREBID_TIMEOUT = PREBID_TIMEOUT || 0;\n    var curTimeout = PREBID_TIMEOUT;\n    if (curTimeout > 0) {\n      brightcomBidReq.tmax = curTimeout;\n    }\n\n    // Define the bid request call URL\n    var bidRequestCallUrl = 'https://' + brightcomUrl +\n        '?callback=' + encodeURIComponent(brightcomCallbackFunction) +\n        '&request=' + encodeURIComponent(JSON.stringify(brightcomBidReq));\n\n    // Add the call to get the bid\n    adloader.loadScript(bidRequestCallUrl);\n  }\n\n  //expose the callback to the global object:\n  pbjs.brightcomResponse = function(brightcomResponseObj) {\n\n    var bid = {};\n\n    // Make sure response is valid\n    if (\n        (brightcomResponseObj) && (brightcomResponseObj.id) &&\n        (brightcomResponseObj.seatbid) && (brightcomResponseObj.seatbid.length !== 0) &&\n        (brightcomResponseObj.seatbid[0].bid) && (brightcomResponseObj.seatbid[0].bid.length !== 0)\n    ) {\n\n      // Go through the received bids\n      brightcomResponseObj.seatbid[0].bid.forEach( function(curBid) {\n\n        // Get the bid request data\n        var bidRequest = pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === 'brightcom').bids[0]; // this assumes a single request only\n\n        // Make sure the bid exists\n        if (bidRequest) {\n\n          var placementCode = bidRequest.placementCode;\n          bidRequest.status = CONSTANTS.STATUS.GOOD;\n\n          curBid.placementCode = placementCode;\n          curBid.size = bidRequest.sizes;\n\n          // Get the creative\n          var responseCreative = curBid.adm;\n          // Build the NURL element\n          var responseNurl = '<img src=\"' + curBid.nurl + '\" width=\"1\" height=\"1\" style=\"display:none\" />';\n          // Build the ad to display:\n          var responseAd = decodeURIComponent(responseCreative + responseNurl);\n\n          // Create a valid bid\n          bid = bidfactory.createBid(1);\n\n          // Set the bid data\n          bid.creative_id = curBid.Id;\n          bid.bidderCode = brightcomBidderCode;\n          bid.cpm = parseFloat(curBid.price);\n\n          // Brightcom tag is in <script> block, so use bid.ad, not bid.adurl\n          bid.ad = responseAd;\n\n          // Since Brightcom currently supports only 1 size, if multiple sizes are provided - take the first\n          var adWidth, adHeight;\n          if ((bidRequest.sizes.length === 2) && (typeof bidRequest.sizes[0] === 'number') && (typeof bidRequest.sizes[1] === 'number')) {\n            // Only one size is provided\n            adWidth = bidRequest.sizes[0];\n            adHeight = bidRequest.sizes[1];\n          } else {\n            // And array of sizes is provided. Take the first.\n            adWidth = bidRequest.sizes[0][0];\n            adHeight = bidRequest.sizes[0][1];\n          }\n\n          // Set the ad's width and height\n          bid.width = adWidth;\n          bid.height = adHeight;\n\n          // Add the bid\n          bidmanager.addBidResponse(placementCode, bid);\n\n          // Add current ad unit's code to tracking\n          resAdUnitsCode.push(placementCode);\n\n        }\n      });\n\n    }\n\n    // Define all unreceived ad unit codes as invalid (if Brightcom don't want to bid on an impression, it won't include it in the response)\n    for (var i = 0; i < reqAdUnitsCode.length; i++) {\n      var adUnitCode = reqAdUnitsCode[i];\n      // Check if current ad unit code was NOT received\n      if (resAdUnitsCode.indexOf(adUnitCode) === -1) {\n        // Current ad unit wasn't returned. Define it as invalid.\n        bid = bidfactory.createBid(2);\n        bid.bidderCode = brightcomBidderCode;\n        bidmanager.addBidResponse(adUnitCode, bid);\n      }\n    }\n\n  };\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = BrightcomAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/brightcom.js","var bidfactory = require('../bidfactory.js'),\n    bidmanager = require('../bidmanager.js'),\n    utils = require('../utils.js'),\n    adloader = require('../adloader');\n\nvar WideOrbitAdapter = function WideOrbitAdapter() {\n  var pageImpression = 'JSAdservingMP.ashx?pc={pc}&pbId={pbId}&clk=&exm=&jsv=1.0&tsv=1.0&cts={cts}&arp=0&fl=0&vitp=&vit=&jscb=window.pbjs.handleWideOrbitCallback&url={referrer}&fp=&oid=&exr=&mraid=&apid=&apbndl=&mpp=0&uid=&cb={cb}&hb=1',\n      pageRepeatCommonParam = '&gid{o}={gid}&pp{o}=&clk{o}=&rpos{o}={rpos}&ecpm{o}={ecpm}&ntv{o}=&ntl{o}=&adsid{o}=',\n      pageRepeatParamId = '&pId{o}={pId}&rank{o}={rank}',\n      pageRepeatParamNamed = '&wsName{o}={wsName}&wName{o}={wName}&rank{o}={rank}&bfDim{o}={width}x{height}&subp{o}={subp}',\n      base = (window.location.protocol) + '//p{pbId}.atemda.com/',\n      bids,\n      adapterName = 'wideorbit';\n\n  function _fixParamNames(param) {\n    if (!param) {\n      return;\n    }\n\n    var properties = ['site', 'page', 'width', 'height', 'rank', 'subPublisher', 'ecpm', 'atf', 'pId', 'pbId', 'referrer'],\n        prop;\n\n    utils._each(properties, function (correctName) {\n      for (prop in param) {\n        if (param.hasOwnProperty(prop) && prop.toLowerCase() === correctName.toLowerCase()) {\n          param[correctName] = param[prop];\n          break;\n        }\n      }\n    });\n  }\n\n  function _setParam(str, param, value) {\n    var pattern = new RegExp('{' + param + '}', 'g');\n\n    if (value === true) {\n      value = 1;\n    }\n    if (value === false) {\n      value = 0;\n    }\n    return str.replace(pattern, value);\n  }\n\n  function _setParams(str, keyValuePairs) {\n    utils._each(keyValuePairs, function (keyValuePair) {\n      str = _setParam(str, keyValuePair[0], keyValuePair[1]);\n    });\n    return str;\n  }\n\n  function _setCommonParams(pos, params) {\n    return _setParams(pageRepeatCommonParam, [\n      ['o', pos],\n      ['gid', encodeURIComponent(params.tagId)],\n      ['rpos', params.atf ? 1001 : 0],\n      ['ecpm', params.ecpm || '']\n    ]);\n  }\n\n  function _getRankParam(rank, pos) {\n    return rank || pos;\n  }\n\n  function _setupIdPlacementParameters(pos, params) {\n    return _setParams(pageRepeatParamId, [\n      ['o', pos],\n      ['pId', params.pId],\n      ['rank', _getRankParam(params.rank, pos)]\n    ]);\n  }\n\n  function _setupNamedPlacementParameters(pos, params) {\n    return _setParams(pageRepeatParamNamed, [\n      ['o', pos],\n      ['wsName', encodeURIComponent(decodeURIComponent(params.site))],\n      ['wName', encodeURIComponent(decodeURIComponent(params.page))],\n      ['width', params.width],\n      ['height', params.height],\n      ['subp', params.subPublisher ? encodeURIComponent(decodeURIComponent(params.subPublisher)) : ''],\n      ['rank', _getRankParam(params.rank, pos)]\n    ]);\n  }\n\n  function _setupAdCall(publisherId, placementCount, placementsComponent, referrer) {\n    return _setParams(base + pageImpression, [\n      ['pbId', publisherId],\n      ['pc', placementCount],\n      ['cts', new Date().getTime()],\n      ['cb', Math.floor(Math.random() * 100000000)],\n      ['referrer', encodeURIComponent(referrer || '')]\n    ]) + placementsComponent;\n  }\n\n  function _setupPlacementParameters(pos, params) {\n    var commonParams = _setCommonParams(pos, params);\n\n    if (params.pId) {\n      return _setupIdPlacementParameters(pos, params) + commonParams;\n    }\n\n    return _setupNamedPlacementParameters(pos, params) + commonParams;\n  }\n\n  function _callBids(params) {\n    var publisherId,\n      bidUrl = '',\n      i, referrer;\n\n    bids = params.bids || [];\n\n    for (i = 0; i < bids.length; i++) {\n      var requestParams = bids[i].params;\n\n      requestParams.tagId = bids[i].placementCode;\n\n      _fixParamNames(requestParams);\n\n      publisherId = requestParams.pbId;\n      referrer = referrer || requestParams.referrer;\n      bidUrl += _setupPlacementParameters(i, requestParams);\n    }\n\n    bidUrl = _setupAdCall(publisherId, bids.length, bidUrl, referrer);\n\n    utils.logMessage('Calling WO: ' + bidUrl);\n\n    adloader.loadScript(bidUrl);\n  }\n\n  function _processUserMatchings(userMatchings) {\n    var headElem = document.getElementsByTagName('head')[0],\n        createdElem;\n\n    utils._each(userMatchings, function (userMatching) {\n      switch (userMatching.Type) {\n        case 'redirect':\n          createdElem = document.createElement('img');\n          break;\n        case 'iframe':\n          createdElem = utils.createInvisibleIframe();\n          break;\n        case 'js':\n          createdElem = document.createElement('script');\n          createdElem.type = 'text/javascript';\n          createdElem.async = true;\n          break;\n      }\n      createdElem.src = decodeURIComponent(userMatching.Url);\n      headElem.insertBefore(createdElem, headElem.firstChild);\n    });\n  }\n\n  function _getBidResponse(id, placements) {\n    var i;\n\n    for (i = 0; i < placements.length; i++) {\n      if (placements[i].ExtPlacementId === id) {\n        return placements[i];\n      }\n    }\n  }\n\n  function _isUrl(scr) {\n    return scr.slice(0, 6) === \"http:/\" || scr.slice(0, 7) === \"https:/\" || scr.slice(0, 2) === \"//\";\n  }\n\n  function _buildAdCode(placement) {\n    var adCode = placement.Source, pixelTag;\n\n    utils._each(placement.TrackingCodes, function (trackingCode) {\n      if (_isUrl(trackingCode)) {\n        pixelTag = '<img src=\"' + trackingCode + '\" width=\"0\" height=\"0\" style=\"position:absolute\"></img>';\n      } else {\n        pixelTag = trackingCode;\n      }\n      adCode = pixelTag + adCode;\n    });\n\n    return adCode;\n  }\n\n  window.pbjs = window.pbjs || {};\n  window.pbjs.handleWideOrbitCallback = function (response) {\n    var bidResponse,\n      bidObject;\n\n    utils.logMessage('WO response. Placements: ' + response.Placements.length);\n\n    _processUserMatchings(response.UserMatchings);\n\n    utils._each(bids, function (bid) {\n      bidResponse = _getBidResponse(bid.placementCode, response.Placements);\n\n      if (bidResponse && bidResponse.Type === 'DirectHTML') {\n        bidObject = bidfactory.createBid(1);\n        bidObject.cpm = bidResponse.Bid;\n        bidObject.ad = _buildAdCode(bidResponse);\n        bidObject.width = bidResponse.Width;\n        bidObject.height = bidResponse.Height;\n      } else {\n        bidObject = bidfactory.createBid(2);\n      }\n\n      bidObject.bidderCode = adapterName;\n      bidmanager.addBidResponse(bid.placementCode, bidObject);\n    });\n  };\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = WideOrbitAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/wideorbit.js","var bidfactory = require('src/bidfactory.js');\nvar bidmanager = require('src/bidmanager.js');\nvar adloader = require('src/adloader.js');\nvar utils = require('src/utils.js');\n\n\nvar JCMAdapter = function JCMAdapter() {\n\n  window.pbjs = window.pbjs || {};\n  window.pbjs.processJCMResponse = function(JCMResponse) {\n    if (JCMResponse) {\n      var JCMRespObj = JSON.parse(JCMResponse);\n      if (JCMRespObj) {\n        var bids = JCMRespObj.bids;\n        for (var i = 0; i < bids.length; i++) {\n          var bid = bids[i];\n          var bidObject;\n          if (bid.cpm > 0) {\n            bidObject = bidfactory.createBid(1);\n            bidObject.bidderCode = 'jcm';\n            bidObject.cpm = bid.cpm;\n            bidObject.ad = decodeURIComponent(bid.ad.replace(/\\+/g, '%20'));\n            bidObject.width = bid.width;\n            bidObject.height = bid.height;\n            bidmanager.addBidResponse(utils.getBidRequest(bid.callbackId).placementCode, bidObject);\n          }\n          else {\n            bidObject = bidfactory.createBid(2);\n            bidObject.bidderCode = 'jcm';\n            bidmanager.addBidResponse(utils.getBidRequest(bid.callbackId).placementCode, bidObject);\n          }\n        }\n      }\n    }\n  };\n\n  function _callBids(params) {\n\n    var BidRequest = {\n      bids: []\n    };\n\n    for (var i = 0; i < params.bids.length; i++) {\n\n      var adSizes = \"\";\n      var bid = params.bids[i];\n      for (var x = 0; x < bid.sizes.length; x++) {\n        adSizes += utils.parseGPTSingleSizeArray(bid.sizes[x]);\n        if (x !== (bid.sizes.length - 1)) {\n          adSizes += ',';\n        }\n      }\n\n\n      BidRequest.bids.push({\n        \"callbackId\"   : bid.bidId,\n        \"siteId\"       : bid.params.siteId,\n        \"adSizes\"\t   : adSizes\n      });\n    }\n\n    var JSONStr = JSON.stringify(BidRequest);\n    var reqURL = document.location.protocol+\"//media.adfrontiers.com/pq?t=hb&bids=\" + encodeURIComponent(JSONStr);\n    adloader.loadScript(reqURL);\n  }\n\n  return {\n    callBids: _callBids\n  };\n\n};\n\nmodule.exports = JCMAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/jcm.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\nvar utils = require('../utils.js');\n\nvar UnderdogMediaAdapter = function UnderdogMediaAdapter() {\n\n  const UDM_ADAPTER_VERSION = '1.0.0';\n  var getJsStaticUrl = window.location.protocol + '//udmserve.net/udm/img.fetch?tid=1;dt=9;callback=pbjs.handleUnderdogMediaCB;';\n  var bidParams = {};\n\n  function _callBids(params) {\n    bidParams = params;\n    var sizes = [];\n    var siteId = 0;\n\n    for (var bidParam of bidParams.bids) {\n      sizes = utils.flatten(sizes,utils.parseSizesInput(bidParam.sizes));\n      siteId = bidParam.params.siteId;\n    }\n    adloader.loadScript(getJsStaticUrl + \"sid=\" + siteId + \";sizes=\" + sizes.join(\",\"), null, false);\n  }\n\n  function _callback(response) {\n\n    var mids = response.mids;\n    for (var bidParam of bidParams.bids) {\n\n      var filled = false;\n      for (var mid of mids) {\n\n        if (mid.useCount > 0) {\n          continue;\n        }\n        if (!mid.useCount) {\n          mid.useCount = 0;\n        }\n        var size_not_found = true;\n        for (var size of utils.parseSizesInput(bidParam.sizes)) {\n          if (size === mid.width + 'x' + mid.height) {\n            size_not_found = false;\n          }\n        }\n        if (size_not_found) {\n          continue;\n        }\n\n        var bid = bidfactory.createBid(1, bidParam);\n        bid.bidderCode = bidParam.bidder;\n        bid.width = mid.width;\n        bid.height = mid.height;\n\n        bid.cpm = parseFloat(mid.cpm);\n        if (bid.cpm <= 0) {\n          continue;\n        }\n        mid.useCount++;\n        bid.ad = mid.ad_code_html;\n        bid.ad = _makeNotification(bid, mid, bidParam) + bid.ad;\n        if (!(bid.ad || bid.adUrl)) {\n          continue;\n        }\n        bidmanager.addBidResponse(bidParam.placementCode, bid);\n        filled = true;\n        break;\n      }\n      if (!filled) {\n        var nobid = bidfactory.createBid(2, bidParam);\n        nobid.bidderCode = bidParam.bidder;\n        bidmanager.addBidResponse(bidParam.placementCode, nobid);\n      }\n    }\n  }\n\n  pbjs.handleUnderdogMediaCB = _callback;\n\n  function _makeNotification(bid, mid, bidParam) {\n\n    var url = mid.notification_url;\n\n    url += UDM_ADAPTER_VERSION;\n    url += \";cb=\" + Math.random();\n    url += \";qqq=\" + (1 / bid.cpm);\n    url += \";hbt=\" + pbjs.bidderTimeout;\n    url += ';style=adapter';\n    url += ';vis=' + encodeURIComponent(document.visibilityState);\n\n    url += ';traffic_info=' + encodeURIComponent(JSON.stringify(_getUrlVars()));\n    if (bidParam.params.subId) {\n      url += ';subid=' + encodeURIComponent(bidParam.params.subId);\n    }\n    return \"<script async src=\\\"\" + url + \"\\\"></script>\";\n  }\n\n  function _getUrlVars() {\n    var vars = {};\n    var hash;\n    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n    for (var i = 0; i < hashes.length; i++) {\n      hash = hashes[i].split('=');\n      if (!hash[0].match(/^utm/)) {\n        continue;\n      }\n      vars[hash[0]] = hash[1].substr(0, 150);\n    }\n    return vars;\n  }\n\n\n  return {\n    callBids: _callBids\n  };\n\n};\n\nmodule.exports = UnderdogMediaAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/underdogmedia.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar defaultPlacementForBadBid = null;\nvar bidderName = 'memeglobal';\n/**\n * Adapter for requesting bids from Meme Global Media Group\n * OpenRTB compatible\n */\nvar MemeGlobalAdapter = function MemeGlobalAdapter() {\n  var bidder = 'stinger.memeglobal.com/api/v1/services/prebid';\n\n  function _callBids(params) {\n    var bids = params.bids;\n\n    if (!bids) return;\n\n    // assign the first adUnit (placement) for bad bids;\n    defaultPlacementForBadBid = bids[0].placementCode;\n\n    for (var i = 0; i < bids.length; i++) {\n      _requestBid(bids[i]);\n    }\n  }\n\n  function _requestBid(bidReq) {\n    // build bid request object\n    var domain = window.location.host;\n    var page = window.location.host + window.location.pathname + location.search + location.hash;\n\n    var tagId = utils.getBidIdParameter('tagid', bidReq.params);\n    var bidFloor = Number(utils.getBidIdParameter('bidfloor', bidReq.params));\n    var adW = 0;\n    var adH = 0;\n\n    var bidSizes = Array.isArray(bidReq.params.sizes) ? bidReq.params.sizes : bidReq.sizes;\n    var sizeArrayLength = bidSizes.length;\n    if (sizeArrayLength === 2 && typeof bidSizes[0] === 'number' && typeof bidSizes[1] === 'number') {\n      adW = bidSizes[0];\n      adH = bidSizes[1];\n    } else {\n      adW = bidSizes[0][0];\n      adH = bidSizes[0][1];\n    }\n\n    // build bid request with impressions\n    var bidRequest = {\n      id: utils.getUniqueIdentifierStr(),\n      imp: [{\n        id: bidReq.bidId,\n        banner: {\n          w: adW,\n          h: adH\n        },\n        tagid: bidReq.placementCode,\n        bidfloor: bidFloor\n      }],\n      site: {\n        domain: domain,\n        page: page,\n        publisher: {\n          id: tagId\n        }\n      }\n    };\n\n    var scriptUrl = '//' + bidder + '?callback=window.pbjs.mgres' +\n      '&src=' + CONSTANTS.REPO_AND_VERSION +\n      '&br=' + encodeURIComponent(JSON.stringify(bidRequest));\n    adloader.loadScript(scriptUrl);\n  }\n\n  function getBidSetForBidder() {\n    return pbjs._bidsRequested.find(bidSet => bidSet.bidderCode === bidderName);\n  }\n\n  // expose the callback to the global object:\n  pbjs.mgres = function (bidResp) {\n\n    // valid object?\n    if ((!bidResp || !bidResp.id) ||\n      (!bidResp.seatbid || bidResp.seatbid.length === 0 || !bidResp.seatbid[0].bid || bidResp.seatbid[0].bid.length === 0)) {\n      return ;\n    }\n\n    bidResp.seatbid[0].bid.forEach(function (bidderBid) {\n      var responseCPM;\n      var placementCode = '';\n\n      var bidSet = getBidSetForBidder();\n      var bidRequested = bidSet.bids.find(b => b.bidId === bidderBid.impid);\n      if (bidRequested) {\n        var bidResponse = bidfactory.createBid(1);\n        placementCode = bidRequested.placementCode;\n        bidRequested.status = CONSTANTS.STATUS.GOOD;\n        responseCPM = parseFloat(bidderBid.price);\n        if (responseCPM === 0) {\n          var bid = bidfactory.createBid(2);\n          bid.bidderCode = bidderName;\n          bidmanager.addBidResponse(placementCode, bid);\n          return;\n        }\n        bidResponse.placementCode = placementCode;\n        bidResponse.size = bidRequested.sizes;\n        var responseAd = bidderBid.adm;\n        var responseNurl = '<img src=\"' + bidderBid.nurl + '\" height=\"0px\" width=\"0px\" style=\"display: none;\">';\n        bidResponse.creative_id = bidderBid.id;\n        bidResponse.bidderCode = bidderName;\n        bidResponse.cpm = responseCPM;\n        bidResponse.ad = decodeURIComponent(responseAd + responseNurl);\n        bidResponse.width = parseInt(bidderBid.w);\n        bidResponse.height = parseInt(bidderBid.h);\n        bidmanager.addBidResponse(placementCode, bidResponse);\n      }\n    });\n  };\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = MemeGlobalAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/memeglobal.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar CriteoAdapter = function CriteoAdapter() {\n\n  var _publisherTagUrl = window.location.protocol + '//static.criteo.net/js/ld/publishertag.js';\n  var _bidderCode = 'criteo';\n  var _profileId = 125;\n\n  function _callBids(params) {\n    if (!window.criteo_pubtag || window.criteo_pubtag instanceof Array) {\n      // publisherTag not loaded yet\n\n      _pushBidRequestEvent(params);\n      adloader.loadScript(\n        _publisherTagUrl,\n        function () {},\n        true\n      );\n    }\n    else {\n      // publisherTag already loaded\n      _pushBidRequestEvent(params);\n    }\n  }\n\n  // send bid request to criteo direct bidder handler\n  function _pushBidRequestEvent(params) {\n\n    // if we want to be fully asynchronous, we must first check window.criteo_pubtag in case publishertag.js is not loaded yet.\n    window.Criteo = window.Criteo || {};\n    window.Criteo.events = window.Criteo.events || [];\n\n    // generate the bidding event\n    var biddingEventFunc = function () {\n\n      var bids = params.bids || [];\n\n      var slots = [];\n\n      var isAudit = false;\n\n      // build slots before sending one multi-slots bid request\n      for (var i = 0; i < bids.length; i++) {\n        var bid = bids[i];\n        slots.push(\n          new Criteo.PubTag.DirectBidding.DirectBiddingSlot(\n            bid.placementCode,\n            bid.params.zoneId\n          )\n        );\n\n        isAudit |= bid.params.audit !== undefined;\n      }\n\n      var biddingEvent = new Criteo.PubTag.DirectBidding.DirectBiddingEvent(\n        _profileId,\n        new Criteo.PubTag.DirectBidding.DirectBiddingUrlBuilder(isAudit),\n        slots,\n        _callbackSuccess(slots),\n        _callbackError(slots),\n        _callbackError(slots) // timeout handled as error\n      );\n\n      // process the event as soon as possible\n      window.criteo_pubtag.push(biddingEvent);\n    };\n\n    window.Criteo.events.push(biddingEventFunc);\n\n  }\n\n  function parseBidResponse(bidsResponse) {\n    try {\n      return JSON.parse(bidsResponse);\n    }\n    catch (error) {\n      return {};\n    }\n  }\n\n  function isNoBidResponse(jsonbidsResponse) {\n    return jsonbidsResponse.slots === undefined;\n  }\n\n  function _callbackSuccess(slots) {\n    return function (bidsResponse) {\n      var jsonbidsResponse = parseBidResponse(bidsResponse);\n\n      if (isNoBidResponse(jsonbidsResponse))\n        return _callbackError(slots)();\n\n      for (var i = 0; i < slots.length; i++) {\n        var bidResponse = null;\n\n        // look for the matching bid response\n        for (var j = 0; j < jsonbidsResponse.slots.length; j++) {\n          if (jsonbidsResponse.slots[j] && jsonbidsResponse.slots[j].impid === slots[i].impId) {\n            bidResponse = jsonbidsResponse.slots.splice(j, 1)[0];\n            break;\n          }\n        }\n\n        // register the bid response\n        var bidObject;\n        if (bidResponse) {\n          bidObject = bidfactory.createBid(1);\n          bidObject.bidderCode = _bidderCode;\n          bidObject.cpm = bidResponse.cpm;\n          bidObject.ad = bidResponse.creative;\n          bidObject.width = bidResponse.width;\n          bidObject.height = bidResponse.height;\n        }\n        else {\n          bidObject = _invalidBidResponse();\n        }\n        bidmanager.addBidResponse(slots[i].impId, bidObject);\n      }\n    };\n  }\n\n  function _callbackError(slots) {\n    return function () {\n      for (var i = 0; i < slots.length; i++) {\n        bidmanager.addBidResponse(slots[i].impId, _invalidBidResponse());\n      }\n    };\n  }\n\n  function _invalidBidResponse() {\n    var bidObject = bidfactory.createBid(2);\n    bidObject.bidderCode = _bidderCode;\n    return bidObject;\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = CriteoAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/criteo.js","var utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar CentroAdapter = function CentroAdapter() {\n  var baseUrl = '//t.brand-server.com/hb',\n      devUrl = '//staging.brand-server.com/hb',\n      bidderCode = 'centro',\n      handlerPrefix = 'adCentroHandler_',\n\n      LOG_ERROR_MESS = {\n        noUnit: 'Bid has no unit',\n        noAdTag: 'Bid has missmatch format.',\n        noBid: 'Response has no bid.',\n        anotherCode: 'Bid has another bidderCode - ',\n        undefBid: 'Bid is undefined',\n        unitNum: 'Requested unit is '\n      };\n\n  function _makeHandler(handlerName, unit, placementCode) {\n    return function(response){\n      try {\n        delete window[handlerName];\n      } catch(err) {//catching for old IE\n        window[handlerName] = undefined;\n      }\n      _responseProcessing(response, unit, placementCode);\n    };\n  }\n\n  function _sendBidRequest(bid) {\n    var placementCode = bid.placementCode,\n        size = bid.sizes && bid.sizes[0];\n\n    bid = bid.params;\n    if (!bid.unit) {\n      //throw exception, or call utils.logError\n      utils.logError(LOG_ERROR_MESS.noUnit, bidderCode);\n      return;\n    }\n    var query = ['s=' + bid.unit, 'adapter=prebid'];//,'url=www.abc15.com','sz=320x50'];\n    var isDev = bid.unit.toString() === '28136';\n\n    query.push('url=' + encodeURIComponent(bid.page_url || location.href));\n    //check size format\n    if (\n      size instanceof Array &&\n      size.length===2 &&\n      typeof size[0] === 'number' &&\n      typeof size[1] === 'number'\n    ) {\n      query.push('sz=' + size.join('x'));\n    }\n    //make handler name for JSONP request\n    var handlerName = handlerPrefix + bid.unit + size.join('x') + encodeURIComponent(placementCode);\n    query.push('callback=' + encodeURIComponent('window[\"' + handlerName + '\"]'));\n\n    //maybe is needed add some random parameter to disable cache\n    //query.push('r='+Math.round(Math.random() * 1e5));\n\n    window[handlerName] = _makeHandler(handlerName, bid.unit, placementCode);\n\n    adloader.loadScript((document.location.protocol === 'https:'? 'https:' : 'http:') + (isDev? devUrl : baseUrl) + '?' + query.join('&'));\n  }\n\n  /*\n   \"sectionID\": 7302,\n   \"height\": 250,\n   \"width\": 300,\n   \"value\": 3.2,\n   \"adTag\":''\n   */\n  function _responseProcessing(resp, unit, placementCode) {\n    var bidObject;\n    var bid = resp && resp.bid || resp;\n\n    if (bid && bid.adTag && bid.sectionID && bid.sectionID.toString() === unit.toString()) {\n      bidObject = bidfactory.createBid(1);\n      bidObject.cpm = bid.value;\n      bidObject.ad = bid.adTag;\n      bidObject.width = bid.width;\n      bidObject.height = bid.height;\n    } else {\n      //throw exception, or call utils.logError with resp.statusMessage\n      utils.logError(LOG_ERROR_MESS.unitNum + unit + '. ' + (bid? bid.statusMessage || LOG_ERROR_MESS.noAdTag : LOG_ERROR_MESS.noBid), bidderCode);\n      bidObject = bidfactory.createBid(2);\n    }\n    bidObject.bidderCode = bidderCode;\n    bidmanager.addBidResponse(placementCode, bidObject);\n  }\n\n  /*\n   {\n   bidderCode: \"centro\",\n   bids: [\n   {\n   unit:  '3242432',\n   page_url: \"http://\",\n   size: [300, 250]\n   */\n  function _callBids(params) {\n    var bid, bids = params.bids || [];\n    for (var i = 0; i < bids.length; i++) {\n      bid = bids[i];\n      if (bid && bid.bidder === bidderCode) {\n        _sendBidRequest(bid);\n      }\n    }\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\n\nmodule.exports = CentroAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/centro.js","import {getBidRequest} from '../utils.js';\n\nconst CONSTANTS = require('../constants.json');\nconst utils = require('../utils.js');\nconst adloader = require('../adloader.js');\nconst bidmanager = require('../bidmanager.js');\nconst bidfactory = require('../bidfactory.js');\n\nconst XhbAdapter = function XhbAdapter() {\n\n  const _defaultBidderSettings = {\n    alwaysUseBid: true,\n    adserverTargeting: [\n      {\n        key: 'hb_xhb_deal',\n        val: function (bidResponse) {\n          return bidResponse.dealId;\n        }\n      },\n      {\n        key: 'hb_xhb_adid',\n        val: function (bidResponse) {\n          return bidResponse.adId;\n        }\n      }\n    ]\n  };\n  bidmanager.registerDefaultBidderSetting('xhb', _defaultBidderSettings);\n\n  function buildJPTCall(bid, callbackId) {\n    //determine tag params\n    const placementId = utils.getBidIdParameter('placementId', bid.params);\n    const inventoryCode = utils.getBidIdParameter('invCode', bid.params);\n    let referrer = utils.getBidIdParameter('referrer', bid.params);\n    const altReferrer = utils.getBidIdParameter('alt_referrer', bid.params);\n\n    //Always use https\n    let jptCall = 'https://ib.adnxs.com/jpt?';\n\n    jptCall = utils.tryAppendQueryString(jptCall, 'callback', 'pbjs.handleXhbCB');\n    jptCall = utils.tryAppendQueryString(jptCall, 'callback_uid', callbackId);\n    jptCall = utils.tryAppendQueryString(jptCall, 'id', placementId);\n    jptCall = utils.tryAppendQueryString(jptCall, 'code', inventoryCode);\n\n    //sizes takes a bit more logic\n    let sizeQueryString = '';\n    let parsedSizes = utils.parseSizesInput(bid.sizes);\n\n    //combine string into proper querystring for impbus\n    let parsedSizesLength = parsedSizes.length;\n    if (parsedSizesLength > 0) {\n      //first value should be \"size\"\n      sizeQueryString = 'size=' + parsedSizes[0];\n      if (parsedSizesLength > 1) {\n        //any subsequent values should be \"promo_sizes\"\n        sizeQueryString += '&promo_sizes=';\n        for (let j = 1; j < parsedSizesLength; j++) {\n          sizeQueryString += parsedSizes[j] += ',';\n        }\n        //remove trailing comma\n        if (sizeQueryString && sizeQueryString.charAt(sizeQueryString.length - 1) === ',') {\n          sizeQueryString = sizeQueryString.slice(0, sizeQueryString.length - 1);\n        }\n      }\n    }\n\n    if (sizeQueryString) {\n      jptCall += sizeQueryString + '&';\n    }\n\n    //append custom attributes:\n    let paramsCopy = Object.assign({}, bid.params);\n\n    //delete attributes already used\n    delete paramsCopy.placementId;\n    delete paramsCopy.invCode;\n    delete paramsCopy.query;\n    delete paramsCopy.referrer;\n    delete paramsCopy.alt_referrer;\n\n    //get the reminder\n    let queryParams = utils.parseQueryStringParameters(paramsCopy);\n\n    //append\n    if (queryParams) {\n      jptCall += queryParams;\n    }\n\n    //append referrer\n    if (referrer === '') {\n      referrer = utils.getTopWindowUrl();\n    }\n\n    jptCall = utils.tryAppendQueryString(jptCall, 'referrer', referrer);\n    jptCall = utils.tryAppendQueryString(jptCall, 'alt_referrer', altReferrer);\n\n    //remove the trailing \"&\"\n    if (jptCall.lastIndexOf('&') === jptCall.length - 1) {\n      jptCall = jptCall.substring(0, jptCall.length - 1);\n    }\n\n    return jptCall;\n  }\n\n  //expose the callback to the global object:\n  pbjs.handleXhbCB = function (jptResponseObj) {\n      let bidCode;\n\n      if (jptResponseObj && jptResponseObj.callback_uid) {\n\n        let responseCPM;\n        let id = jptResponseObj.callback_uid;\n        let placementCode = '';\n        let bidObj = getBidRequest(id);\n        if (bidObj) {\n          bidCode = bidObj.bidder;\n          placementCode = bidObj.placementCode;\n          //set the status\n          bidObj.status = CONSTANTS.STATUS.GOOD;\n        }\n\n        let bid = [];\n        if (jptResponseObj.result && jptResponseObj.result.ad && jptResponseObj.result.ad !== '') {\n          responseCPM = 0.00;\n\n          //store bid response\n          //bid status is good (indicating 1)\n          let adId = jptResponseObj.result.creative_id;\n          bid = bidfactory.createBid(CONSTANTS.STATUS.GOOD, bidObj);\n          bid.creative_id = adId;\n          bid.bidderCode = bidCode;\n          bid.cpm = responseCPM;\n          bid.adUrl = jptResponseObj.result.ad;\n          bid.width = jptResponseObj.result.width;\n          bid.height = jptResponseObj.result.height;\n          bid.dealId = '99999999';\n\n          bidmanager.addBidResponse(placementCode, bid);\n\n        } else {\n          //no response data\n          //indicate that there is no bid for this placement\n          bid = bidfactory.createBid(2);\n          bid.bidderCode = bidCode;\n          bidmanager.addBidResponse(placementCode, bid);\n        }\n      }\n    };\n\n  function _callBids(params) {\n    let bids = params.bids || [];\n    for (let i = 0; i < bids.length; i++) {\n      let bid = bids[i];\n      let callbackId = bid.bidId;\n      adloader.loadScript(buildJPTCall(bid, callbackId));\n    }\n  }\n\n  // Export the callBids function, so that prebid.js can execute\n  // this function when the page asks to send out bid requests.\n  return {\n      callBids: _callBids\n    };\n};\n\nmodule.exports = XhbAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/xhb.js","var utils = require('../utils.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\nvar ajax = require('../ajax.js').ajax;\n\nconst STR_BIDDER_CODE = \"sharethrough\";\nconst STR_VERSION = \"1.1.0\";\n\nvar SharethroughAdapter = function SharethroughAdapter() {\n\n  const str = {};\n  str.STR_BTLR_HOST = document.location.protocol + \"//btlr.sharethrough.com\";\n  str.STR_BEACON_HOST = document.location.protocol + \"//b.sharethrough.com/butler?\";\n  str.placementCodeSet = {};\n  str.ajax = ajax;\n\n  function _callBids(params) {\n    const bids = params.bids;\n\n    // cycle through bids\n    for (let i = 0; i < bids.length; i += 1) {\n      const bidRequest = bids[i];\n      str.placementCodeSet[bidRequest.placementCode] = bidRequest;\n      const scriptUrl = _buildSharethroughCall(bidRequest);\n      str.ajax(scriptUrl, pbjs.strcallback, undefined, {withCredentials: true});\n    }\n  }\n\n  function _buildSharethroughCall(bid) {\n    const pkey = utils.getBidIdParameter('pkey', bid.params);\n\n    let host = str.STR_BTLR_HOST;\n\n    let url = host + \"/header-bid/v1?\";\n    url = utils.tryAppendQueryString(url, 'bidId', bid.bidId);\n    url = utils.tryAppendQueryString(url, 'placement_key', pkey);\n    url = appendEnvFields(url);\n\n    return url;\n  }\n\n  pbjs.strcallback = function(bidResponse) {\n    bidResponse = JSON.parse(bidResponse);\n    const bidId = bidResponse.bidId;\n    const bidObj = utils.getBidRequest(bidId);\n    try {\n      const bid = bidfactory.createBid(1, bidObj);\n      bid.bidderCode = STR_BIDDER_CODE;\n      bid.cpm = bidResponse.creatives[0].cpm;\n      const size = bidObj.sizes[0];\n      bid.width = size[0];\n      bid.height = size[1];\n      bid.adserverRequestId = bidResponse.adserverRequestId;\n      str.placementCodeSet[bidObj.placementCode].adserverRequestId = bidResponse.adserverRequestId;\n\n      bid.pkey = utils.getBidIdParameter('pkey', bidObj.params);\n\n      const windowLocation = `str_response_${bidId}`;\n      const bidJsonString = JSON.stringify(bidResponse);\n      bid.ad = `<div data-str-native-key=\"${bid.pkey}\" data-stx-response-name='${windowLocation}'>\n                </div>\n                <script>var ${windowLocation} = ${bidJsonString}</script>\n                <script src=\"//native.sharethrough.com/assets/sfp-set-targeting.js\"></script>\n                <script type='text/javascript'>\n                (function() {\n                    var sfp_js = document.createElement('script');\n                    sfp_js.src = \"//native.sharethrough.com/assets/sfp.js\";\n                    sfp_js.type = 'text/javascript';\n                    sfp_js.charset = 'utf-8';\n                    try {\n                        window.top.document.getElementsByTagName('body')[0].appendChild(sfp_js);\n                    } catch (e) {\n                      console.log(e);\n                    }\n                })();\n                </script>`;\n      bidmanager.addBidResponse(bidObj.placementCode, bid);\n    } catch (e) {\n      _handleInvalidBid(bidObj);\n    }\n  };\n\n  function _handleInvalidBid(bidObj) {\n    const bid = bidfactory.createBid(2, bidObj);\n    bidmanager.addBidResponse(bidObj.placementCode, bid);\n  }\n\n  function appendEnvFields(url) {\n    url = utils.tryAppendQueryString(url, 'hbVersion', '0.21.0');\n    url = utils.tryAppendQueryString(url, 'strVersion', STR_VERSION);\n    url = utils.tryAppendQueryString(url, 'hbSource', 'prebid');\n\n    return url;\n  }\n\n  return {\n    callBids: _callBids,\n    str : str,\n  };\n};\n\nmodule.exports = SharethroughAdapter;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/sharethrough.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader');\n\nvar RoxotAdapter = function RoxotAdapter() {\n  var roxotUrl = \"r.rxthdr.com\";\n\n  pbjs.roxotResponseHandler = roxotResponseHandler;\n\n  return {\n    callBids: _callBids\n  };\n\n  function _callBids(bidReqs) {\n    utils.logInfo('callBids roxot adapter invoking');\n\n    var domain = window.location.host;\n    var page = window.location.pathname + location.search + location.hash;\n\n    var roxotBidReqs = {\n      id: utils.getUniqueIdentifierStr(),\n      bids: bidReqs,\n      site: {\n        domain: domain,\n        page: page\n      }\n    };\n\n    var scriptUrl = '//' + roxotUrl + '?callback=pbjs.roxotResponseHandler' +\n      '&src=' + CONSTANTS.REPO_AND_VERSION +\n      '&br=' + encodeURIComponent(JSON.stringify(roxotBidReqs));\n\n    adloader.loadScript(scriptUrl);\n  }\n\n  function roxotResponseHandler(roxotResponseObject) {\n    utils.logInfo('roxotResponseHandler invoking');\n    var placements = [];\n\n    if (isResponseInvalid()) {\n      return fillPlacementEmptyBid();\n    }\n\n    roxotResponseObject.bids.forEach(pushRoxotBid);\n    var allBidResponse = fillPlacementEmptyBid(placements);\n    utils.logInfo('roxotResponse handler finish');\n\n    return allBidResponse;\n\n    function isResponseInvalid() {\n      return !roxotResponseObject || !roxotResponseObject.bids || !Array.isArray(roxotResponseObject.bids) || roxotResponseObject.bids.length <= 0;\n    }\n\n    function pushRoxotBid(roxotBid) {\n      var placementCode = '';\n\n      var bidReq = pbjs\n          ._bidsRequested.find(bidSet => bidSet.bidderCode === 'roxot')\n          .bids.find(bid => bid.bidId === roxotBid.bidId);\n\n      if (!bidReq) {\n        return pushErrorBid(placementCode);\n      }\n\n      bidReq.status = CONSTANTS.STATUS.GOOD;\n\n      placementCode = bidReq.placementCode;\n      placements.push(placementCode);\n\n      var cpm = roxotBid.cpm;\n      var responseNurl = '<img src=\"' + roxotBid.nurl + '\">';\n\n      if (!cpm) {\n        return pushErrorBid(placementCode);\n      }\n\n      var bid = bidfactory.createBid(1, bidReq);\n\n      bid.creative_id = roxotBid.id;\n      bid.bidderCode = 'roxot';\n      bid.cpm = cpm;\n      bid.ad = decodeURIComponent(roxotBid.adm + responseNurl);\n      bid.width = parseInt(roxotBid.w);\n      bid.height = parseInt(roxotBid.h);\n\n      bidmanager.addBidResponse(placementCode, bid);\n    }\n\n    function fillPlacementEmptyBid(places) {\n      pbjs\n        ._bidsRequested.find(bidSet => bidSet.bidderCode === 'roxot')\n        .bids.forEach(fillIfNotFilled);\n\n      function fillIfNotFilled(bid) {\n        if (utils.contains(places, bid.placementCode)) {\n          return null;\n        }\n\n        pushErrorBid(bid);\n      }\n    }\n\n    function pushErrorBid(bidRequest) {\n      var bid = bidfactory.createBid(2, bidRequest);\n      bid.bidderCode = 'roxot';\n      bidmanager.addBidResponse(bidRequest.placementCode, bid);\n    }\n  }\n};\n\nmodule.exports = RoxotAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/roxot.js","var CONSTANTS = require('../constants.json');\nvar utils = require('../utils.js');\nvar bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar adloader = require('../adloader.js');\n\nvar VertozAdapter = function VertozAdapter() {\n  \n  const BASE_URI='//banner.vrtzads.com/vzhbidder/bid?';\n  const BIDDER_NAME='vertoz';\n  const QUERY_PARAM_KEY='q';\n\n  function _callBids(params) {\n    var bids = params.bids || [];\n\n    for (var i = 0; i < bids.length; i++) {\n      var bid = bids[i]; \n      let slotBidId = utils.getValue(bid,'bidId');\n      let cb = Math.round(new Date().getTime() / 1000);\n      let vzEndPoint = BASE_URI;\n      let reqParams = bid.params || {};\n      let placementId = utils.getValue(reqParams,'placementId');\n     \t\n      if(utils.isEmptyStr(placementId)){\n        utils.logError('missing params:',BIDDER_NAME,'Enter valid vzPlacementId');\n        return;\n      }\n\n      let reqSrc = utils.getTopWindowLocation().href;\n      var vzReq = {\n        _vzPlacementId:placementId,\n        _rqsrc:reqSrc,\n        _cb:cb,\n        _slotBidId:slotBidId\n      };\n      let queryParamValue=JSON.stringify(vzReq);\n      vzEndPoint = utils.tryAppendQueryString(vzEndPoint, QUERY_PARAM_KEY, queryParamValue);\n      adloader.loadScript(vzEndPoint);\n    }\n\n  }\n\n  pbjs.vzResponse = function (vertozResponse) {\n    var bidRespObj = vertozResponse;\n    var bidObject;\n    var reqBidObj=utils.getBidRequest(bidRespObj.slotBidId);\n    \n    if (bidRespObj.cpm) {\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.GOOD,reqBidObj);\n      bidObject.cpm = Number(bidRespObj.cpm);\n      bidObject.ad = bidRespObj.ad + utils.createTrackPixelHtml(decodeURIComponent(bidRespObj.nurl));\n      bidObject.width = bidRespObj.adWidth;\n      bidObject.height = bidRespObj.adHeight;\n    }else {\n      let respStatusText=bidRespObj.statusText;\n      bidObject = bidfactory.createBid(CONSTANTS.STATUS.NO_BID,reqBidObj);\n      utils.logMessage(respStatusText);\n    }   \t\n\n    var adSpaceId = reqBidObj.placementCode;\n    bidObject.bidderCode = BIDDER_NAME;\n    bidmanager.addBidResponse(adSpaceId, bidObject);\n  };\n  return { callBids: _callBids };\n\n};\n\nmodule.exports = VertozAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/vertoz.js","\nimport { getBidRequest } from '../utils.js';\n\nvar utils = require('../utils.js');\nvar adloader = require('../adloader.js');\nvar bidmanager = require('../bidmanager.js');\nvar bidfactory = require('../bidfactory.js');\n\n\nfunction WidespaceAdapter() {\n  let useSSL = 'https:' === document.location.protocol,\n      baseURL = (useSSL ? 'https:' : 'http:') + '//engine.widespace.com/map/engine/hb/dynamic?',\n      callbackName = 'pbjs.widespaceHandleCB';\n\n  function _callBids(params) {\n    let bids = params && params.bids || [];\n\n    for (var i = 0; i < bids.length; i++) {\n      const bid = bids[i],\n\t\t\t\t\tcallbackUid = bid.bidId,\n\t\t\t\t\tsid = bid.params.sid,\n\t\t\t\t\tcurrency =  bid.params.currency;\n\n      //Handle Sizes string\n      let sizeQueryString = '';\n      let parsedSizes = utils.parseSizesInput(bid.sizes);\n\n      sizeQueryString = parsedSizes.reduce((prev, curr) => {\n        return prev ? `${prev},${curr}` : curr;\n      }, sizeQueryString);\n\n      var requestURL = baseURL;\n      requestURL = utils.tryAppendQueryString(requestURL, 'hb.name', 'prebidjs');\n      requestURL = utils.tryAppendQueryString(requestURL, 'hb.callback', callbackName);\n      requestURL = utils.tryAppendQueryString(requestURL, 'hb.callbackUid', callbackUid);\n      requestURL = utils.tryAppendQueryString(requestURL, 'hb.sizes', sizeQueryString);\n      requestURL = utils.tryAppendQueryString(requestURL, 'sid', sid);\n      requestURL = utils.tryAppendQueryString(requestURL, 'hb.currency', currency);\n\n\n      // Expose the callback\n      pbjs.widespaceHandleCB = window[callbackName] = handleCallback;\n\n      adloader.loadScript(requestURL);\n    }\n  }\n\n  //Handle our callback\n  var handleCallback = function handleCallback(bidsArray) {\n    if (!bidsArray) { return; }\n\n    var bidObject,\n        bidCode = 'widespace';\n\n    for (var i = 0, l = bidsArray.length; i < l; i++) {\n      var bid = bidsArray[i],\n          placementCode = '',\n          validSizes = [];\n\n      bid.sizes = {height: bid.height, width: bid.height};\n\n      var inBid = getBidRequest(bid.callbackUid);\n\n      if (inBid) {\n        bidCode = inBid.bidder;\n        placementCode = inBid.placementCode;\n        validSizes = inBid.sizes;\n      }\n      if (bid && bid.callbackUid && bid.status !=='noad' && verifySize(bid.sizes, validSizes)) {\n        bidObject = bidfactory.createBid(1);\n        bidObject.bidderCode = bidCode;\n        bidObject.cpm = bid.cpm;\n        bidObject.cur = bid.currency;\n        bidObject.creative_id = bid.adId;\n        bidObject.ad = bid.code;\n        bidObject.width = bid.width;\n        bidObject.height = bid.height;\n        bidmanager.addBidResponse(placementCode, bidObject);\n      } else {\n        bidObject = bidfactory.createBid(2);\n        bidObject.bidderCode = bidCode;\n        bidmanager.addBidResponse(placementCode, bidObject);\n      }\n    }\n\n\n    function verifySize(bid, validSizes) {\n      for (var j = 0, k = validSizes.length; j < k; j++) {\n        if (bid.width === validSizes[j][0] &&\n          bid.height === validSizes[j][1]) {\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n\n  return {\n    callBids: _callBids\n  };\n}\n\nmodule.exports = WidespaceAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/widespace.js","var bidfactory = require('../bidfactory.js');\nvar bidmanager = require('../bidmanager.js');\nvar Ajax = require('../ajax');\nvar utils = require('../utils.js');\n\n/**\n * Adapter for requesting bids from Admixer.\n *\n * @returns {{callBids: _callBids,responseCallback: _responseCallback}}\n */\nvar AdmixerAdapter = function AdmixerAdapter() {\n  var invUrl = '//inv-nets.admixer.net/prebid.aspx';\n\n  function _callBids(data) {\n    var bids = data.bids || [];\n    for (var i = 0, ln = bids.length; i < ln; i++) {\n      var bid = bids[i];\n      var params = {\n        'sizes': utils.parseSizesInput(bid.sizes).join('-'),\n        'zone': bid.params && bid.params.zone,\n        'callback_uid': bid.placementCode\n      };\n      if (params.zone) {\n        _requestBid(invUrl, params);\n      }\n      else {\n        var bidObject = bidfactory.createBid(2);\n        bidObject.bidderCode = 'admixer';\n        bidmanager.addBidResponse(params.callback_uid, bidObject);\n      }\n    }\n  }\n\n  function _requestBid(url, params) {\n    Ajax.ajax(url, _responseCallback, params, {method: 'GET', withCredentials: true});\n  }\n\n  function _responseCallback(adUnit) {\n    try {\n      adUnit = JSON.parse(adUnit);\n    } catch (_error) {\n      adUnit = {result: {cpm: 0}};\n      utils.logError(_error);\n    }\n    var adUnitCode = adUnit.callback_uid;\n    var bid = adUnit.result;\n    var bidObject;\n    if (bid.cpm > 0) {\n      bidObject = bidfactory.createBid(1);\n      bidObject.bidderCode = 'admixer';\n      bidObject.cpm = bid.cpm;\n      bidObject.ad = bid.ad;\n      bidObject.width = bid.width;\n      bidObject.height = bid.height;\n    } else {\n      bidObject = bidfactory.createBid(2);\n      bidObject.bidderCode = 'admixer';\n    }\n    bidmanager.addBidResponse(adUnitCode, bidObject);\n  }\n\n  return {\n    callBids: _callBids,\n    responseCallback: _responseCallback\n  };\n};\n\nmodule.exports = AdmixerAdapter;\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/admixer.js","//v0.0.1\n\nconst bidfactory = require('../bidfactory.js');\nconst bidmanager = require('../bidmanager.js');\nconst adloader = require('../adloader');\nconst utils = require('../utils.js');\n\nconst TapSenseAdapter = function TapSenseAdapter() {\n  const version = \"0.0.1\";\n  const creativeSizes = [\n    \"320x50\"\n  ];\n  const validParams = [\n    \"ufid\",\n    \"refer\",\n    \"ad_unit_id\", //required\n    \"device_id\",\n    \"lat\",\n    \"long\",\n    \"user\", //required\n    \"price_floor\",\n    \"test\"\n  ];\n  const SCRIPT_URL = \"https://ads04.tapsense.com/ads/headerad\";\n  let bids;\n  pbjs.tapsense = {};\n  function _callBids(params) {\n    bids = params.bids || [];\n    for (let i = 0; i < bids.length; i++) {\n      let bid = bids[i];\n      let isValidSize = false;\n      if (!bid.sizes || !bid.params.user || !bid.params.ad_unit_id) {\n        return;\n      }\n      let parsedSizes = utils.parseSizesInput(bid.sizes);\n      for (let k = 0; k < parsedSizes.length; k++) {\n        if (creativeSizes.indexOf(parsedSizes[k]) > -1) {\n          isValidSize = true;\n          break;\n        }\n      }\n      if (isValidSize) {\n        let queryString = `?price=true&jsonp=1&callback=pbjs.tapsense.callback_with_price_${bid.bidId}&version=${version}&`;\n        pbjs.tapsense[`callback_with_price_${bid.bidId}`] = generateCallback(bid.bidId);\n        let keys = Object.keys(bid.params);\n        for (let j = 0; j < keys.length; j++) {\n          if (validParams.indexOf(keys[j]) < 0) continue;\n          queryString += encodeURIComponent(keys[j]) + \"=\" + encodeURIComponent(bid.params[keys[j]]) + \"&\";\n        }\n        _requestBids(SCRIPT_URL + queryString);\n      }\n    }\n  }\n\n  function generateCallback(bidId){\n    return function tapsenseCallback(response, price) {\n      let bidObj;\n      if (response && price) {\n        let bidReq = utils.getBidRequest(bidId);\n        if (response.status.value === \"ok\" && response.count_ad_units > 0) {\n          bidObj = bidfactory.createBid(1, bidObj);\n          bidObj.cpm = price;\n          bidObj.width = response.width;\n          bidObj.height = response.height;\n          bidObj.ad = response.ad_units[0].html;\n        } else {\n          bidObj = bidfactory.createBid(2, bidObj);\n        }\n        bidObj.bidderCode = bidReq.bidder;\n        bidmanager.addBidResponse(bidReq.placementCode, bidObj);\n\n      } else {\n        utils.logMessage('No prebid response');\n      }\n    };\n  }\n\n  function _requestBids(scriptURL) {\n    adloader.loadScript(scriptURL);\n  }\n\n  return {\n    callBids: _callBids\n  };\n};\n\nmodule.exports = TapSenseAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/tapsense.js","/** @module polyfill\nMisc polyfills\n*/\n/*jshint -W121 */\nimport shimArrayFind from 'array.prototype.find/shim';\nimport shimArrayIncludes from 'array-includes/shim';\n\nif (!Array.prototype.find) {\n  shimArrayFind();\n}\n\nif (!Array.prototype.includes) {\n  shimArrayIncludes();\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\nNumber.isInteger = Number.isInteger || function(value) {\n  return typeof value === 'number' &&\n    isFinite(value) &&\n    Math.floor(value) === value;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfill.js","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\nmodule.exports = function shimArrayPrototypeFind() {\n\tvar polyfill = getPolyfill();\n\n\tdefine(Array.prototype, { find: polyfill }, {\n\t\tfind: function () {\n\t\t\treturn Array.prototype.find !== polyfill;\n\t\t}\n\t});\n\n\treturn polyfill;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array.prototype.find/shim.js\n// module id = 76\n// module chunks = 0","'use strict';\n\nvar keys = require('object-keys');\nvar foreach = require('foreach');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol() === 'symbol';\n\nvar toStr = Object.prototype.toString;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\tObject.defineProperty(obj, 'x', { enumerable: false, value: obj });\n        /* eslint-disable no-unused-vars, no-restricted-syntax */\n        for (var _ in obj) { return false; }\n        /* eslint-enable no-unused-vars, no-restricted-syntax */\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = Object.defineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\tObject.defineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = props.concat(Object.getOwnPropertySymbols(map));\n\t}\n\tforeach(props, function (name) {\n\t\tdefineProperty(object, name, map[name], predicates[name]);\n\t});\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/define-properties/index.js\n// module id = 77\n// module chunks = 0","'use strict';\n\n// modified from https://github.com/es-shims/es5-shim\nvar has = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\nvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\nvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\nvar dontEnums = [\n\t'toString',\n\t'toLocaleString',\n\t'valueOf',\n\t'hasOwnProperty',\n\t'isPrototypeOf',\n\t'propertyIsEnumerable',\n\t'constructor'\n];\nvar equalsConstructorPrototype = function (o) {\n\tvar ctor = o.constructor;\n\treturn ctor && ctor.prototype === o;\n};\nvar excludedKeys = {\n\t$console: true,\n\t$external: true,\n\t$frame: true,\n\t$frameElement: true,\n\t$frames: true,\n\t$innerHeight: true,\n\t$innerWidth: true,\n\t$outerHeight: true,\n\t$outerWidth: true,\n\t$pageXOffset: true,\n\t$pageYOffset: true,\n\t$parent: true,\n\t$scrollLeft: true,\n\t$scrollTop: true,\n\t$scrollX: true,\n\t$scrollY: true,\n\t$self: true,\n\t$webkitIndexedDB: true,\n\t$webkitStorageInfo: true,\n\t$window: true\n};\nvar hasAutomationEqualityBug = (function () {\n\t/* global window */\n\tif (typeof window === 'undefined') { return false; }\n\tfor (var k in window) {\n\t\ttry {\n\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\ttry {\n\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t/* global window */\n\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\treturn equalsConstructorPrototype(o);\n\t}\n\ttry {\n\t\treturn equalsConstructorPrototype(o);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar keysShim = function keys(object) {\n\tvar isObject = object !== null && typeof object === 'object';\n\tvar isFunction = toStr.call(object) === '[object Function]';\n\tvar isArguments = isArgs(object);\n\tvar isString = isObject && toStr.call(object) === '[object String]';\n\tvar theKeys = [];\n\n\tif (!isObject && !isFunction && !isArguments) {\n\t\tthrow new TypeError('Object.keys called on a non-object');\n\t}\n\n\tvar skipProto = hasProtoEnumBug && isFunction;\n\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\ttheKeys.push(String(i));\n\t\t}\n\t}\n\n\tif (isArguments && object.length > 0) {\n\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\ttheKeys.push(String(j));\n\t\t}\n\t} else {\n\t\tfor (var name in object) {\n\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\ttheKeys.push(String(name));\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasDontEnumBug) {\n\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t}\n\t\t}\n\t}\n\treturn theKeys;\n};\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\treturn (Object.keys(arguments) || '').length === 2;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tvar originalKeys = Object.keys;\n\t\t\tObject.keys = function keys(object) {\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t} else {\n\t\t\t\t\treturn originalKeys(object);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/define-properties/~/object-keys/index.js\n// module id = 78\n// module chunks = 0","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/define-properties/~/object-keys/isArguments.js\n// module id = 79\n// module chunks = 0","\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = function forEach (obj, fn, ctx) {\n    if (toString.call(fn) !== '[object Function]') {\n        throw new TypeError('iterator must be a function');\n    }\n    var l = obj.length;\n    if (l === +l) {\n        for (var i = 0; i < l; i++) {\n            fn.call(ctx, obj[i], i, obj);\n        }\n    } else {\n        for (var k in obj) {\n            if (hasOwn.call(obj, k)) {\n                fn.call(ctx, obj[k], k, obj);\n            }\n        }\n    }\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/foreach/index.js\n// module id = 80\n// module chunks = 0","'use strict';\n\nmodule.exports = function getPolyfill() {\n\t// Detect if an implementation exists\n\t// Detect early implementations which skipped holes in sparse arrays\n  // eslint-disable-next-line no-sparse-arrays\n\tvar implemented = Array.prototype.find && [, 1].find(function () {\n\t\treturn true;\n\t}) !== 1;\n\n  // eslint-disable-next-line global-require\n\treturn implemented ? Array.prototype.find : require('./implementation');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array.prototype.find/polyfill.js\n// module id = 81\n// module chunks = 0","'use strict';\n\nvar ES = require('es-abstract/es6');\n\nmodule.exports = function find(predicate) {\n\tvar list = ES.ToObject(this);\n\tvar length = ES.ToInteger(ES.ToLength(list.length));\n\tif (!ES.IsCallable(predicate)) {\n\t\tthrow new TypeError('Array#find: predicate must be a function');\n\t}\n\tif (length === 0) {\n\t\treturn undefined;\n\t}\n\tvar thisArg = arguments[1];\n\tfor (var i = 0, value; i < length; i++) {\n\t\tvalue = list[i];\n\t\tif (ES.Call(predicate, thisArg, [value, i, list])) {\n\t\t\treturn value;\n\t\t}\n\t}\n\treturn undefined;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array.prototype.find/implementation.js\n// module id = 82\n// module chunks = 0","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';\nvar symbolToStr = hasSymbols ? Symbol.prototype.toString : toStr;\n\nvar $isNaN = require('./helpers/isNaN');\nvar $isFinite = require('./helpers/isFinite');\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1;\n\nvar assign = require('./helpers/assign');\nvar sign = require('./helpers/sign');\nvar mod = require('./helpers/mod');\nvar isPrimitive = require('./helpers/isPrimitive');\nvar toPrimitive = require('es-to-primitive/es6');\nvar parseInteger = parseInt;\nvar bind = require('function-bind');\nvar strSlice = bind.call(Function.call, String.prototype.slice);\nvar isBinary = bind.call(Function.call, RegExp.prototype.test, /^0b[01]+$/i);\nvar isOctal = bind.call(Function.call, RegExp.prototype.test, /^0o[0-7]+$/i);\nvar nonWS = ['\\u0085', '\\u200b', '\\ufffe'].join('');\nvar nonWSregex = new RegExp('[' + nonWS + ']', 'g');\nvar hasNonWS = bind.call(Function.call, RegExp.prototype.test, nonWSregex);\nvar invalidHexLiteral = /^[-+]0x[0-9a-f]+$/i;\nvar isInvalidHexLiteral = bind.call(Function.call, RegExp.prototype.test, invalidHexLiteral);\n\n// whitespace from: http://es5.github.io/#x15.5.4.20\n// implementation from https://github.com/es-shims/es5-shim/blob/v3.4.0/es5-shim.js#L1304-L1324\nvar ws = [\n\t'\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003',\n\t'\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028',\n\t'\\u2029\\uFEFF'\n].join('');\nvar trimRegex = new RegExp('(^[' + ws + ']+)|([' + ws + ']+$)', 'g');\nvar replace = bind.call(Function.call, String.prototype.replace);\nvar trim = function (value) {\n\treturn replace(value, trimRegex, '');\n};\n\nvar ES5 = require('./es5');\n\nvar hasRegExpMatcher = require('is-regex');\n\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-operations\nvar ES6 = assign(assign({}, ES5), {\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-call-f-v-args\n\tCall: function Call(F, V) {\n\t\tvar args = arguments.length > 2 ? arguments[2] : [];\n\t\tif (!this.IsCallable(F)) {\n\t\t\tthrow new TypeError(F + ' is not a function');\n\t\t}\n\t\treturn F.apply(V, args);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive\n\tToPrimitive: toPrimitive,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toboolean\n\t// ToBoolean: ES5.ToBoolean,\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-tonumber\n\tToNumber: function ToNumber(argument) {\n\t\tvar value = isPrimitive(argument) ? argument : toPrimitive(argument, 'number');\n\t\tif (typeof value === 'symbol') {\n\t\t\tthrow new TypeError('Cannot convert a Symbol value to a number');\n\t\t}\n\t\tif (typeof value === 'string') {\n\t\t\tif (isBinary(value)) {\n\t\t\t\treturn this.ToNumber(parseInteger(strSlice(value, 2), 2));\n\t\t\t} else if (isOctal(value)) {\n\t\t\t\treturn this.ToNumber(parseInteger(strSlice(value, 2), 8));\n\t\t\t} else if (hasNonWS(value) || isInvalidHexLiteral(value)) {\n\t\t\t\treturn NaN;\n\t\t\t} else {\n\t\t\t\tvar trimmed = trim(value);\n\t\t\t\tif (trimmed !== value) {\n\t\t\t\t\treturn this.ToNumber(trimmed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Number(value);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tointeger\n\t// ToInteger: ES5.ToNumber,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint32\n\t// ToInt32: ES5.ToInt32,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32\n\t// ToUint32: ES5.ToUint32,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint16\n\tToInt16: function ToInt16(argument) {\n\t\tvar int16bit = this.ToUint16(argument);\n\t\treturn int16bit >= 0x8000 ? int16bit - 0x10000 : int16bit;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint16\n\t// ToUint16: ES5.ToUint16,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint8\n\tToInt8: function ToInt8(argument) {\n\t\tvar int8bit = this.ToUint8(argument);\n\t\treturn int8bit >= 0x80 ? int8bit - 0x100 : int8bit;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8\n\tToUint8: function ToUint8(argument) {\n\t\tvar number = this.ToNumber(argument);\n\t\tif ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }\n\t\tvar posInt = sign(number) * Math.floor(Math.abs(number));\n\t\treturn mod(posInt, 0x100);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8clamp\n\tToUint8Clamp: function ToUint8Clamp(argument) {\n\t\tvar number = this.ToNumber(argument);\n\t\tif ($isNaN(number) || number <= 0) { return 0; }\n\t\tif (number >= 0xFF) { return 0xFF; }\n\t\tvar f = Math.floor(argument);\n\t\tif (f + 0.5 < number) { return f + 1; }\n\t\tif (number < f + 0.5) { return f; }\n\t\tif (f % 2 !== 0) { return f + 1; }\n\t\treturn f;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring\n\tToString: function ToString(argument) {\n\t\tif (typeof argument === 'symbol') {\n\t\t\tthrow new TypeError('Cannot convert a Symbol value to a string');\n\t\t}\n\t\treturn String(argument);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toobject\n\tToObject: function ToObject(value) {\n\t\tthis.RequireObjectCoercible(value);\n\t\treturn Object(value);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-topropertykey\n\tToPropertyKey: function ToPropertyKey(argument) {\n\t\tvar key = this.ToPrimitive(argument, String);\n\t\treturn typeof key === 'symbol' ? symbolToStr.call(key) : this.ToString(key);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n\tToLength: function ToLength(argument) {\n\t\tvar len = this.ToInteger(argument);\n\t\tif (len <= 0) { return 0; } // includes converting -0 to +0\n\t\tif (len > MAX_SAFE_INTEGER) { return MAX_SAFE_INTEGER; }\n\t\treturn len;\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-canonicalnumericindexstring\n\tCanonicalNumericIndexString: function CanonicalNumericIndexString(argument) {\n\t\tif (toStr.call(argument) !== '[object String]') {\n\t\t\tthrow new TypeError('must be a string');\n\t\t}\n\t\tif (argument === '-0') { return -0; }\n\t\tvar n = this.ToNumber(argument);\n\t\tif (this.SameValue(this.ToString(n), argument)) { return n; }\n\t\treturn void 0;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-requireobjectcoercible\n\tRequireObjectCoercible: ES5.CheckObjectCoercible,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isarray\n\tIsArray: Array.isArray || function IsArray(argument) {\n\t\treturn toStr.call(argument) === '[object Array]';\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-iscallable\n\t// IsCallable: ES5.IsCallable,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isconstructor\n\tIsConstructor: function IsConstructor(argument) {\n\t\treturn typeof argument === 'function' && !!argument.prototype; // unfortunately there's no way to truly check this without try/catch `new argument`\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isextensible-o\n\tIsExtensible: function IsExtensible(obj) {\n\t\tif (!Object.preventExtensions) { return true; }\n\t\tif (isPrimitive(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn Object.isExtensible(obj);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isinteger\n\tIsInteger: function IsInteger(argument) {\n\t\tif (typeof argument !== 'number' || $isNaN(argument) || !$isFinite(argument)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar abs = Math.abs(argument);\n\t\treturn Math.floor(abs) === abs;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ispropertykey\n\tIsPropertyKey: function IsPropertyKey(argument) {\n\t\treturn typeof argument === 'string' || typeof argument === 'symbol';\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-isregexp\n\tIsRegExp: function IsRegExp(argument) {\n\t\tif (!argument || typeof argument !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\tif (hasSymbols) {\n\t\t\tvar isRegExp = argument[Symbol.match];\n\t\t\tif (typeof isRegExp !== 'undefined') {\n\t\t\t\treturn ES5.ToBoolean(isRegExp);\n\t\t\t}\n\t\t}\n\t\treturn hasRegExpMatcher(argument);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevalue\n\t// SameValue: ES5.SameValue,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero\n\tSameValueZero: function SameValueZero(x, y) {\n\t\treturn (x === y) || ($isNaN(x) && $isNaN(y));\n\t},\n\n\t/**\n\t * 7.3.2 GetV (V, P)\n\t * 1. Assert: IsPropertyKey(P) is true.\n\t * 2. Let O be ToObject(V).\n\t * 3. ReturnIfAbrupt(O).\n\t * 4. Return O.[[Get]](P, V).\n\t */\n\tGetV: function GetV(V, P) {\n\t\t// 7.3.2.1\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\n\t\t// 7.3.2.2-3\n\t\tvar O = this.ToObject(V);\n\n\t\t// 7.3.2.4\n\t\treturn O[P];\n\t},\n\n\t/**\n\t * 7.3.9 - http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod\n\t * 1. Assert: IsPropertyKey(P) is true.\n\t * 2. Let func be GetV(O, P).\n\t * 3. ReturnIfAbrupt(func).\n\t * 4. If func is either undefined or null, return undefined.\n\t * 5. If IsCallable(func) is false, throw a TypeError exception.\n\t * 6. Return func.\n\t */\n\tGetMethod: function GetMethod(O, P) {\n\t\t// 7.3.9.1\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\n\t\t// 7.3.9.2\n\t\tvar func = this.GetV(O, P);\n\n\t\t// 7.3.9.4\n\t\tif (func == null) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// 7.3.9.5\n\t\tif (!this.IsCallable(func)) {\n\t\t\tthrow new TypeError(P + 'is not a function');\n\t\t}\n\n\t\t// 7.3.9.6\n\t\treturn func;\n\t},\n\n\t/**\n\t * 7.3.1 Get (O, P) - http://www.ecma-international.org/ecma-262/6.0/#sec-get-o-p\n\t * 1. Assert: Type(O) is Object.\n\t * 2. Assert: IsPropertyKey(P) is true.\n\t * 3. Return O.[[Get]](P, O).\n\t */\n\tGet: function Get(O, P) {\n\t\t// 7.3.1.1\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\t// 7.3.1.2\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\t\t// 7.3.1.3\n\t\treturn O[P];\n\t},\n\n\tType: function Type(x) {\n\t\tif (typeof x === 'symbol') {\n\t\t\treturn 'Symbol';\n\t\t}\n\t\treturn ES5.Type(x);\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-speciesconstructor\n\tSpeciesConstructor: function SpeciesConstructor(O, defaultConstructor) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\tvar C = O.constructor;\n\t\tif (typeof C === 'undefined') {\n\t\t\treturn defaultConstructor;\n\t\t}\n\t\tif (this.Type(C) !== 'Object') {\n\t\t\tthrow new TypeError('O.constructor is not an Object');\n\t\t}\n\t\tvar S = hasSymbols && Symbol.species ? C[Symbol.species] : undefined;\n\t\tif (S == null) {\n\t\t\treturn defaultConstructor;\n\t\t}\n\t\tif (this.IsConstructor(S)) {\n\t\t\treturn S;\n\t\t}\n\t\tthrow new TypeError('no constructor found');\n\t}\n});\n\ndelete ES6.CheckObjectCoercible; // renamed in ES6 to RequireObjectCoercible\n\nmodule.exports = ES6;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/es6.js\n// module id = 83\n// module chunks = 0","module.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/isNaN.js\n// module id = 84\n// module chunks = 0","var $isNaN = Number.isNaN || function (a) { return a !== a; };\n\nmodule.exports = Number.isFinite || function (x) { return typeof x === 'number' && !$isNaN(x) && x !== Infinity && x !== -Infinity; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/isFinite.js\n// module id = 85\n// module chunks = 0","var has = Object.prototype.hasOwnProperty;\nmodule.exports = Object.assign || function assign(target, source) {\n\tfor (var key in source) {\n\t\tif (has.call(source, key)) {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/assign.js\n// module id = 86\n// module chunks = 0","module.exports = function sign(number) {\n\treturn number >= 0 ? 1 : -1;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/sign.js\n// module id = 87\n// module chunks = 0","module.exports = function mod(number, modulo) {\n\tvar remain = number % modulo;\n\treturn Math.floor(remain >= 0 ? remain : remain + modulo);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/mod.js\n// module id = 88\n// module chunks = 0","module.exports = function isPrimitive(value) {\n\treturn value === null || (typeof value !== 'function' && typeof value !== 'object');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/helpers/isPrimitive.js\n// module id = 89\n// module chunks = 0","'use strict';\n\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';\n\nvar isPrimitive = require('./helpers/isPrimitive');\nvar isCallable = require('is-callable');\nvar isDate = require('is-date-object');\nvar isSymbol = require('is-symbol');\n\nvar ordinaryToPrimitive = function OrdinaryToPrimitive(O, hint) {\n\tif (typeof O === 'undefined' || O === null) {\n\t\tthrow new TypeError('Cannot call method on ' + O);\n\t}\n\tif (typeof hint !== 'string' || (hint !== 'number' && hint !== 'string')) {\n\t\tthrow new TypeError('hint must be \"string\" or \"number\"');\n\t}\n\tvar methodNames = hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString'];\n\tvar method, result, i;\n\tfor (i = 0; i < methodNames.length; ++i) {\n\t\tmethod = O[methodNames[i]];\n\t\tif (isCallable(method)) {\n\t\t\tresult = method.call(O);\n\t\t\tif (isPrimitive(result)) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\tthrow new TypeError('No default value');\n};\n\nvar GetMethod = function GetMethod(O, P) {\n\tvar func = O[P];\n\tif (func !== null && typeof func !== 'undefined') {\n\t\tif (!isCallable(func)) {\n\t\t\tthrow new TypeError(func + ' returned for property ' + P + ' of object ' + O + ' is not a function');\n\t\t}\n\t\treturn func;\n\t}\n};\n\n// http://www.ecma-international.org/ecma-262/6.0/#sec-toprimitive\nmodule.exports = function ToPrimitive(input, PreferredType) {\n\tif (isPrimitive(input)) {\n\t\treturn input;\n\t}\n\tvar hint = 'default';\n\tif (arguments.length > 1) {\n\t\tif (PreferredType === String) {\n\t\t\thint = 'string';\n\t\t} else if (PreferredType === Number) {\n\t\t\thint = 'number';\n\t\t}\n\t}\n\n\tvar exoticToPrim;\n\tif (hasSymbols) {\n\t\tif (Symbol.toPrimitive) {\n\t\t\texoticToPrim = GetMethod(input, Symbol.toPrimitive);\n\t\t} else if (isSymbol(input)) {\n\t\t\texoticToPrim = Symbol.prototype.valueOf;\n\t\t}\n\t}\n\tif (typeof exoticToPrim !== 'undefined') {\n\t\tvar result = exoticToPrim.call(input, hint);\n\t\tif (isPrimitive(result)) {\n\t\t\treturn result;\n\t\t}\n\t\tthrow new TypeError('unable to convert exotic object to primitive');\n\t}\n\tif (hint === 'default' && (isDate(input) || isSymbol(input))) {\n\t\thint = 'string';\n\t}\n\treturn ordinaryToPrimitive(input, hint === 'default' ? 'number' : hint);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-to-primitive/es6.js\n// module id = 90\n// module chunks = 0","module.exports = function isPrimitive(value) {\n\treturn value === null || (typeof value !== 'function' && typeof value !== 'object');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-to-primitive/helpers/isPrimitive.js\n// module id = 91\n// module chunks = 0","'use strict';\n\nvar fnToStr = Function.prototype.toString;\n\nvar constructorRegex = /^\\s*class /;\nvar isES6ClassFn = function isES6ClassFn(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\tvar singleStripped = fnStr.replace(/\\/\\/.*\\n/g, '');\n\t\tvar multiStripped = singleStripped.replace(/\\/\\*[.\\s\\S]*\\*\\//g, '');\n\t\tvar spaceStripped = multiStripped.replace(/\\n/mg, ' ').replace(/ {2}/g, ' ');\n\t\treturn constructorRegex.test(spaceStripped);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionObject(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isCallable(value) {\n\tif (!value) { return false; }\n\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\tif (hasToStringTag) { return tryFunctionObject(value); }\n\tif (isES6ClassFn(value)) { return false; }\n\tvar strClass = toStr.call(value);\n\treturn strClass === fnClass || strClass === genClass;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-callable/index.js\n// module id = 92\n// module chunks = 0","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateObject(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) { return false; }\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-date-object/index.js\n// module id = 93\n// module chunks = 0","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol() === 'symbol';\n\nif (hasSymbols) {\n\tvar symToStr = Symbol.prototype.toString;\n\tvar symStringRegex = /^Symbol\\(.*\\)$/;\n\tvar isSymbolObject = function isSymbolObject(value) {\n\t\tif (typeof value.valueOf() !== 'symbol') { return false; }\n\t\treturn symStringRegex.test(symToStr.call(value));\n\t};\n\tmodule.exports = function isSymbol(value) {\n\t\tif (typeof value === 'symbol') { return true; }\n\t\tif (toStr.call(value) !== '[object Symbol]') { return false; }\n\t\ttry {\n\t\t\treturn isSymbolObject(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n} else {\n\tmodule.exports = function isSymbol(value) {\n\t\t// this environment does not support Symbols.\n\t\treturn false;\n\t};\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-symbol/index.js\n// module id = 94\n// module chunks = 0","var implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/function-bind/index.js\n// module id = 95\n// module chunks = 0","var ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/function-bind/implementation.js\n// module id = 96\n// module chunks = 0","'use strict';\n\nvar $isNaN = require('./helpers/isNaN');\nvar $isFinite = require('./helpers/isFinite');\n\nvar sign = require('./helpers/sign');\nvar mod = require('./helpers/mod');\n\nvar IsCallable = require('is-callable');\nvar toPrimitive = require('es-to-primitive/es5');\n\n// https://es5.github.io/#x9\nvar ES5 = {\n\tToPrimitive: toPrimitive,\n\n\tToBoolean: function ToBoolean(value) {\n\t\treturn Boolean(value);\n\t},\n\tToNumber: function ToNumber(value) {\n\t\treturn Number(value);\n\t},\n\tToInteger: function ToInteger(value) {\n\t\tvar number = this.ToNumber(value);\n\t\tif ($isNaN(number)) { return 0; }\n\t\tif (number === 0 || !$isFinite(number)) { return number; }\n\t\treturn sign(number) * Math.floor(Math.abs(number));\n\t},\n\tToInt32: function ToInt32(x) {\n\t\treturn this.ToNumber(x) >> 0;\n\t},\n\tToUint32: function ToUint32(x) {\n\t\treturn this.ToNumber(x) >>> 0;\n\t},\n\tToUint16: function ToUint16(value) {\n\t\tvar number = this.ToNumber(value);\n\t\tif ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }\n\t\tvar posInt = sign(number) * Math.floor(Math.abs(number));\n\t\treturn mod(posInt, 0x10000);\n\t},\n\tToString: function ToString(value) {\n\t\treturn String(value);\n\t},\n\tToObject: function ToObject(value) {\n\t\tthis.CheckObjectCoercible(value);\n\t\treturn Object(value);\n\t},\n\tCheckObjectCoercible: function CheckObjectCoercible(value, optMessage) {\n\t\t/* jshint eqnull:true */\n\t\tif (value == null) {\n\t\t\tthrow new TypeError(optMessage || 'Cannot call method on ' + value);\n\t\t}\n\t\treturn value;\n\t},\n\tIsCallable: IsCallable,\n\tSameValue: function SameValue(x, y) {\n\t\tif (x === y) { // 0 === -0, but they are not identical.\n\t\t\tif (x === 0) { return 1 / x === 1 / y; }\n\t\t\treturn true;\n\t\t}\n\t\treturn $isNaN(x) && $isNaN(y);\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/5.1/#sec-8\n\tType: function Type(x) {\n\t\tif (x === null) {\n\t\t\treturn 'Null';\n\t\t}\n\t\tif (typeof x === 'undefined') {\n\t\t\treturn 'Undefined';\n\t\t}\n\t\tif (typeof x === 'function' || typeof x === 'object') {\n\t\t\treturn 'Object';\n\t\t}\n\t\tif (typeof x === 'number') {\n\t\t\treturn 'Number';\n\t\t}\n\t\tif (typeof x === 'boolean') {\n\t\t\treturn 'Boolean';\n\t\t}\n\t\tif (typeof x === 'string') {\n\t\t\treturn 'String';\n\t\t}\n\t}\n};\n\nmodule.exports = ES5;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-abstract/es5.js\n// module id = 97\n// module chunks = 0","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isPrimitive = require('./helpers/isPrimitive');\n\nvar isCallable = require('is-callable');\n\n// https://es5.github.io/#x8.12\nvar ES5internalSlots = {\n\t'[[DefaultValue]]': function (O, hint) {\n\t\tvar actualHint = hint || (toStr.call(O) === '[object Date]' ? String : Number);\n\n\t\tif (actualHint === String || actualHint === Number) {\n\t\t\tvar methods = actualHint === String ? ['toString', 'valueOf'] : ['valueOf', 'toString'];\n\t\t\tvar value, i;\n\t\t\tfor (i = 0; i < methods.length; ++i) {\n\t\t\t\tif (isCallable(O[methods[i]])) {\n\t\t\t\t\tvalue = O[methods[i]]();\n\t\t\t\t\tif (isPrimitive(value)) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new TypeError('No default value');\n\t\t}\n\t\tthrow new TypeError('invalid [[DefaultValue]] hint supplied');\n\t}\n};\n\n// https://es5.github.io/#x9\nmodule.exports = function ToPrimitive(input, PreferredType) {\n\tif (isPrimitive(input)) {\n\t\treturn input;\n\t}\n\treturn ES5internalSlots['[[DefaultValue]]'](input, PreferredType);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/es-to-primitive/es5.js\n// module id = 98\n// module chunks = 0","'use strict';\n\nvar has = require('has');\nvar regexExec = RegExp.prototype.exec;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar tryRegexExecCall = function tryRegexExec(value) {\n\ttry {\n\t\tvar lastIndex = value.lastIndex;\n\t\tvalue.lastIndex = 0;\n\n\t\tregexExec.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tvalue.lastIndex = lastIndex;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar regexClass = '[object RegExp]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isRegex(value) {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\tif (!hasToStringTag) {\n\t\treturn toStr.call(value) === regexClass;\n\t}\n\n\tvar descriptor = gOPD(value, 'lastIndex');\n\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\tif (!hasLastIndexDataProperty) {\n\t\treturn false;\n\t}\n\n\treturn tryRegexExecCall(value);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-regex/index.js\n// module id = 99\n// module chunks = 0","var bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/has/src/index.js\n// module id = 100\n// module chunks = 0","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\nmodule.exports = function shimArrayPrototypeIncludes() {\n\tvar polyfill = getPolyfill();\n\tif (Array.prototype.includes !== polyfill) {\n\t\tdefine(Array.prototype, { includes: polyfill });\n\t}\n\treturn polyfill;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array-includes/shim.js\n// module id = 101\n// module chunks = 0","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn Array.prototype.includes || implementation;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array-includes/polyfill.js\n// module id = 102\n// module chunks = 0","'use strict';\n\nvar ES = require('es-abstract/es6');\nvar $isNaN = Number.isNaN || function (a) { return a !== a; };\nvar $isFinite = Number.isFinite || function (n) { return typeof n === 'number' && global.isFinite(n); };\nvar indexOf = Array.prototype.indexOf;\n\nmodule.exports = function includes(searchElement) {\n\tvar fromIndex = arguments.length > 1 ? ES.ToInteger(arguments[1]) : 0;\n\tif (indexOf && !$isNaN(searchElement) && $isFinite(fromIndex) && typeof searchElement !== 'undefined') {\n\t\treturn indexOf.apply(this, arguments) > -1;\n\t}\n\n\tvar O = ES.ToObject(this);\n\tvar length = ES.ToLength(O.length);\n\tif (length === 0) {\n\t\treturn false;\n\t}\n\tvar k = fromIndex >= 0 ? fromIndex : Math.max(0, length + fromIndex);\n\twhile (k < length) {\n\t\tif (ES.SameValueZero(searchElement, O[k])) {\n\t\t\treturn true;\n\t\t}\n\t\tk += 1;\n\t}\n\treturn false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/array-includes/implementation.js\n// module id = 103\n// module chunks = 0","/* Secure Creatives\n  Provides support for rendering creatives into cross domain iframes such as SafeFrame to prevent\n   access to a publisher page from creative payloads.\n */\n\nimport events from './events';\nimport { EVENTS } from './constants';\n\nconst BID_WON = EVENTS.BID_WON;\n\n\nexport function listenMessagesFromCreative() {\n  addEventListener('message', receiveMessage, false);\n}\n\nfunction receiveMessage(ev) {\n  var key = ev.message ? 'message' : 'data';\n  var data = {};\n  try {\n    data = JSON.parse(ev[key]);\n  } catch (e) {\n    return;\n  }\n\n  if (data.adId) {\n    const adObject = pbjs._bidsReceived.find(function (bid) {\n      return bid.adId === data.adId;\n    });\n\n    if (data.message === 'Prebid Request') {\n      sendAdToCreative(adObject, data.adServerDomain, ev.source);\n      events.emit(BID_WON, adObject);\n    }\n  }\n}\n\nfunction sendAdToCreative(adObject, remoteDomain, source) {\n  const { adId, ad, adUrl, width, height } = adObject;\n\n  if (adId) {\n    resizeRemoteCreative(adObject);\n    source.postMessage(JSON.stringify({\n      message: 'Prebid Response',\n      ad,\n      adUrl,\n      adId,\n      width,\n      height\n    }), remoteDomain);\n  }\n}\n\nfunction resizeRemoteCreative({ adUnitCode, width, height }) {\n  const iframe = document.getElementById(window.googletag.pubads()\n    .getSlots().find(slot => {\n      return slot.getAdUnitPath() === adUnitCode ||\n        slot.getSlotElementId() === adUnitCode;\n    }).getSlotElementId()).querySelector('iframe');\n\n  iframe.width = '' + width;\n  iframe.height = '' + height;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/secure-creatives.js","import {formatQS} from './url';\n\n//Adserver parent class\nconst AdServer = function(attr) {\n  this.name = attr.adserver;\n  this.code = attr.code;\n  this.getWinningBidByCode = function() {\n    var bidObject = pbjs._bidsReceived.find(bid => bid.adUnitCode === this.code);\n    return bidObject;\n  };\n};\n\n//DFP ad server\nexports.dfpAdserver = function (options, urlComponents) {\n  var adserver = new AdServer(options);\n  adserver.urlComponents = urlComponents;\n\n  var dfpReqParams = {\n    'env' : 'vp',\n    'gdfp_req' : '1',\n    'impl' : 's',\n    'unviewed_position_start' : '1'\n  };\n\n  var dfpParamsWithVariableValue = ['output', 'iu', 'sz', 'url', 'correlator', 'description_url', 'hl'];\n\n  var getCustomParams = function(targeting) {\n    return encodeURIComponent(formatQS(targeting));\n  };\n\n  adserver.appendQueryParams = function() {\n    var bid = adserver.getWinningBidByCode();\n    this.urlComponents.search.description_url = encodeURIComponent(bid.descriptionUrl);\n    this.urlComponents.search.cust_params = getCustomParams(bid.adserverTargeting);\n    this.urlComponents.search.correlator = Date.now();\n  };\n\n  adserver.verifyAdserverTag = function() {\n    for(var key in dfpReqParams) {\n      if(!this.urlComponents.search.hasOwnProperty(key) || this.urlComponents.search[key] !== dfpReqParams[key]) {\n        return false;\n      }\n    }\n    for(var i in dfpParamsWithVariableValue) {\n      if(!this.urlComponents.search.hasOwnProperty(dfpParamsWithVariableValue[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  return adserver;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adserver.js","import { uniques, isGptPubadsDefined, getHighestCpm, adUnitsFilter } from './utils';\nconst bidmanager = require('./bidmanager.js');\nconst utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\n\nvar targeting = exports;\nvar pbTargetingKeys = [];\n\ntargeting.resetPresetTargeting = function() {\n  if (isGptPubadsDefined()) {\n    window.googletag.pubads().getSlots().forEach(slot => {\n      pbTargetingKeys.forEach(function(key){\n        // reset only registered adunits\n        pbjs.adUnits.find(function(unit) {\n          if (unit.code === slot.getAdUnitPath() ||\n              unit.code === slot.getSlotElementId()) {\n            slot.setTargeting(key, null);\n          }\n        });\n      });\n    });\n  }\n};\n\ntargeting.getAllTargeting = function(adUnitCode) {\n  const adUnitCodes = adUnitCode && adUnitCode.length ? [adUnitCode] : pbjs._adUnitCodes;\n\n  // Get targeting for the winning bid. Add targeting for any bids that have\n  // `alwaysUseBid=true`. If sending all bids is enabled, add targeting for losing bids.\n  var targeting = getWinningBidTargeting(adUnitCodes)\n      .concat(getAlwaysUseBidTargeting(adUnitCodes))\n      .concat(pbjs._sendAllBids ? getBidLandscapeTargeting(adUnitCodes) : []);\n\n  //store a reference of the targeting keys\n  targeting.map(adUnitCode => {\n    Object.keys(adUnitCode).map(key => {\n      adUnitCode[key].map(targetKey => {\n        if (pbTargetingKeys.indexOf(Object.keys(targetKey)[0]) === -1) {\n          pbTargetingKeys = Object.keys(targetKey).concat(pbTargetingKeys);\n        }\n      });\n    });\n  });\n  return targeting;\n};\n\ntargeting.setTargeting = function(targetingConfig) {\n  window.googletag.pubads().getSlots().forEach(slot => {\n    targetingConfig.filter(targeting => Object.keys(targeting)[0] === slot.getAdUnitPath() ||\n      Object.keys(targeting)[0] === slot.getSlotElementId())\n      .forEach(targeting => targeting[Object.keys(targeting)[0]]\n        .forEach(key => {\n          key[Object.keys(key)[0]]\n            .map((value) => {\n              utils.logMessage(`Attempting to set key value for slot: ${slot.getSlotElementId()} key: ${Object.keys(key)[0]} value: ${value}`);\n              return value;\n            })\n            .forEach(value => {\n              slot.setTargeting(Object.keys(key)[0], value);\n            });\n        }));\n  });\n};\n\ntargeting.getWinningBids = function(adUnitCode) {\n  // use the given adUnitCode as a filter if present or all adUnitCodes if not\n  const adUnitCodes = adUnitCode ? [adUnitCode] : pbjs._adUnitCodes;\n\n  return pbjs._bidsReceived\n    .filter(bid => adUnitCodes.includes(bid.adUnitCode))\n    .filter(bid => bid.cpm > 0)\n    .map(bid => bid.adUnitCode)\n    .filter(uniques)\n    .map(adUnitCode => pbjs._bidsReceived\n      .filter(bid => bid.adUnitCode === adUnitCode ? bid : null)\n      .reduce(getHighestCpm,\n        {\n          adUnitCode: adUnitCode,\n          cpm: 0,\n          adserverTargeting: {},\n          timeToRespond: 0\n        }));\n};\n\ntargeting.setTargetingForAst = function() {\n  let targeting = pbjs.getAdserverTargeting();\n  Object.keys(targeting).forEach(targetId =>\n    Object.keys(targeting[targetId]).forEach(key => {\n      utils.logMessage(`Attempting to set targeting for targetId: ${targetId} key: ${key} value: ${targeting[targetId][key]}`);\n      //setKeywords supports string and array as value\n      if(utils.isStr(targeting[targetId][key]) || utils.isArray(targeting[targetId][key])) {\n        let keywordsObj = {};\n        let input = 'hb_adid';\n        let nKey = (key.substring(0, input.length) === input) ? key.toUpperCase() : key;\n        keywordsObj[nKey] = targeting[targetId][key];\n        window.apntag.setKeywords(targetId,keywordsObj);\n      }\n    })\n  );\n};\n\nfunction getWinningBidTargeting() {\n  let winners = targeting.getWinningBids();\n  let standardKeys = getStandardKeys();\n\n  winners = winners.map(winner => {\n    return {\n      [winner.adUnitCode]: Object.keys(winner.adserverTargeting)\n        .filter(key =>\n          typeof winner.sendStandardTargeting === \"undefined\" ||\n          winner.sendStandardTargeting ||\n          standardKeys.indexOf(key) === -1)\n        .map(key => ({ [key.substring(0, 20)]: [winner.adserverTargeting[key]] }))\n    };\n  });\n\n  return winners;\n}\n\nfunction getStandardKeys() {\n  return bidmanager.getStandardBidderAdServerTargeting()        // in case using a custom standard key set\n                   .map(targeting => targeting.key)\n                   .concat(CONSTANTS.TARGETING_KEYS).filter(uniques);     // standard keys defined in the library.\n}\n\n/**\n * Get custom targeting keys for bids that have `alwaysUseBid=true`.\n */\nfunction getAlwaysUseBidTargeting(adUnitCodes) {\n  let standardKeys = getStandardKeys();\n  return pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, adUnitCodes))\n    .map(bid => {\n      if (bid.alwaysUseBid) {\n        return {\n          [bid.adUnitCode]: Object.keys(bid.adserverTargeting).map(key => {\n            // Get only the non-standard keys of the losing bids, since we\n            // don't want to override the standard keys of the winning bid.\n            if (standardKeys.indexOf(key) > -1) {\n              return;\n            }\n\n            return { [key.substring(0, 20)]: [bid.adserverTargeting[key]] };\n\n          }).filter(key => key) // remove empty elements\n        };\n      }\n    })\n    .filter(bid => bid); // removes empty elements in array;\n}\n\nfunction getBidLandscapeTargeting(adUnitCodes) {\n  const standardKeys = CONSTANTS.TARGETING_KEYS;\n\n  return pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, adUnitCodes))\n    .map(bid => {\n      if (bid.adserverTargeting) {\n        return {\n          [bid.adUnitCode]: getTargetingMap(bid, standardKeys.filter(\n            key => typeof bid.adserverTargeting[key] !== 'undefined') // mainly for possibly\n            // unset hb_deal\n          )\n        };\n      }\n    }).filter(bid => bid); // removes empty elements in array\n}\n\nfunction getTargetingMap(bid, keys) {\n  return keys.map(key => {\n    return {\n      [`${key}_${bid.bidderCode}`.substring(0, 20)]: [bid.adserverTargeting[key]]\n    };\n  });\n}\n\ntargeting.isApntagDefined = function() {\n  if (window.apntag && utils.isFn(window.apntag.setKeywords)) {\n    return true;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/targeting.js"],"sourceRoot":""}