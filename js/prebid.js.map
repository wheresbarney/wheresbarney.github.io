{"version":3,"sources":["webpack:///webpack/bootstrap aa30183c1d22d095e0eb","webpack:///./src/prebid.js","webpack:///./src/prebidGlobal.js","webpack:///./src/utils.js","webpack:///./src/constants.json","webpack:///./src/video.js","webpack:///./src/adaptermanager.js","webpack:///./src/sizeMapping.js","webpack:///./src/adapters/baseAdapter.js","webpack:///./src/events.js","webpack:///./src/adapters/audienceNetwork.js","webpack:///./src/ajax.js","webpack:///./src/url.js","webpack:///./src/bidfactory.js","webpack:///./src/bidmanager.js","webpack:///./src/cpmBucketManager.js","webpack:///./src/adapters/adapter.js","webpack:///./src/polyfill.js","webpack:///./~/core-js/fn/array/find.js","webpack:///./~/core-js/modules/es6.array.find.js","webpack:///./~/core-js/modules/_export.js","webpack:///./~/core-js/modules/_global.js","webpack:///./~/core-js/modules/_core.js","webpack:///./~/core-js/modules/_hide.js","webpack:///./~/core-js/modules/_object-dp.js","webpack:///./~/core-js/modules/_an-object.js","webpack:///./~/core-js/modules/_is-object.js","webpack:///./~/core-js/modules/_ie8-dom-define.js","webpack:///./~/core-js/modules/_descriptors.js","webpack:///./~/core-js/modules/_fails.js","webpack:///./~/core-js/modules/_dom-create.js","webpack:///./~/core-js/modules/_to-primitive.js","webpack:///./~/core-js/modules/_property-desc.js","webpack:///./~/core-js/modules/_redefine.js","webpack:///./~/core-js/modules/_has.js","webpack:///./~/core-js/modules/_uid.js","webpack:///./~/core-js/modules/_ctx.js","webpack:///./~/core-js/modules/_a-function.js","webpack:///./~/core-js/modules/_array-methods.js","webpack:///./~/core-js/modules/_iobject.js","webpack:///./~/core-js/modules/_cof.js","webpack:///./~/core-js/modules/_to-object.js","webpack:///./~/core-js/modules/_defined.js","webpack:///./~/core-js/modules/_to-length.js","webpack:///./~/core-js/modules/_to-integer.js","webpack:///./~/core-js/modules/_array-species-create.js","webpack:///./~/core-js/modules/_array-species-constructor.js","webpack:///./~/core-js/modules/_is-array.js","webpack:///./~/core-js/modules/_wks.js","webpack:///./~/core-js/modules/_shared.js","webpack:///./~/core-js/modules/_add-to-unscopables.js","webpack:///./~/core-js/fn/array/includes.js","webpack:///./~/core-js/modules/es7.array.includes.js","webpack:///./~/core-js/modules/_array-includes.js","webpack:///./~/core-js/modules/_to-iobject.js","webpack:///./~/core-js/modules/_to-index.js","webpack:///./~/core-js/fn/object/assign.js","webpack:///./~/core-js/modules/es6.object.assign.js","webpack:///./~/core-js/modules/_object-assign.js","webpack:///./~/core-js/modules/_object-keys.js","webpack:///./~/core-js/modules/_object-keys-internal.js","webpack:///./~/core-js/modules/_shared-key.js","webpack:///./~/core-js/modules/_enum-bug-keys.js","webpack:///./~/core-js/modules/_object-gops.js","webpack:///./~/core-js/modules/_object-pie.js","webpack:///./src/secure-creatives.js","webpack:///./src/adloader.js","webpack:///./src/adserver.js","webpack:///./src/targeting.js"],"names":["pbjs","CONSTANTS","require","utils","bidmanager","adaptermanager","bidfactory","events","adserver","targeting","objectType_function","objectType_undefined","objectType_object","BID_WON","EVENTS","SET_TARGETING","auctionRunning","bidRequestQueue","eventValidators","bidWon","checkDefinedPlacement","_bidsRequested","_bidsReceived","_adUnitCodes","_winningBids","_adsReceived","_sendAllBids","bidderSettings","bidderTimeout","cbTimeout","timeoutBuffer","logging","publisherDomain","window","location","origin","libLoaded","version","logInfo","adUnits","que","push","cmd","call","e","logError","message","processQue","i","length","called","id","placementCodes","map","bidSet","bids","bid","placementCode","reduce","filter","contains","clearPlacements","includes","adUnitCode","setRenderSize","doc","width","height","defaultView","frameElement","getAdserverTargetingForAdUnitCodeStr","adunitCode","arguments","res","getAdserverTargetingForAdUnitCode","transformAdServerTargetingObj","logMessage","getAdserverTargeting","getAllTargeting","Object","keys","target","join","p","c","accumulator","key","getBidResponses","responses","bind","currentRequestId","requestId","a","b","getBidResponsesForAdUnitCode","setTargetingForGPTAsync","resetPresetTargeting","setTargeting","emit","setTargetingForAst","isApntagDefined","allBidsAvailable","bidsBackAll","renderAd","adObject","find","adId","ad","mediaType","url","adUrl","renderer","render","document","inIframe","write","close","removeAdUnit","code","splice","clearAuction","shift","requestBids","bidsBackHandler","timeout","adUnitCodes","unit","invalidVideoAdUnits","forEach","adUnit","externalCallbackReset","addOneTimeCallback","executeCallback","timedOut","timeoutCallback","timer","setTimeout","callBids","addAdUnits","adUnitArr","isArray","transactionId","generateUUID","apply","onEvent","event","handler","isFn","on","offEvent","off","addCallback","eventStr","func","getUniqueIdentifierStr","removeCallback","registerBidAdapter","bidderAdaptor","bidderCode","registerAnalyticsAdapter","options","bidsAvailableForAdapter","bidderRequest","createBid","statusCode","addBidResponse","loadScript","tagSrc","callback","useCache","enableAnalytics","config","isEmpty","aliasBidder","alias","aliasBidAdapter","setPriceGranularity","granularity","setCustomPriceBucket","GRANULARITY_OPTIONS","CUSTOM","enableSendAllBids","getAllWinningBids","buildMasterVideoTagFromAdserverTag","adserverTag","urlComponents","masterTag","toLowerCase","dfpAdserverObj","dfpAdserver","verifyAdserverTag","appendQueryParams","setBidderSequence","order","ORDER","RANDOM","getHighestCpmBids","getWinningBids","getGlobal","uniques","flatten","getBidRequest","getKeys","getValue","getBidderCodes","isGptPubadsDefined","getHighestCpm","shuffle","adUnitsFilter","isSrcdocSupported","cloneJson","objectType_string","objectType_number","_loggingChecked","t_Arr","t_Str","t_Fn","t_Numb","toString","prototype","infoLogger","console","info","exports","replaceTokenInString","str","token","_each","value","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","_getUniqueIdentifierStr","Math","random","substr","placeholder","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","getOwnPropertyNames","parseSizesInput","sizeObj","parsedSizes","sizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","parseGPTSingleSizeArray","singleSize","isNaN","getTopWindowLocation","top","getTopWindowUrl","href","logWarn","msg","debugTurnedOn","warn","args","hasConsoleLogger","log","errLogFn","hasLogger","error","getParameterByName","DEBUG_MODE","exception","errCode","createInvisibleIframe","_createInvisibleIframe","f","createElement","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","addEventListener","attachEvent","isA","object","_t","isStr","isNumber","isEmptyStr","fn","l","obj","indexOf","Array","_map","output","objectToCheck","propertyToCheckFor","constructor","createTrackPixelHtml","escapedUrl","encodeURI","img","createTrackPixelIframeHtml","getIframeDocument","iframe","contentWindow","contentDocument","getValueString","param","val","defaultValue","index","arry","concat","bidId","bidder","googletag","pubads","getSlots","previous","current","cpm","timeToRespond","array","counter","floor","temp","test","navigator","userAgent","JSON","parse","stringify","self","videoAdUnit","nonVideoBidder","hasNonVideoBidder","_bidderRegistry","bidderRegistry","_analyticsRegistry","_bidderSequence","getBids","bidderRequestId","sizeMapping","auctionStart","Date","now","auctionInit","timestamp","AUCTION_INIT","bidderCodes","start","getTime","BID_REQUESTED","bidAdaptor","existingAlias","newAdapter","createNew","setBidderCode","adapterConfig","provider","AudienceNetworkAdapter","videoAdapters","_win","mapSizes","isSizeMappingValid","getScreenWidth","mapping","prev","curr","minWidth","win","w","d","innerWidth","body","clientWidth","documentElement","setWindow","BaseAdapter","slice","allEvents","v","idPaths","EVENT_ID_PATHS","eventsFired","module","_handlers","_public","_dispatch","eventString","eventPayload","idPath","eventKeys","callbacks","eventType","_checkAvailableEvent","_handler","get","getEvents","arrayCopy","newProp","baseAdapter","getBidderCode","validateBidRequest","params","placementId","validateBidRequestSizes","flattenSize","every","size","isTestmode","Boolean","parseJson","data","jsonAsString","err","isNative","createAdHtml","nativeStyle","nativeContainer","createSuccessBidResponse","cpmCents","GOOD","Number","hb_bidder","fb_bidid","fb_format","fb_placementid","createFailureBidResponse","NO_BID","placementids","adformats","bidRequest","testmode","protocol","host","pathname","sdk","errors","noBid","placement_id","bid_id","bid_price_cents","withCredentials","AudienceNetwork","ajax","XHR_DONE","x","useXDomainRequest","method","success","XMLHttpRequest","responseType","XDomainRequest","onload","responseText","onerror","ontimeout","onprogress","onreadystatechange","readyState","status","statusText","urlInfo","open","preflight","setRequestHeader","contentType","send","parseQS","formatQS","format","query","acc","criteria","parsed","hostname","port","hash","Bid","_bidId","_statusCode","statusMessage","_getStatus","getStatusCode","getSize","AUCTION_END","externalCallbacks","byAdUnit","all","oneTime","_granularity","MEDIUM","_customPriceBucket","defaultBidderSettingsMap","customConfig","getTimedOutBidders","getBidders","bidsBackAdUnit","requested","request","add","received","getBidderRequest","responseTimestamp","requestTimestamp","BID_ADJUSTMENT","BID_RESPONSE","priceStringsObj","pbLg","low","pbMg","med","pbHg","high","pbAg","auto","pbDg","dense","pbCg","custom","keyValues","dealId","getKeyValueTargetingPairs","adserverTargeting","triggerAdUnitCallbacks","custBidObj","bidder_settings","standardSettings","getStandardBidderSettings","setKeys","JSON_MAPPING","ADSERVER_TARGETING","alwaysUseBid","sendStandardTargeting","kvPair","suppressEmptyKeys","granularityOptions","option","registerDefaultBidderSetting","defaultSetting","clearTimeout","processCallbacks","timedOutBidders","BID_TIMEOUT","singleAdUnitCode","callbackQueue","groupByPlacement","bidsByPlacement","cbEvent","CB","TYPE","ALL_BIDS_BACK","AD_UNIT_BIDS_BACK","adjustBids","bidPriceAdjusted","bidCpmAdjustment","BD_SETTING_STANDARD","bidResponse","AUTO","DENSE","LOW","HIGH","getStandardBidderAdServerTargeting","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","getPriceBucketString","cpmFloat","parseFloat","getCpmStringValue","cpmStr","isValidePriceConfig","cap","buckets","max","bucket","precision","toFixed","min","getCpmTarget","increment","isValid","bucketSize","Adapter","isInteger","isFinite","listenMessagesFromCreative","receiveMessage","ev","sendAdToCreative","adServerDomain","source","remoteDomain","resizeRemoteCreative","postMessage","getElementById","slot","getAdUnitPath","getSlotElementId","querySelector","_requestCache","cacheRequest","loaded","requestResource","jptScript","type","async","elToAppend","getElementsByTagName","insertBefore","firstChild","trackPixel","pixelUrl","delimiter","trackingPixel","Image","AdServer","attr","getWinningBidByCode","dfpReqParams","dfpParamsWithVariableValue","getCustomParams","description_url","descriptionUrl","cust_params","correlator","pbTargetingKeys","getWinningBidTargeting","getAlwaysUseBidTargeting","getBidLandscapeTargeting","targetKey","targetingConfig","targetId","keywordsObj","input","nKey","substring","apntag","setKeywords","winners","standardKeys","getStandardKeys","winner","TARGETING_KEYS","getTargetingMap"],"mappings":"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SAAP,GAAmBrK,OAAOqK,SAAP,IAAoB,UAAS1Y,KAAT,EAAgB;AACrD,UAAO,OAAOA,KAAP,KAAiB,QAAjB,IACL2Y,SAAS3Y,KAAT,CADK,IAELU,KAAKwH,KAAL,CAAWlI,KAAX,MAAsBA,KAFxB;AAGD,EAJD,C;;;;;;ACTA;AACA,qD;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,gBAAgB,EAAE;AACxD;AACA;AACA;AACA;AACA,EAAC;AACD,8B;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAqF,uBAAuB;AAC5G,oEAAmE;AACnE,iEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd,eAAc;AACd,eAAc;AACd,eAAc;AACd,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,iBAAgB;AAChB,0B;;;;;;AC1CA;AACA;AACA;AACA,wCAAuC,gC;;;;;;ACHvC,8BAA6B;AAC7B,sCAAqC,gC;;;;;;ACDrC;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;AACA;AACA;AACA,G;;;;;;ACfA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,G;;;;;;ACFA;AACA,sEAAsE,gBAAgB,UAAU,GAAG;AACnG,EAAC,E;;;;;;ACFD;AACA;AACA,kCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,EAAC,E;;;;;;ACHD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,EAAC,E;;;;;;AC/BD,wBAAuB;AACvB;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACnBA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,eAAe;AACxB;AACA;AACA;AACA,uCAAsC;AACtC;AACA,+BAA8B;AAC9B,8BAA6B;AAC7B,gCAA+B;AAC/B,oCAAmC;AACnC,UAAS,+BAA+B;AACxC;AACA;AACA;AACA;AACA,G;;;;;;AC3CA;AACA;AACA;AACA;AACA,G;;;;;;ACJA,kBAAiB;;AAEjB;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;;AAEA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;ACfA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wB;;;;;;ACVA;AACA;AACA,oDAAmD;AACnD;AACA,wCAAuC;AACvC,G;;;;;;ACLA;AACA;AACA;AACA,4FAAsF;AACtF;AACA;AACA,G;;;;;;ACNA;AACA,yD;;;;;;ACDA;AACA;AA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","file":"prebid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aa30183c1d22d095e0eb","/** @module pbjs */\n\nimport { getGlobal } from './prebidGlobal';\nimport {flatten, uniques, isGptPubadsDefined, adUnitsFilter } from './utils';\nimport { videoAdUnit, hasNonVideoBidder } from './video';\nimport 'polyfill';\nimport {parse as parseURL, format as formatURL} from './url';\nimport {isValidePriceConfig} from './cpmBucketManager';\nimport {listenMessagesFromCreative} from './secure-creatives';\nimport { loadScript } from './adloader';\n\nvar pbjs = getGlobal();\nvar CONSTANTS = require('./constants.json');\nvar utils = require('./utils.js');\nvar bidmanager = require('./bidmanager.js');\nvar adaptermanager = require('./adaptermanager');\nvar bidfactory = require('./bidfactory');\nvar events = require('./events');\nvar adserver = require('./adserver.js');\nvar targeting = require('./targeting.js');\n\n/* private variables */\n\nvar objectType_function = 'function';\nvar objectType_undefined = 'undefined';\nvar objectType_object = 'object';\nvar BID_WON = CONSTANTS.EVENTS.BID_WON;\nvar SET_TARGETING = CONSTANTS.EVENTS.SET_TARGETING;\n\nvar auctionRunning = false;\nvar bidRequestQueue = [];\n\nvar eventValidators = {\n  bidWon: checkDefinedPlacement\n};\n\n/* Public vars */\n\npbjs._bidsRequested = [];\npbjs._bidsReceived = [];\n// _adUnitCodes stores the current filter to use for adUnits as an array of adUnitCodes\npbjs._adUnitCodes = [];\npbjs._winningBids = [];\npbjs._adsReceived = [];\npbjs._sendAllBids = false;\n\npbjs.bidderSettings = pbjs.bidderSettings || {};\n\n//default timeout for all bids\npbjs.bidderTimeout = pbjs.bidderTimeout || 3000;\n\n// current timeout set in `requestBids` or to default `bidderTimeout`\npbjs.cbTimeout = pbjs.cbTimeout || 200;\n\n// timeout buffer to adjust for bidder CDN latency\npbjs.timeoutBuffer = 200;\n\npbjs.logging = pbjs.logging || false;\n\n// domain where prebid is running for cross domain iframe communication\npbjs.publisherDomain = pbjs.publisherDomain || window.location.origin;\n\n//let the world know we are loaded\npbjs.libLoaded = true;\n\n//version auto generated from build\npbjs.version = 'v0.22.2';\nutils.logInfo('Prebid.js v0.22.2 loaded');\n\n//create adUnit array\npbjs.adUnits = pbjs.adUnits || [];\n\n/**\n * Command queue that functions will execute once prebid.js is loaded\n * @param  {function} cmd Anonymous function to execute\n * @alias module:pbjs.que.push\n */\npbjs.que.push = function (cmd) {\n  if (typeof cmd === objectType_function) {\n    try {\n      cmd.call();\n    } catch (e) {\n      utils.logError('Error processing command :' + e.message);\n    }\n  } else {\n    utils.logError('Commands written into pbjs.que.push must wrapped in a function');\n  }\n};\n\nfunction processQue() {\n  for (var i = 0; i < pbjs.que.length; i++) {\n    if (typeof pbjs.que[i].called === objectType_undefined) {\n      try {\n        pbjs.que[i].call();\n        pbjs.que[i].called = true;\n      }\n      catch (e) {\n        utils.logError('Error processing command :', 'prebid.js', e);\n      }\n    }\n  }\n}\n\nfunction checkDefinedPlacement(id) {\n  var placementCodes = pbjs._bidsRequested.map(bidSet => bidSet.bids.map(bid => bid.placementCode))\n    .reduce(flatten)\n    .filter(uniques);\n\n  if (!utils.contains(placementCodes, id)) {\n    utils.logError('The \"' + id + '\" placement is not defined.');\n    return;\n  }\n\n  return true;\n}\n\n/**\n * When a request for bids is made any stale bids remaining will be cleared for\n * a placement included in the outgoing bid request.\n */\nfunction clearPlacements() {\n  pbjs._bidsRequested = [];\n\n  // leave bids received for ad slots not in this bid request\n  pbjs._bidsReceived = pbjs._bidsReceived\n    .filter(bid => !pbjs._adUnitCodes.includes(bid.adUnitCode));\n}\n\nfunction setRenderSize(doc, width, height) {\n  if (doc.defaultView && doc.defaultView.frameElement) {\n    doc.defaultView.frameElement.width = width;\n    doc.defaultView.frameElement.height = height;\n  }\n}\n\n//////////////////////////////////\n//                              //\n//    Start Public APIs         //\n//                              //\n//////////////////////////////////\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param  {string} [adunitCode] adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCodeStr\n * @return {array}  returnObj return bids array\n */\npbjs.getAdserverTargetingForAdUnitCodeStr = function (adunitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargetingForAdUnitCodeStr', arguments);\n\n  // call to retrieve bids array\n  if (adunitCode) {\n    var res = pbjs.getAdserverTargetingForAdUnitCode(adunitCode);\n    return utils.transformAdServerTargetingObj(res);\n  } else {\n    utils.logMessage('Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode');\n  }\n};\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param adUnitCode {string} adUnitCode to get the bid responses for\n * @returns {object}  returnObj return bids\n */\npbjs.getAdserverTargetingForAdUnitCode = function(adUnitCode) {\n  return pbjs.getAdserverTargeting(adUnitCode)[adUnitCode];\n};\n\n/**\n * returns all ad server targeting for all ad units\n * @return {object} Map of adUnitCodes and targeting values []\n * @alias module:pbjs.getAdserverTargeting\n */\n\npbjs.getAdserverTargeting = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.getAdserverTargeting', arguments);\n  return targeting.getAllTargeting(adUnitCode)\n    .map(targeting => {\n      return {\n        [Object.keys(targeting)[0]]: targeting[Object.keys(targeting)[0]]\n          .map(target => {\n            return {\n              [Object.keys(target)[0]]: target[Object.keys(target)[0]].join(', ')\n            };\n          }).reduce((p, c) => Object.assign(c, p), {})\n      };\n    })\n    .reduce(function (accumulator, targeting) {\n      var key = Object.keys(targeting)[0];\n      accumulator[key] = Object.assign({}, accumulator[key], targeting[key]);\n      return accumulator;\n    }, {});\n};\n\n/**\n * This function returns the bid responses at the given moment.\n * @alias module:pbjs.getBidResponses\n * @return {object}            map | object that contains the bidResponses\n */\n\npbjs.getBidResponses = function () {\n  utils.logInfo('Invoking pbjs.getBidResponses', arguments);\n  const responses = pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes));\n\n  // find the last requested id to get responses for most recent auction only\n  const currentRequestId = responses && responses.length && responses[responses.length - 1].requestId;\n\n  return responses.map(bid => bid.adUnitCode)\n    .filter(uniques).map(adUnitCode => responses\n      .filter(bid => bid.requestId === currentRequestId && bid.adUnitCode === adUnitCode))\n    .filter(bids => bids && bids[0] && bids[0].adUnitCode)\n    .map(bids => {\n      return {\n        [bids[0].adUnitCode]: { bids: bids }\n      };\n    })\n    .reduce((a, b) => Object.assign(a, b), {});\n};\n\n/**\n * Returns bidResponses for the specified adUnitCode\n * @param  {String} adUnitCode adUnitCode\n * @alias module:pbjs.getBidResponsesForAdUnitCode\n * @return {Object}            bidResponse object\n */\n\npbjs.getBidResponsesForAdUnitCode = function (adUnitCode) {\n  const bids = pbjs._bidsReceived.filter(bid => bid.adUnitCode === adUnitCode);\n  return {\n    bids: bids\n  };\n};\n\n/**\n * Set query string targeting on all GPT ad units.\n * @alias module:pbjs.setTargetingForGPTAsync\n */\npbjs.setTargetingForGPTAsync = function () {\n  utils.logInfo('Invoking pbjs.setTargetingForGPTAsync', arguments);\n  if (!isGptPubadsDefined()) {\n    utils.logError('window.googletag is not defined on the page');\n    return;\n  }\n\n  //first reset any old targeting\n  targeting.resetPresetTargeting();\n\n  //now set new targeting keys\n  targeting.setTargeting(targeting.getAllTargeting());\n\n  //emit event\n  events.emit(SET_TARGETING);\n};\n\npbjs.setTargetingForAst = function() {\n  utils.logInfo('Invoking pbjs.setTargetingForAn', arguments);\n  if(!targeting.isApntagDefined()) {\n    utils.logError('window.apntag is not defined on the page');\n    return;\n  }\n\n  targeting.setTargetingForAst();\n\n  //emit event\n  events.emit(SET_TARGETING);\n};\n\n/**\n * Returns a bool if all the bids have returned or timed out\n * @alias module:pbjs.allBidsAvailable\n * @return {bool} all bids available\n */\npbjs.allBidsAvailable = function () {\n  utils.logInfo('Invoking pbjs.allBidsAvailable', arguments);\n  return bidmanager.bidsBackAll();\n};\n\n/**\n * This function will render the ad (based on params) in the given iframe document passed through.\n * Note that doc SHOULD NOT be the parent document page as we can't doc.write() asynchronously\n * @param  {HTMLDocument} doc document\n * @param  {string} id bid id to locate the ad\n * @alias module:pbjs.renderAd\n */\npbjs.renderAd = function (doc, id) {\n  utils.logInfo('Invoking pbjs.renderAd', arguments);\n  utils.logMessage('Calling renderAd with adId :' + id);\n  if (doc && id) {\n    try {\n      //lookup ad by ad Id\n      var adObject = pbjs._bidsReceived.find(bid => bid.adId === id);\n      if (adObject) {\n        //save winning bids\n        pbjs._winningBids.push(adObject);\n\n        //emit 'bid won' event here\n        events.emit(BID_WON, adObject);\n\n        const { height, width, ad, mediaType, adUrl: url, renderer } = adObject;\n\n        if (renderer && renderer.url) {\n          renderer.render(adObject);\n        } else if ((doc === document && !utils.inIframe()) || mediaType === 'video') {\n          utils.logError(`Error trying to write ad. Ad render call ad id ${id} was prevented from writing to the main document.`);\n        } else if (ad) {\n          doc.write(ad);\n          doc.close();\n          setRenderSize(doc, width, height);\n        } else if (url) {\n          doc.write(`<IFRAME SRC=\"${url}\" FRAMEBORDER=\"0\" SCROLLING=\"no\" MARGINHEIGHT=\"0\" MARGINWIDTH=\"0\" TOPMARGIN=\"0\" LEFTMARGIN=\"0\" ALLOWTRANSPARENCY=\"true\" WIDTH=\"${width}\" HEIGHT=\"${height}\"></IFRAME>`);\n          doc.close();\n          setRenderSize(doc, width, height);\n        } else {\n          utils.logError('Error trying to write ad. No ad for bid response id: ' + id);\n        }\n\n      } else {\n        utils.logError('Error trying to write ad. Cannot find ad by given id : ' + id);\n      }\n\n    } catch (e) {\n      utils.logError('Error trying to write ad Id :' + id + ' to the page:' + e.message);\n    }\n  } else {\n    utils.logError('Error trying to write ad Id :' + id + ' to the page. Missing document or adId');\n  }\n\n};\n\n/**\n * Remove adUnit from the pbjs configuration\n * @param  {String} adUnitCode the adUnitCode to remove\n * @alias module:pbjs.removeAdUnit\n */\npbjs.removeAdUnit = function (adUnitCode) {\n  utils.logInfo('Invoking pbjs.removeAdUnit', arguments);\n  if (adUnitCode) {\n    for (var i = 0; i < pbjs.adUnits.length; i++) {\n      if (pbjs.adUnits[i].code === adUnitCode) {\n        pbjs.adUnits.splice(i, 1);\n      }\n    }\n  }\n};\n\npbjs.clearAuction = function() {\n  auctionRunning = false;\n  utils.logMessage('Prebid auction cleared');\n  if (bidRequestQueue.length) {\n    bidRequestQueue.shift()();\n  }\n};\n\n/**\n *\n * @param bidsBackHandler\n * @param timeout\n * @param adUnits\n * @param adUnitCodes\n */\npbjs.requestBids = function ({ bidsBackHandler, timeout, adUnits, adUnitCodes } = {}) {\n  events.emit('requestBids');\n  const cbTimeout = pbjs.cbTimeout = timeout || pbjs.bidderTimeout;\n  adUnits = adUnits || pbjs.adUnits;\n\n  utils.logInfo('Invoking pbjs.requestBids', arguments);\n\n  if (adUnitCodes && adUnitCodes.length) {\n    // if specific adUnitCodes supplied filter adUnits for those codes\n    adUnits = adUnits.filter(unit => adUnitCodes.includes(unit.code));\n  } else {\n    // otherwise derive adUnitCodes from adUnits\n    adUnitCodes = adUnits && adUnits.map(unit => unit.code);\n  }\n\n  // for video-enabled adUnits, only request bids if all bidders support video\n  const invalidVideoAdUnits = adUnits.filter(videoAdUnit).filter(hasNonVideoBidder);\n  invalidVideoAdUnits.forEach(adUnit => {\n    utils.logError(`adUnit ${adUnit.code} has 'mediaType' set to 'video' but contains a bidder that doesn't support video. No Prebid demand requests will be triggered for this adUnit.`);\n    for (let i = 0; i < adUnits.length; i++) {\n      if (adUnits[i].code === adUnit.code) {adUnits.splice(i, 1);}\n    }\n  });\n\n  if (auctionRunning) {\n    bidRequestQueue.push(() => {\n      pbjs.requestBids({ bidsBackHandler, timeout: cbTimeout, adUnits, adUnitCodes });\n    });\n    return;\n  }\n\n  auctionRunning = true;\n\n  // we will use adUnitCodes for filtering the current auction\n  pbjs._adUnitCodes = adUnitCodes;\n\n  bidmanager.externalCallbackReset();\n  clearPlacements();\n\n  if (!adUnits || adUnits.length === 0) {\n    utils.logMessage('No adUnits configured. No bids requested.');\n    if (typeof bidsBackHandler === objectType_function) {\n      bidmanager.addOneTimeCallback(bidsBackHandler, false);\n    }\n    bidmanager.executeCallback();\n    return;\n  }\n\n  //set timeout for all bids\n  const timedOut = true;\n  const timeoutCallback = bidmanager.executeCallback.bind(bidmanager, timedOut);\n  const timer = setTimeout(timeoutCallback, cbTimeout);\n  if (typeof bidsBackHandler === objectType_function) {\n    bidmanager.addOneTimeCallback(bidsBackHandler, timer);\n  }\n\n  adaptermanager.callBids({ adUnits, adUnitCodes, cbTimeout });\n  if(pbjs._bidsRequested.length === 0) {\n    bidmanager.executeCallback();\n  }\n};\n\n/**\n *\n * Add adunit(s)\n * @param {Array|String} adUnitArr Array of adUnits or single adUnit Object.\n * @alias module:pbjs.addAdUnits\n */\npbjs.addAdUnits = function (adUnitArr) {\n  utils.logInfo('Invoking pbjs.addAdUnits', arguments);\n  if (utils.isArray(adUnitArr)) {\n    // generate transactionid for each new adUnits\n    // Append array to existing\n    adUnitArr.forEach(adUnit => adUnit.transactionId = utils.generateUUID());\n    pbjs.adUnits.push.apply(pbjs.adUnits, adUnitArr);\n  } else if (typeof adUnitArr === objectType_object) {\n    // Generate the transaction id for the adunit\n    adUnitArr.transactionId = utils.generateUUID();\n    pbjs.adUnits.push(adUnitArr);\n  }\n};\n\n/**\n * @param {String} event the name of the event\n * @param {Function} handler a callback to set on event\n * @param {String} id an identifier in the context of the event\n *\n * This API call allows you to register a callback to handle a Prebid.js event.\n * An optional `id` parameter provides more finely-grained event callback registration.\n * This makes it possible to register callback events for a specific item in the\n * event context. For example, `bidWon` events will accept an `id` for ad unit code.\n * `bidWon` callbacks registered with an ad unit code id will be called when a bid\n * for that ad unit code wins the auction. Without an `id` this method registers the\n * callback for every `bidWon` event.\n *\n * Currently `bidWon` is the only event that accepts an `id` parameter.\n */\npbjs.onEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.onEvent', arguments);\n  if (!utils.isFn(handler)) {\n    utils.logError('The event handler provided is not a function and was not set on event \"' + event + '\".');\n    return;\n  }\n\n  if (id && !eventValidators[event].call(null, id)) {\n    utils.logError('The id provided is not valid for event \"' + event + '\" and no handler was set.');\n    return;\n  }\n\n  events.on(event, handler, id);\n};\n\n/**\n * @param {String} event the name of the event\n * @param {Function} handler a callback to remove from the event\n * @param {String} id an identifier in the context of the event (see `pbjs.onEvent`)\n */\npbjs.offEvent = function (event, handler, id) {\n  utils.logInfo('Invoking pbjs.offEvent', arguments);\n  if (id && !eventValidators[event].call(null, id)) {\n    return;\n  }\n\n  events.off(event, handler, id);\n};\n\n/**\n * Add a callback event\n * @param {String} eventStr event to attach callback to Options: \"allRequestedBidsBack\" | \"adUnitBidsBack\"\n * @param {Function} func  function to execute. Parameters passed into the function: (bidResObj), [adUnitCode]);\n * @alias module:pbjs.addCallback\n * @returns {String} id for callback\n */\npbjs.addCallback = function (eventStr, func) {\n  utils.logInfo('Invoking pbjs.addCallback', arguments);\n  var id = null;\n  if (!eventStr || !func || typeof func !== objectType_function) {\n    utils.logError('error registering callback. Check method signature');\n    return id;\n  }\n\n  id = utils.getUniqueIdentifierStr;\n  bidmanager.addCallback(id, func, eventStr);\n  return id;\n};\n\n/**\n * Remove a callback event\n * //@param {string} cbId id of the callback to remove\n * @alias module:pbjs.removeCallback\n * @returns {String} id for callback\n */\npbjs.removeCallback = function (/* cbId */) {\n  //todo\n  return null;\n};\n\n/**\n * Wrapper to register bidderAdapter externally (adaptermanager.registerBidAdapter())\n * @param  {[type]} bidderAdaptor [description]\n * @param  {[type]} bidderCode    [description]\n * @return {[type]}               [description]\n */\npbjs.registerBidAdapter = function (bidderAdaptor, bidderCode) {\n  utils.logInfo('Invoking pbjs.registerBidAdapter', arguments);\n  try {\n    adaptermanager.registerBidAdapter(bidderAdaptor(), bidderCode);\n  }\n  catch (e) {\n    utils.logError('Error registering bidder adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to register analyticsAdapter externally (adaptermanager.registerAnalyticsAdapter())\n * @param  {[type]} options [description]\n */\npbjs.registerAnalyticsAdapter = function (options) {\n  utils.logInfo('Invoking pbjs.registerAnalyticsAdapter', arguments);\n  try {\n    adaptermanager.registerAnalyticsAdapter(options);\n  }\n  catch (e) {\n    utils.logError('Error registering analytics adapter : ' + e.message);\n  }\n};\n\npbjs.bidsAvailableForAdapter = function (bidderCode) {\n  utils.logInfo('Invoking pbjs.bidsAvailableForAdapter', arguments);\n\n  pbjs._bidsRequested.find(bidderRequest => bidderRequest.bidderCode === bidderCode).bids\n    .map(bid => {\n      return Object.assign(bid, bidfactory.createBid(1), {\n        bidderCode,\n        adUnitCode: bid.placementCode\n      });\n    })\n    .map(bid => pbjs._bidsReceived.push(bid));\n};\n\n/**\n * Wrapper to bidfactory.createBid()\n * @param  {[type]} statusCode [description]\n * @return {[type]}            [description]\n */\npbjs.createBid = function (statusCode) {\n  utils.logInfo('Invoking pbjs.createBid', arguments);\n  return bidfactory.createBid(statusCode);\n};\n\n/**\n * Wrapper to bidmanager.addBidResponse\n * @param {[type]} adUnitCode [description]\n * @param {[type]} bid        [description]\n */\npbjs.addBidResponse = function (adUnitCode, bid) {\n  utils.logInfo('Invoking pbjs.addBidResponse', arguments);\n  bidmanager.addBidResponse(adUnitCode, bid);\n};\n\n/**\n * Wrapper to adloader.loadScript\n * @param  {[type]}   tagSrc   [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\npbjs.loadScript = function (tagSrc, callback, useCache) {\n  utils.logInfo('Invoking pbjs.loadScript', arguments);\n  loadScript(tagSrc, callback, useCache);\n};\n\n/**\n * Will enable sending a prebid.js to data provider specified\n * @param  {object} config object {provider : 'string', options : {}}\n */\npbjs.enableAnalytics = function (config) {\n  if (config && !utils.isEmpty(config)) {\n    utils.logInfo('Invoking pbjs.enableAnalytics for: ', config);\n    adaptermanager.enableAnalytics(config);\n  } else {\n    utils.logError('pbjs.enableAnalytics should be called with option {}');\n  }\n};\n\npbjs.aliasBidder = function (bidderCode, alias) {\n  utils.logInfo('Invoking pbjs.aliasBidder', arguments);\n  if (bidderCode && alias) {\n    adaptermanager.aliasBidAdapter(bidderCode, alias);\n  } else {\n    utils.logError('bidderCode and alias must be passed as arguments', 'pbjs.aliasBidder');\n  }\n};\n\n/**\n * Sets a default price granularity scheme.\n * @param {String|Object} granularity - the granularity scheme.\n * \"low\": $0.50 increments, capped at $5 CPM\n * \"medium\": $0.10 increments, capped at $20 CPM (the default)\n * \"high\": $0.01 increments, capped at $20 CPM\n * \"auto\": Applies a sliding scale to determine granularity\n * \"dense\": Like \"auto\", but the bid price granularity uses smaller increments, especially at lower CPMs\n *\n * Alternatively a custom object can be specified:\n * { \"buckets\" : [{\"min\" : 0,\"max\" : 20,\"increment\" : 0.1,\"cap\" : true}]};\n * See http://prebid.org/dev-docs/publisher-api-reference.html#module_pbjs.setPriceGranularity for more details\n */\npbjs.setPriceGranularity = function (granularity) {\n  utils.logInfo('Invoking pbjs.setPriceGranularity', arguments);\n  if (!granularity) {\n    utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n    return;\n  }\n  if(typeof granularity === 'string') {\n    bidmanager.setPriceGranularity(granularity);\n  }\n  else if(typeof granularity === 'object') {\n    if(!isValidePriceConfig(granularity)){\n      utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n      return;\n    }\n    bidmanager.setCustomPriceBucket(granularity);\n    bidmanager.setPriceGranularity(CONSTANTS.GRANULARITY_OPTIONS.CUSTOM);\n    utils.logMessage('Using custom price granularity');\n  }\n};\n\npbjs.enableSendAllBids = function () {\n  pbjs._sendAllBids = true;\n};\n\npbjs.getAllWinningBids = function () {\n  return pbjs._winningBids;\n};\n\n/**\n * Build master video tag from publishers adserver tag\n * @param {string} adserverTag default url\n * @param {object} options options for video tag\n */\npbjs.buildMasterVideoTagFromAdserverTag = function (adserverTag, options) {\n  utils.logInfo('Invoking pbjs.buildMasterVideoTagFromAdserverTag', arguments);\n  var urlComponents = parseURL(adserverTag);\n\n  //return original adserverTag if no bids received\n  if(pbjs._bidsReceived.length === 0) {\n    return adserverTag;\n  }\n\n  var masterTag = '';\n  if(options.adserver.toLowerCase() === 'dfp') {\n    var dfpAdserverObj = adserver.dfpAdserver(options, urlComponents);\n    if(!dfpAdserverObj.verifyAdserverTag()) {\n      utils.logError('Invalid adserverTag, required google params are missing in query string');\n    }\n    dfpAdserverObj.appendQueryParams();\n    masterTag = formatURL(dfpAdserverObj.urlComponents);\n  } else {\n    utils.logError('Only DFP adserver is supported');\n    return;\n  }\n  return masterTag;\n};\n\n/**\n * Set the order bidders are called in. If not set, the bidders are called in\n * the order they are defined within the adUnit.bids array\n * @param {string} order - Order to call bidders in. Currently the only possible value\n * is 'random', which randomly shuffles the order\n */\npbjs.setBidderSequence = function (order) {\n  if (order === CONSTANTS.ORDER.RANDOM) {\n    adaptermanager.setBidderSequence(CONSTANTS.ORDER.RANDOM);\n  }\n};\n\n/**\n * Get array of highest cpm bids for all adUnits, or highest cpm bid\n * object for the given adUnit\n * @param {string} adUnitCode - optional ad unit code\n * @return {array} array containing highest cpm bid object(s)\n */\npbjs.getHighestCpmBids = function (adUnitCode) {\n  return targeting.getWinningBids(adUnitCode);\n};\n\npbjs.que.push(() => listenMessagesFromCreative());\nprocessQue();\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebid.js","// if pbjs already exists in global document scope, use it, if not, create the object\n// global defination should happen BEFORE imports to avoid global undefined errors.\nwindow.pbjs = (window.pbjs || {});\nwindow.pbjs.que = window.pbjs.que || [];\n\nexport function getGlobal() {\n  return window.pbjs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebidGlobal.js","var CONSTANTS = require('./constants.json');\n\nvar objectType_object = 'object';\nvar objectType_string = 'string';\nvar objectType_number = 'number';\n\nvar _loggingChecked = false;\n\nvar t_Arr = 'Array';\nvar t_Str = 'String';\nvar t_Fn = 'Function';\nvar t_Numb = 'Number';\nvar toString = Object.prototype.toString;\nlet infoLogger = null;\ntry {\n  infoLogger = console.info.bind(window.console);\n}\ncatch (e) {\n}\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexports.replaceTokenInString = function (str, map, token) {\n  this._each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n};\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\nfunction _getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n//generate a random string (to be used as a dynamic JSONP callback)\nexports.getUniqueIdentifierStr = _getUniqueIdentifierStr;\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexports.generateUUID = function generateUUID(placeholder) {\n  return placeholder ?\n    (placeholder ^ Math.random() * 16 >> placeholder/4).toString(16)\n    :\n    ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n};\n\nexports.getBidIdParameter = function (key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n};\n\nexports.tryAppendQueryString = function (existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n};\n\n//parse a query string object passed in bid params\n//bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexports.parseQueryStringParameters = function (queryObj) {\n  var result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k))\n      result += k + '=' + encodeURIComponent(queryObj[k]) + '&';\n  }\n\n  return result;\n};\n\n//transform an AdServer targeting bids into a query string to send to the adserver\nexports.transformAdServerTargetingObj = function (targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n};\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {array[array|number]} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {array[string]}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexports.parseSizesInput = function (sizeObj) {\n  var parsedSizes = [];\n\n  //if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === objectType_string) {\n    //multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    //regular expression to match strigns like 300x250\n    //start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === objectType_object) {\n    var sizeArrayLength = sizeObj.length;\n\n    //don't process empty array\n    if (sizeArrayLength > 0) {\n      //if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === objectType_number && typeof sizeObj[1] === objectType_number) {\n        parsedSizes.push(this.parseGPTSingleSizeArray(sizeObj));\n      } else {\n        //otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(this.parseGPTSingleSizeArray(sizeObj[i]));\n        }\n\n      }\n    }\n  }\n\n  return parsedSizes;\n\n};\n\n//parse a GPT style sigle size array, (i.e [300,250])\n//into an AppNexus style string, (i.e. 300x250)\nexports.parseGPTSingleSizeArray = function (singleSize) {\n  //if we aren't exactly 2 items in this array, it is invalid\n  if (this.isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]))) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n};\n\nexports.getTopWindowLocation = function () {\n  let location;\n  try {\n    location = window.top.location;\n  } catch (e) {\n    location = window.location;\n  }\n\n  return location;\n};\n\nexports.getTopWindowUrl = function () {\n  let href;\n  try {\n    href = this.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n\n  return href;\n};\n\nexports.logWarn = function (msg) {\n  if (debugTurnedOn() && console.warn) {\n    console.warn('WARNING: ' + msg);\n  }\n};\n\nexports.logInfo = function (msg, args) {\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    if (infoLogger) {\n      if (!args || args.length === 0) {\n        args = '';\n      }\n\n      infoLogger('INFO: ' + msg + ((args === '') ? '' : ' : params : '), args);\n    }\n  }\n};\n\nexports.logMessage = function (msg) {\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    console.log('MESSAGE: ' + msg);\n  }\n};\n\nfunction hasConsoleLogger() {\n  return (window.console && window.console.log);\n}\n\nexports.hasConsoleLogger = hasConsoleLogger;\n\nvar errLogFn = (function (hasLogger) {\n  if (!hasLogger) return '';\n  return window.console.error ? 'error' : 'log';\n}(hasConsoleLogger()));\n\nvar debugTurnedOn = function () {\n  if (pbjs.logging === false && _loggingChecked === false) {\n    pbjs.logging = getParameterByName(CONSTANTS.DEBUG_MODE).toUpperCase() === 'TRUE';\n    _loggingChecked = true;\n  }\n\n  return !!pbjs.logging;\n};\n\nexports.debugTurnedOn = debugTurnedOn;\n\nexports.logError = function (msg, code, exception) {\n  var errCode = code || 'ERROR';\n  if (debugTurnedOn() && hasConsoleLogger()) {\n    console[errLogFn](console, errCode + ': ' + msg, exception || '');\n  }\n};\n\nexports.createInvisibleIframe = function _createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = _getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n};\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nvar getParameterByName = function (name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};\n\n/**\n * This function validates paramaters.\n * @param  {object[string]} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {bool}                   Bool if paramaters are valid\n */\nexports.hasValidBidRequest = function (paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    this._each(paramObj, findParam);\n\n    if (!found) {\n      this.logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n};\n\n// Handle addEventListener gracefully in older browsers\nexports.addEventHandler = function (element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n};\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexports.isA = function (object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n};\n\nexports.isFn = function (object) {\n  return this.isA(object, t_Fn);\n};\n\nexports.isStr = function (object) {\n  return this.isA(object, t_Str);\n};\n\nexports.isArray = function (object) {\n  return this.isA(object, t_Arr);\n};\n\nexports.isNumber = function(object) {\n  return this.isA(object, t_Numb);\n};\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexports.isEmpty = function (object) {\n  if (!object) return true;\n  if (this.isArray(object) || this.isStr(object)) {\n    return !(object.length > 0); // jshint ignore:line\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n};\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexports.isEmptyStr = function(str) {\n  return this.isStr(str) && (!str || 0 === str.length);\n};\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexports._each = function (object, fn) {\n  if (this.isEmpty(object)) return;\n  if (this.isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n};\n\nexports.contains = function (a, obj) {\n  if (this.isEmpty(a)) {\n    return false;\n  }\n\n  if (this.isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nexports.indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  //return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexports._map = function (object, callback) {\n  if (this.isEmpty(object)) return [];\n  if (this.isFn(object.map)) return object.map(callback);\n  var output = [];\n  this._each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n};\n\nvar hasOwn = function (objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexports.createTrackPixelHtml = function (url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexports.createTrackPixelIframeHtml = function (url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<iframe frameborder=\"0\" allowtransparency=\"true\" marginheight=\"0\" marginwidth=\"0\" width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\" style=\"height:0p;width:0p;display:none;\" scrolling=\"no\" src=\"${encodeURI(url)}\"></iframe>`;\n};\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {object} iframe reference\n * @return {object}        iframe `document` reference\n */\nexports.getIframeDocument = function (iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  }\n  catch (e) {\n    this.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n};\n\nexports.getValueString = function(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (this.isStr(val) ) {\n    return val;\n  }\n  if (this.isNumber(val)) {\n    return val.toString();\n  }\n  this.logWarn('Unsuported type for param: ' + param + ' required type: String');\n};\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id) {\n  return pbjs._bidsRequested.map(bidSet => bidSet.bids.find(bid => bid.bidId === id)).find(bid => bid);\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\nexport function getBidderCodes(adUnits = pbjs.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && exports.isFn(window.googletag.pubads) && exports.isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\nexport function getHighestCpm(previous, current) {\n  if (previous.cpm === current.cpm) {\n    return previous.timeToRespond > current.timeToRespond ? current : previous;\n  }\n\n  return previous.cpm < current.cpm ? current : previous;\n}\n\n/**\n * Fisher–Yates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return filter.includes(bid && bid.placementCode || bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  //Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return doc.defaultView && doc.defaultView.frameElement &&\n    'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function cloneJson(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function inIframe() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","module.exports = {\n\t\"JSON_MAPPING\": {\n\t\t\"PL_CODE\": \"code\",\n\t\t\"PL_SIZE\": \"sizes\",\n\t\t\"PL_BIDS\": \"bids\",\n\t\t\"BD_BIDDER\": \"bidder\",\n\t\t\"BD_ID\": \"paramsd\",\n\t\t\"BD_PL_ID\": \"placementId\",\n\t\t\"ADSERVER_TARGETING\": \"adserverTargeting\",\n\t\t\"BD_SETTING_STANDARD\": \"standard\"\n\t},\n\t\"REPO_AND_VERSION\": \"prebid_prebid_0.22.2\",\n\t\"DEBUG_MODE\": \"pbjs_debug\",\n\t\"STATUS\": {\n\t\t\"GOOD\": 1,\n\t\t\"NO_BID\": 2\n\t},\n\t\"CB\": {\n\t\t\"TYPE\": {\n\t\t\t\"ALL_BIDS_BACK\": \"allRequestedBidsBack\",\n\t\t\t\"AD_UNIT_BIDS_BACK\": \"adUnitBidsBack\",\n\t\t\t\"BID_WON\": \"bidWon\",\n\t\t\t\"REQUEST_BIDS\": \"requestBids\"\n\t\t}\n\t},\n\t\"objectType_function\": \"function\",\n\t\"objectType_undefined\": \"undefined\",\n\t\"objectType_object\": \"object\",\n\t\"objectType_string\": \"string\",\n\t\"objectType_number\": \"number\",\n\t\"EVENTS\": {\n\t\t\"AUCTION_INIT\": \"auctionInit\",\n\t\t\"AUCTION_END\": \"auctionEnd\",\n\t\t\"BID_ADJUSTMENT\": \"bidAdjustment\",\n\t\t\"BID_TIMEOUT\": \"bidTimeout\",\n\t\t\"BID_REQUESTED\": \"bidRequested\",\n\t\t\"BID_RESPONSE\": \"bidResponse\",\n\t\t\"BID_WON\": \"bidWon\",\n\t\t\"SET_TARGETING\": \"setTargeting\",\n\t\t\"REQUEST_BIDS\": \"requestBids\"\n\t},\n\t\"EVENT_ID_PATHS\": {\n\t\t\"bidWon\": \"adUnitCode\"\n\t},\n\t\"ORDER\": {\n\t\t\"RANDOM\": \"random\"\n\t},\n\t\"GRANULARITY_OPTIONS\": {\n\t\t\"LOW\": \"low\",\n\t\t\"MEDIUM\": \"medium\",\n\t\t\"HIGH\": \"high\",\n\t\t\"AUTO\": \"auto\",\n\t\t\"DENSE\": \"dense\",\n\t\t\"CUSTOM\": \"custom\"\n\t},\n\t\"TARGETING_KEYS\": [\n\t\t\"hb_bidder\",\n\t\t\"hb_adid\",\n\t\t\"hb_pb\",\n\t\t\"hb_size\",\n\t\t\"hb_deal\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 3\n// module chunks = 0","import { videoAdapters } from './adaptermanager';\n\n/**\n * Helper functions for working with video-enabled adUnits\n */\nexport const videoAdUnit = adUnit => adUnit.mediaType === 'video';\nconst nonVideoBidder = bid => !videoAdapters.includes(bid.bidder);\nexport const hasNonVideoBidder = adUnit => adUnit.bids.filter(nonVideoBidder).length;\n\n\n\n// WEBPACK FOOTER //\n// ./src/video.js","/** @module adaptermanger */\n\nimport { flatten, getBidderCodes, shuffle } from './utils';\nimport { mapSizes } from './sizeMapping';\n\nvar utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\nvar events = require('./events');\nimport { BaseAdapter } from './adapters/baseAdapter';\n\nvar _bidderRegistry = {};\nexports.bidderRegistry = _bidderRegistry;\n\nvar _analyticsRegistry = {};\nlet _bidderSequence = null;\n\nfunction getBids({bidderCode, requestId, bidderRequestId, adUnits}) {\n  return adUnits.map(adUnit => {\n    return adUnit.bids.filter(bid => bid.bidder === bidderCode)\n      .map(bid => {\n        let sizes = adUnit.sizes;\n        if (adUnit.sizeMapping) {\n          let sizeMapping = mapSizes(adUnit);\n          if (sizeMapping === '') {\n            return '';\n          }\n          sizes = sizeMapping;\n        }\n        return Object.assign({}, bid, {\n          placementCode: adUnit.code,\n          mediaType: adUnit.mediaType,\n          transactionId : adUnit.transactionId,\n          sizes: sizes,\n          bidId: utils.getUniqueIdentifierStr(),\n          bidderRequestId,\n          requestId\n        });\n      }\n      );\n  }).reduce(flatten, []).filter(val => val !== '');\n}\n\nexports.callBids = ({adUnits, cbTimeout}) => {\n  const requestId = utils.generateUUID();\n  const auctionStart = Date.now();\n\n  const auctionInit = {\n    timestamp: auctionStart,\n    requestId,\n  };\n  events.emit(CONSTANTS.EVENTS.AUCTION_INIT, auctionInit);\n\n  let bidderCodes = getBidderCodes(adUnits);\n  if (_bidderSequence === CONSTANTS.ORDER.RANDOM) {\n    bidderCodes = shuffle(bidderCodes);\n  }\n\n  bidderCodes.forEach(bidderCode => {\n    const adapter = _bidderRegistry[bidderCode];\n    if (adapter) {\n      const bidderRequestId = utils.getUniqueIdentifierStr();\n      const bidderRequest = {\n        bidderCode,\n        requestId,\n        bidderRequestId,\n        bids: getBids({bidderCode, requestId, bidderRequestId, adUnits}),\n        start: new Date().getTime(),\n        auctionStart: auctionStart,\n        timeout: cbTimeout\n      };\n      if (bidderRequest.bids && bidderRequest.bids.length !== 0) {\n        utils.logMessage(`CALLING BIDDER ======= ${bidderCode}`);\n        pbjs._bidsRequested.push(bidderRequest);\n        events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidderRequest);\n        adapter.callBids(bidderRequest);\n      }\n    } else {\n      utils.logError(`Adapter trying to be called which does not exist: ${bidderCode} adaptermanager.callBids`);\n    }\n  });\n};\n\nexports.registerBidAdapter = function (bidAdaptor, bidderCode) {\n  if (bidAdaptor && bidderCode) {\n\n    if (typeof bidAdaptor.callBids === CONSTANTS.objectType_function) {\n      _bidderRegistry[bidderCode] = bidAdaptor;\n\n    } else {\n      utils.logError('Bidder adaptor error for bidder code: ' + bidderCode + 'bidder must implement a callBids() function');\n    }\n\n  } else {\n    utils.logError('bidAdaptor or bidderCode not specified');\n  }\n};\n\nexports.aliasBidAdapter = function (bidderCode, alias) {\n  var existingAlias = _bidderRegistry[alias];\n\n  if (typeof existingAlias === CONSTANTS.objectType_undefined) {\n    var bidAdaptor = _bidderRegistry[bidderCode];\n\n    if (typeof bidAdaptor === CONSTANTS.objectType_undefined) {\n      utils.logError('bidderCode \"' + bidderCode + '\" is not an existing bidder.', 'adaptermanager.aliasBidAdapter');\n    } else {\n      try {\n        let newAdapter = null;\n        if (bidAdaptor instanceof BaseAdapter) {\n          //newAdapter = new bidAdaptor.constructor(alias);\n          utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adaptermanager.aliasBidAdapter');\n        } else {\n          newAdapter = bidAdaptor.createNew();\n          newAdapter.setBidderCode(alias);\n          this.registerBidAdapter(newAdapter, alias);\n        }\n      } catch (e) {\n        utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adaptermanager.aliasBidAdapter');\n      }\n    }\n  } else {\n    utils.logMessage('alias name \"' + alias + '\" has been already specified.');\n  }\n};\n\nexports.registerAnalyticsAdapter = function ({adapter, code}) {\n  if (adapter && code) {\n\n    if (typeof adapter.enableAnalytics === CONSTANTS.objectType_function) {\n      adapter.code = code;\n      _analyticsRegistry[code] = adapter;\n    } else {\n      utils.logError(`Prebid Error: Analytics adaptor error for analytics \"${code}\"\n        analytics adapter must implement an enableAnalytics() function`);\n    }\n  } else {\n    utils.logError('Prebid Error: analyticsAdapter or analyticsCode not specified');\n  }\n};\n\nexports.enableAnalytics = function (config) {\n  if (!utils.isArray(config)) {\n    config = [config];\n  }\n\n  utils._each(config, adapterConfig => {\n    var adapter = _analyticsRegistry[adapterConfig.provider];\n    if (adapter) {\n      adapter.enableAnalytics(adapterConfig);\n    } else {\n      utils.logError(`Prebid Error: no analytics adapter found in registry for\n        ${adapterConfig.provider}.`);\n    }\n  });\n};\n\nexports.setBidderSequence = function (order) {\n  _bidderSequence = order;\n};\n\nvar AudienceNetworkAdapter = require('./adapters/audienceNetwork.js');\n    exports.registerBidAdapter(new AudienceNetworkAdapter(), 'audienceNetwork');\nexports.videoAdapters = [];\n\nnull\n\n\n\n// WEBPACK FOOTER //\n// ./src/adaptermanager.js","/**\n * @module sizeMapping\n */\nimport * as utils from './utils';\nlet _win;\n\nfunction mapSizes(adUnit) {\n  if(!isSizeMappingValid(adUnit.sizeMapping)){\n    return adUnit.sizes;\n  }\n  const width = getScreenWidth();\n  if(!width) {\n    //size not detected - get largest value set for desktop\n    const mapping = adUnit.sizeMapping.reduce((prev, curr) => {\n      return prev.minWidth < curr.minWidth ? curr : prev;\n    });\n    if(mapping.sizes) {\n      return mapping.sizes;\n    }\n    return adUnit.sizes;\n  }\n  let sizes = '';\n  const mapping = adUnit.sizeMapping.find(sizeMapping =>{\n    return width > sizeMapping.minWidth;\n  });\n  if(mapping && mapping.sizes){\n    sizes = mapping.sizes;\n    utils.logMessage(`AdUnit : ${adUnit.code} resized based on device width to : ${sizes}`);\n  }\n  else{\n    utils.logMessage(`AdUnit : ${adUnit.code} not mapped to any sizes for device width. This request will be suppressed.`);\n  }\n  return sizes;\n\n}\n\nfunction isSizeMappingValid(sizeMapping) {\n  if(utils.isArray(sizeMapping) && sizeMapping.length > 0){\n    return true;\n  }\n  utils.logInfo('No size mapping defined');\n  return false;\n}\n\nfunction getScreenWidth(win) {\n  var w = win || _win || window;\n  var d = w.document;\n\n  if (w.innerWidth) {\n    return w.innerWidth;\n  }\n  else if (d.body.clientWidth) {\n    return d.body.clientWidth;\n  }\n  else if (d.documentElement.clientWidth) {\n    return d.documentElement.clientWidth;\n  }\n  return 0;\n}\n\nfunction setWindow(win) {\n  _win = win;\n}\n\nexport { mapSizes, getScreenWidth, setWindow };\n\n\n\n// WEBPACK FOOTER //\n// ./src/sizeMapping.js","export class BaseAdapter {\n  constructor(code) {\n    this.code = code;\n  }\n\n  getCode() {\n    return this.code;\n  }\n\n  setCode(code) {\n    this.code = code;\n  }\n\n  callBids() {\n    throw 'adapter implementation must override callBids method';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/baseAdapter.js","/**\n * events.js\n */\nvar utils = require('./utils');\nvar CONSTANTS = require('./constants');\nvar slice = Array.prototype.slice;\nvar push = Array.prototype.push;\n\n//define entire events\n//var allEvents = ['bidRequested','bidResponse','bidWon','bidTimeout'];\nvar allEvents = utils._map(CONSTANTS.EVENTS, function (v) {\n  return v;\n});\n\nvar idPaths = CONSTANTS.EVENT_ID_PATHS;\n\n//keep a record of all events fired\nvar eventsFired = [];\n\nmodule.exports = (function () {\n\n  var _handlers = {};\n  var _public = {};\n\n  /**\n   *\n   * @param {String} eventString  The name of the event.\n   * @param {Array} args  The payload emitted with the event.\n   * @private\n   */\n  function _dispatch(eventString, args) {\n    utils.logMessage('Emitting event for: ' + eventString);\n\n    var eventPayload = args[0] || {};\n    var idPath = idPaths[eventString];\n    var key = eventPayload[idPath];\n    var event = _handlers[eventString] || { que: [] };\n    var eventKeys = utils._map(event, function (v, k) {\n      return k;\n    });\n\n    var callbacks = [];\n\n    //record the event:\n    eventsFired.push({\n      eventType: eventString,\n      args: eventPayload,\n      id: key\n    });\n\n    /** Push each specific callback to the `callbacks` array.\n     * If the `event` map has a key that matches the value of the\n     * event payload id path, e.g. `eventPayload[idPath]`, then apply\n     * each function in the `que` array as an argument to push to the\n     * `callbacks` array\n     * */\n    if (key && utils.contains(eventKeys, key)) {\n      push.apply(callbacks, event[key].que);\n    }\n\n    /** Push each general callback to the `callbacks` array. */\n    push.apply(callbacks, event.que);\n\n    /** call each of the callbacks */\n    utils._each(callbacks, function (fn) {\n      if (!fn) return;\n      try {\n        fn.apply(null, args);\n      }\n      catch (e) {\n        utils.logError('Error executing handler:', 'events.js', e);\n      }\n    });\n  }\n\n  function _checkAvailableEvent(event) {\n    return utils.contains(allEvents, event);\n  }\n\n  _public.on = function (eventString, handler, id) {\n\n    //check whether available event or not\n    if (_checkAvailableEvent(eventString)) {\n      var event = _handlers[eventString] || { que: [] };\n\n      if (id) {\n        event[id] = event[id] || { que: [] };\n        event[id].que.push(handler);\n      } else {\n        event.que.push(handler);\n      }\n\n      _handlers[eventString] = event;\n    } else {\n      utils.logError('Wrong event name : ' + eventString + ' Valid event names :' + allEvents);\n    }\n  };\n\n  _public.emit = function (event) {\n    var args = slice.call(arguments, 1);\n    _dispatch(event, args);\n  };\n\n  _public.off = function (eventString, handler, id) {\n    var event = _handlers[eventString];\n\n    if (utils.isEmpty(event) || utils.isEmpty(event.que) && utils.isEmpty(event[id])) {\n      return;\n    }\n\n    if (id && (utils.isEmpty(event[id]) || utils.isEmpty(event[id].que))) {\n      return;\n    }\n\n    if (id) {\n      utils._each(event[id].que, function (_handler) {\n        var que = event[id].que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    } else {\n      utils._each(event.que, function (_handler) {\n        var que = event.que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    }\n\n    _handlers[eventString] = event;\n  };\n\n  _public.get = function () {\n    return _handlers;\n  };\n\n  /**\n   * This method can return a copy of all the events fired\n   * @return {Array} array of events fired\n   */\n  _public.getEvents = function () {\n    var arrayCopy = [];\n    utils._each(eventsFired, function (value) {\n      var newProp = Object.assign({}, value);\n      arrayCopy.push(newProp);\n    });\n\n    return arrayCopy;\n  };\n\n  return _public;\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","/**\n * @file AudienceNetwork adapter.\n */\nimport { ajax } from '../ajax';\nimport { createBid } from '../bidfactory';\nimport { addBidResponse } from '../bidmanager';\nimport { STATUS } from '../constants.json';\nimport { format } from '../url';\nimport { logError } from '../utils';\nimport { createNew } from './adapter';\n\nconst baseAdapter = createNew('audienceNetwork');\nconst setBidderCode = baseAdapter.setBidderCode;\nconst getBidderCode = baseAdapter.getBidderCode;\n\n/**\n * Does this bid request contain valid parameters?\n * @param {Object} bid\n * @returns {Boolean}\n */\nconst validateBidRequest = bid =>\n  typeof bid.params === 'object' &&\n  typeof bid.params.placementId === 'string' &&\n  bid.params.placementId.length > 0 &&\n  Array.isArray(bid.sizes) && bid.sizes.length > 0;\n\n/**\n * Does this bid request contain valid sizes?\n * @param {Object} bid\n * @returns {Boolean}\n */\nconst validateBidRequestSizes = bid => {\n  bid.sizes = bid.sizes.map(flattenSize);\n  return bid.sizes.every( size =>\n    ['native', 'fullwidth', '300x250', '320x50'].includes(size) );\n};\n\n/**\n * Flattens a 2-element [W, H] array as a 'WxH' string,\n * otherwise passes value through.\n * @params {Array|String} size\n * @returns {String}\n */\nconst flattenSize = size =>\n  (Array.isArray(size) && size.length === 2) ? `${size[0]}x${size[1]}` : size;\n\n/**\n * Does the search part of the URL contain \"anhb_testmode\"\n * and therefore indicate testmode should be used?\n * @returns {String} \"true\" or \"false\"\n */\nconst isTestmode = () => Boolean(\n  window && window.location &&\n  typeof window.location.search === 'string' &&\n  window.location.search.indexOf('anhb_testmode') !== -1\n).toString();\n\n/**\n * Parse JSON-as-string into an Object, default to empty.\n * @param {String} JSON-as-string\n * @returns {Object}\n */\nconst parseJson = jsonAsString => {\n  let data = {};\n  try {\n    data = JSON.parse(jsonAsString);\n  } catch (err) {}\n  return data;\n};\n\n/**\n * Is this a native advert size?\n * @param {String} size\n * @returns {Boolean}\n */\nconst isNative = (size) => ['native', 'fullwidth'].includes(size);\n\n/**\n * Generate ad HTML for injection into an iframe\n * @param {String} placementId\n * @param {String} size\n * @param {String} bidId\n * @returns {String} HTML\n */\nconst createAdHtml = (placementId, size, bidId) => {\n  const nativeStyle = isNative(size) ? '<script>window.onload=function(){if(parent){var o=document.getElementsByTagName(\"head\")[0];var s=parent.document.getElementsByTagName(\"style\");for(var i=0;i<s.length;i++)o.appendChild(s[i].cloneNode(true));}}</script>' : '';\n  const nativeContainer = isNative(size) ? '<div class=\"thirdPartyRoot\"><a class=\"fbAdLink\"><div class=\"fbAdMedia thirdPartyMediaClass\"></div><div class=\"fbAdSubtitle thirdPartySubtitleClass\"></div><div class=\"fbDefaultNativeAdWrapper\"><div class=\"fbAdCallToAction thirdPartyCallToActionClass\"></div><div class=\"fbAdTitle thirdPartyTitleClass\"></div></div></a></div>' : '';\n  return `<html><head>${nativeStyle}</head><body><div style=\"display:none;position:relative;\">\n<script type='text/javascript'>var data = {placementid:'${placementId}',format:'${size}',bidid:'${bidId}',onAdLoaded:function(e){console.log('Audience Network [${placementId}] ad loaded');e.style.display = 'block';},onAdError:function(c,m){console.log('Audience Network [${placementId}] error (' + c + ') ' + m);}};\n(function(a,b,c){var d='https://www.facebook.com',e='https://connect.facebook.net/en_US/fbadnw55.js',f={iframeLoaded:true,xhrLoaded:true},g=a.data,h=function(){if(Date.now){return Date.now();}else return +new Date();},i=function(aa){var ba=d+'/audience_network/client_event',ca={cb:h(),event_name:'ADNW_ADERROR',ad_pivot_type:'audience_network_mobile_web',sdk_version:'5.5.web',app_id:g.placementid.split('_')[0],publisher_id:g.placementid.split('_')[1],error_message:aa},da=[];for(var ea in ca)da.push(encodeURIComponent(ea)+'='+encodeURIComponent(ca[ea]));var fa=ba+'?'+da.join('&'),ga=new XMLHttpRequest();ga.open('GET',fa,true);ga.send();if(g.onAdError)g.onAdError('1000','Internal error.');},j=function(){if(b.currentScript){return b.currentScript;}else{var aa=b.getElementsByTagName('script');return aa[aa.length-1];}},k=function(aa){try{return aa.document.referrer;}catch(ba){}return '';},l=function(){var aa=a,ba=[aa];try{while(aa!==aa.parent&&aa.parent.document)ba.push(aa=aa.parent);}catch(ca){}return ba.reverse();},m=function(){var aa=l();for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=ca.ADNW||{};ca.ADNW=da;if(!ca.ADNW)continue;return da.v55=da.v55||{ads:[],window:ca};}throw new Error('no_writable_global');},n=function(aa){var ba=aa.indexOf('/',aa.indexOf('://')+3);if(ba===-1)return aa;return aa.substring(0,ba);},o=function(aa){return aa.location.href||k(aa);},p=function(aa){if(aa.sdkLoaded)return;var ba=aa.window.document,ca=ba.createElement('iframe');ca.name='fbadnw';ca.style.display='none';ba.body.appendChild(ca);var da=ca.contentDocument.createElement('script');da.src=e;da.async=true;ca.contentDocument.body.appendChild(da);aa.sdkLoaded=true;},q=function(aa){var ba=/^https?:\\\\/\\\\/www\\\\.google(\\\\.com?)?.\\\\w{2,3}$/;return !!aa.match(ba);},r=function(aa){return !!aa.match(/cdn\\.ampproject\\.org$/);},s=function(){var aa=c.ancestorOrigins||[],ba=aa[aa.length-1]||c.origin,ca=aa[aa.length-2]||c.origin;if(q(ba)&&r(ca)){return n(ca);}else return n(ba);},t=function(aa){try{return JSON.parse(aa);}catch(ba){i(ba.message);throw ba;}},u=function(aa,ba,ca){if(!aa.iframe){var da=ca.createElement('iframe');da.src=d+'/audiencenetwork/iframe/';da.style.display='none';ca.body.appendChild(da);aa.iframe=da;aa.iframeAppendedTime=h();aa.iframeData={};}ba.iframe=aa.iframe;ba.iframeData=aa.iframeData;ba.tagJsIframeAppendedTime=aa.iframeAppendedTime||0;},v=function(aa){var ba=d+'/audiencenetwork/xhr/?sdk=5.5.web';for(var ca in aa)if(typeof aa[ca]!=='function')ba+='&'+ca+'='+encodeURIComponent(aa[ca]);var da=new XMLHttpRequest();da.open('GET',ba,true);da.withCredentials=true;da.onreadystatechange=function(){if(da.readyState===4){var ea=t(da.response);aa.events.push({name:'xhrLoaded',source:aa.iframe.contentWindow,data:ea,postMessageTimestamp:h(),receivedTimestamp:h()});}};da.send();},w=function(aa,ba){var ca=d+'/audiencenetwork/xhriframe/?sdk=5.5.web';for(var da in ba)if(typeof ba[da]!=='function')ca+='&'+da+'='+encodeURIComponent(ba[da]);var ea=b.createElement('iframe');ea.src=ca;ea.style.display='none';b.body.appendChild(ea);ba.iframe=ea;ba.iframeData={};ba.tagJsIframeAppendedTime=h();},x=function(aa){var ba=function(event){try{var da=event.data;if(da.name in f)aa.events.push({name:da.name,source:event.source,data:da.data});}catch(ea){}},ca=aa.iframe.contentWindow.parent;ca.addEventListener('message',ba,false);},y=function(aa){if(aa.context&&aa.context.sourceUrl)return true;try{return !!JSON.parse(decodeURI(aa.name)).ampcontextVersion;}catch(ba){return false;}},z=function(aa){var ba=h(),ca=l()[0],da=j().parentElement,ea=ca!=a.top,fa=ca.$sf&&ca.$sf.ext,ga=o(ca),ha=m();p(ha);var ia={amp:y(ca),events:[],tagJsInitTime:ba,rootElement:da,iframe:null,tagJsIframeAppendedTime:ha.iframeAppendedTime||0,url:ga,domain:s(),channel:n(o(ca)),width:screen.width,height:screen.height,pixelratio:a.devicePixelRatio,placementindex:ha.ads.length,crossdomain:ea,safeframe:!!fa,placementid:g.placementid,format:g.format||'300x250',testmode:!!g.testmode,onAdLoaded:g.onAdLoaded,onAdError:g.onAdError};if(g.bidid)ia.bidid=g.bidid;if(ea){w(ha,ia);}else{u(ha,ia,ca.document);v(ia);}x(ia);ia.rootElement.dataset.placementid=ia.placementid;ha.ads.push(ia);};try{z();}catch(aa){i(aa.message||aa);throw aa;}})(window,document,location);\n</script>\n${nativeContainer}</div></body></html>`;\n };\n\n/**\n * Creates a \"good\" Bid object with the given bid ID and CPM.\n * @param {String} placementId\n * @param {String} bidId\n * @param {String} size\n * @param {Number} cpmCents\n * @returns {Object} Bid\n */\nconst createSuccessBidResponse = (placementId, size, bidId, cpmCents) => {\n  const bid = createBid(STATUS.GOOD, { bidId });\n  // Prebid attributes\n  bid.bidderCode = getBidderCode();\n  bid.cpm = cpmCents / 100;\n  bid.ad = createAdHtml(placementId, size, bidId);\n  if (!isNative(size)) {\n    [bid.width, bid.height] = size.split('x').map(Number);\n  }\n  // Audience Network attributes\n  bid.hb_bidder = 'fan';\n  bid.fb_bidid = bidId;\n  bid.fb_format = size;\n  bid.fb_placementid = placementId;\n  return bid;\n};\n\n/**\n * Creates a \"no bid\" Bid object.\n * @returns {Object} Bid\n */\nconst createFailureBidResponse = () => {\n  const bid = createBid(STATUS.NO_BID);\n  bid.bidderCode = getBidderCode();\n  return bid;\n};\n\n/**\n * Fetch bids for given parameters.\n * @param {Object} bidRequest\n * @param {Array} params.bids - list of bids\n * @param {String} params.bids[].placementCode - Prebid placement identifier\n * @param {Object} params.bids[].params\n * @param {String} params.bids[].params.placementId - Audience Network placement identifier\n * @param {Array} params.bids[].sizes - list of accepted advert sizes\n * @param {Array|String} params.bids[].sizes[] - one of 'native', '300x250', '300x50', [300, 250], [300, 50]\n * @returns {void}\n */\nconst callBids = bidRequest => {\n  // Build lists of adUnitCodes, placementids and adformats\n  const adUnitCodes = [];\n  const placementids = [];\n  const adformats = [];\n  bidRequest.bids\n    .filter(validateBidRequest)\n    .filter(validateBidRequestSizes)\n    .forEach( bid => bid.sizes.forEach( size => {\n      adUnitCodes.push(bid.placementCode);\n      placementids.push(bid.params.placementId);\n      adformats.push(size);\n    }));\n\n  if (placementids.length) {\n    // Build URL\n    const testmode = isTestmode();\n    const url = format({\n      protocol: 'https',\n      host: 'an.facebook.com',\n      pathname: '/v2/placementbid.json',\n      search: {\n        sdk: '5.5.web',\n        testmode,\n        placementids,\n        adformats\n      }\n    });\n    // Request\n    ajax(url, res => {\n      // Handle response\n      const data = parseJson(res);\n      if (data.errors && data.errors.length) {\n        const noBid = createFailureBidResponse();\n        adUnitCodes.forEach( adUnitCode => addBidResponse(adUnitCode, noBid) );\n        data.errors.forEach(logError);\n      } else {\n        // For each placementId in bids Object\n        Object.keys(data.bids)\n          // extract Array of bid responses\n          .map( placementId => data.bids[placementId] )\n          // flatten\n          .reduce( (a, b) => a.concat(b), [] )\n          // call addBidResponse\n          .forEach( (bid, i) =>\n            addBidResponse(adUnitCodes[i], createSuccessBidResponse(\n              bid.placement_id, adformats[i], bid.bid_id, bid.bid_price_cents\n            ))\n          );\n      }\n    }, null, { withCredentials: true });\n  } else {\n    // No valid bids\n    logError('No valid bids requested');\n  }\n};\n\n/**\n * @class AudienceNetwork\n * @type {Object}\n * @property {Function} callBids - fetch bids for given parameters\n * @property {Function} setBidderCode - used for bidder aliasing\n * @property {Function} getBidderCode - unique 'audienceNetwork' identifier\n */\nconst AudienceNetwork = () => {\n  return { callBids, setBidderCode, getBidderCode };\n};\nmodule.exports = AudienceNetwork;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/audienceNetwork.js","import {parse as parseURL, format as formatURL} from './url';\n\nvar utils = require('./utils');\n\nconst XHR_DONE = 4;\n\n/**\n * Simple IE9+ and cross-browser ajax request function\n * Note: x-domain requests in IE9 do not support the use of cookies\n *\n * @param url string url\n * @param callback {object | function} callback\n * @param data mixed data\n * @param options object\n */\n\nexport function ajax(url, callback, data, options = {}) {\n  try {\n    let x;\n    let useXDomainRequest = false;\n    let method = options.method || (data ? 'POST' : 'GET');\n\n    let callbacks = typeof callback === \"object\" ? callback : {\n      success: function() {\n        utils.logMessage('xhr success');\n      },\n      error: function(e) {\n        utils.logError('xhr error', null, e);\n      }\n    };\n\n    if(typeof callback === \"function\") {\n      callbacks.success = callback;\n    }\n\n    if (!window.XMLHttpRequest) {\n      useXDomainRequest = true;\n    } else{\n      x = new window.XMLHttpRequest();\n      if (x.responseType === undefined) {\n        useXDomainRequest = true;\n      }\n    }\n\n    if (useXDomainRequest) {\n      x = new window.XDomainRequest();\n      x.onload = function () {\n        callbacks.success(x.responseText, x);\n      };\n\n      // http://stackoverflow.com/questions/15786966/xdomainrequest-aborts-post-on-ie-9\n      x.onerror = function () {\n        callbacks.error(\"error\", x);\n      };\n      x.ontimeout = function () {\n        callbacks.error(\"timeout\", x);\n      };\n      x.onprogress = function() {\n        utils.logMessage('xhr onprogress');\n      };\n    } else {\n      x.onreadystatechange = function () {\n        if (x.readyState === XHR_DONE) {\n          let status = x.status;\n          if(status >= 200 && status < 300 || status === 304) {\n            callbacks.success(x.responseText, x);\n          } else {\n            callbacks.error(x.statusText, x);\n          }\n        }\n      };\n    }\n\n    if (method === 'GET' && data) {\n      let urlInfo = parseURL(url);\n      Object.assign(urlInfo.search, data);\n      url = formatURL(urlInfo);\n    }\n\n    x.open(method, url);\n\n    if (!useXDomainRequest) {\n      if (options.withCredentials) {\n        x.withCredentials = true;\n      }\n      if (options.preflight) {\n        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n      x.setRequestHeader('Content-Type', options.contentType || 'text/plain');\n    }\n    x.send(method === 'POST' && data);\n  } catch (error) {\n    utils.logError('xhr construction', error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","export function parseQS(query) {\n  return !query ? {} : query\n    .replace(/^\\?/, '')\n    .split('&')\n    .reduce((acc, criteria) => {\n      let [k, v] = criteria.split('=');\n      if (/\\[\\]$/.test(k)) {\n        k = k.replace('[]', '');\n        acc[k] = acc[k] || [];\n        acc[k].push(v);\n      } else {\n        acc[k] = v || '';\n      }\n      return acc;\n    }, {});\n}\n\nexport function formatQS(query) {\n  return Object\n    .keys(query)\n    .map(k => Array.isArray(query[k]) ?\n      query[k].map(v => `${k}[]=${v}`).join('&') :\n      `${k}=${query[k]}`)\n    .join('&');\n}\n\nexport function parse(url) {\n  let parsed = document.createElement('a');\n  parsed.href = decodeURIComponent(url);\n  return {\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/,'/'),\n    search: parseQS(parsed.search || ''),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: parsed.host\n  };\n}\n\nexport function format(obj) {\n  return (obj.protocol || 'http') + '://' +\n         (obj.host ||\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\n         (obj.pathname || '') +\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\n         (obj.hash ? `#${obj.hash}` : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","var utils = require('./utils.js');\n\n/**\n Required paramaters\n bidderCode,\n height,\n width,\n statusCode\n Optional paramaters\n adId,\n cpm,\n ad,\n adUrl,\n dealId,\n priceKeyString;\n */\nfunction Bid(statusCode, bidRequest) {\n  var _bidId = bidRequest && bidRequest.bidId || utils.getUniqueIdentifierStr();\n  var _statusCode = statusCode || 0;\n\n  this.bidderCode = '';\n  this.width = 0;\n  this.height = 0;\n  this.statusMessage = _getStatus();\n  this.adId = _bidId;\n\n  function _getStatus() {\n    switch (_statusCode) {\n      case 0:\n        return 'Pending';\n      case 1:\n        return 'Bid available';\n      case 2:\n        return 'Bid returned empty or error response';\n      case 3:\n        return 'Bid timed out';\n    }\n  }\n\n  this.getStatusCode = function () {\n    return _statusCode;\n  };\n\n  //returns the size of the bid creative. Concatenation of width and height by ‘x’.\n  this.getSize = function () {\n    return this.width + 'x' + this.height;\n  };\n\n}\n\n// Bid factory function.\nexports.createBid = function () {\n  return new Bid(...arguments);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidfactory.js","import {uniques, flatten, adUnitsFilter} from './utils';\nimport {getPriceBucketString} from './cpmBucketManager';\n\nvar CONSTANTS = require('./constants.json');\nvar AUCTION_END = CONSTANTS.EVENTS.AUCTION_END;\nvar utils = require('./utils.js');\nvar events = require('./events');\n\nvar objectType_function = 'function';\n\nvar externalCallbacks = {byAdUnit: [], all: [], oneTime: null, timer: false};\nvar _granularity = CONSTANTS.GRANULARITY_OPTIONS.MEDIUM;\nlet _customPriceBucket;\nvar defaultBidderSettingsMap = {};\n\nexports.setCustomPriceBucket = function(customConfig) {\n  _customPriceBucket = customConfig;\n};\n\n/**\n * Returns a list of bidders that we haven't received a response yet\n * @return {array} [description]\n */\nexports.getTimedOutBidders = function () {\n  return pbjs._bidsRequested\n    .map(getBidderCode)\n    .filter(uniques)\n    .filter(bidder => pbjs._bidsReceived\n      .map(getBidders)\n      .filter(uniques)\n      .indexOf(bidder) < 0);\n};\n\nfunction timestamp() { return new Date().getTime(); }\n\nfunction getBidderCode(bidSet) {\n  return bidSet.bidderCode;\n}\n\nfunction getBidders(bid) {\n  return bid.bidder;\n}\n\nfunction bidsBackAdUnit(adUnitCode) {\n  const requested = pbjs._bidsRequested\n    .map(request => request.bids\n      .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes))\n      .filter(bid => bid.placementCode === adUnitCode))\n    .reduce(flatten, [])\n    .map(bid => {\n      return bid.bidder === 'indexExchange' ?\n          bid.sizes.length :\n          1;\n    }).reduce(add, 0);\n\n  const received = pbjs._bidsReceived.filter(bid => bid.adUnitCode === adUnitCode).length;\n  return requested === received;\n}\n\nfunction add(a, b) {\n  return a + b;\n}\n\nfunction bidsBackAll() {\n  const requested = pbjs._bidsRequested\n    .map(request => request.bids)\n    .reduce(flatten, [])\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes))\n    .map(bid => {\n      return bid.bidder === 'indexExchange' ?\n        bid.sizes.length :\n        1;\n    }).reduce((a, b) => a + b, 0);\n\n  const received = pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, pbjs._adUnitCodes)).length;\n\n  return requested === received;\n}\n\nexports.bidsBackAll = function () {\n  return bidsBackAll();\n};\n\nfunction getBidderRequest(bidder, adUnitCode) {\n  return pbjs._bidsRequested.find(request => {\n    return request.bids\n        .filter(bid => bid.bidder === bidder && bid.placementCode === adUnitCode).length > 0;\n  }) || { start: null, requestId: null };\n}\n\n/*\n *   This function should be called to by the bidder adapter to register a bid response\n */\nexports.addBidResponse = function (adUnitCode, bid) {\n  if (!adUnitCode) {\n    utils.logWarn('No adUnitCode supplied to addBidResponse, response discarded');\n    return;\n  }\n\n  if (bid) {\n\n    const { requestId, start } = getBidderRequest(bid.bidderCode, adUnitCode);\n    Object.assign(bid, {\n      requestId: requestId,\n      responseTimestamp: timestamp(),\n      requestTimestamp: start,\n      cpm: bid.cpm || 0,\n      bidder: bid.bidderCode,\n      adUnitCode\n    });\n\n    bid.timeToRespond = bid.responseTimestamp - bid.requestTimestamp;\n\n    if (bid.timeToRespond > pbjs.cbTimeout + pbjs.timeoutBuffer) {\n      const timedOut = true;\n\n      exports.executeCallback(timedOut);\n    }\n\n    //emit the bidAdjustment event before bidResponse, so bid response has the adjusted bid value\n    events.emit(CONSTANTS.EVENTS.BID_ADJUSTMENT, bid);\n\n    //emit the bidResponse event\n    events.emit(CONSTANTS.EVENTS.BID_RESPONSE, bid);\n\n    //append price strings\n    const priceStringsObj = getPriceBucketString(bid.cpm, _customPriceBucket);\n    bid.pbLg = priceStringsObj.low;\n    bid.pbMg = priceStringsObj.med;\n    bid.pbHg = priceStringsObj.high;\n    bid.pbAg = priceStringsObj.auto;\n    bid.pbDg = priceStringsObj.dense;\n    bid.pbCg = priceStringsObj.custom;\n\n    //if there is any key value pairs to map do here\n    var keyValues = {};\n    if (bid.bidderCode && (bid.cpm > 0 || bid.dealId ) ) {\n      keyValues = getKeyValueTargetingPairs(bid.bidderCode, bid);\n    }\n\n    bid.adserverTargeting = keyValues;\n    pbjs._bidsReceived.push(bid);\n  }\n\n  if (bid && bid.adUnitCode && bidsBackAdUnit(bid.adUnitCode)) {\n    triggerAdUnitCallbacks(bid.adUnitCode);\n  }\n\n  if (bidsBackAll()) {\n    exports.executeCallback();\n  }\n};\n\nfunction getKeyValueTargetingPairs(bidderCode, custBidObj) {\n  var keyValues = {};\n  var bidder_settings = pbjs.bidderSettings;\n\n  //1) set the keys from \"standard\" setting or from prebid defaults\n  if (custBidObj && bidder_settings) {\n    //initialize default if not set\n    const standardSettings = getStandardBidderSettings();\n    setKeys(keyValues, standardSettings, custBidObj);\n  }\n\n  //2) set keys from specific bidder setting override if they exist\n  if (bidderCode && custBidObj && bidder_settings && bidder_settings[bidderCode] && bidder_settings[bidderCode][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n    setKeys(keyValues, bidder_settings[bidderCode], custBidObj);\n    custBidObj.alwaysUseBid = bidder_settings[bidderCode].alwaysUseBid;\n    custBidObj.sendStandardTargeting = bidder_settings[bidderCode].sendStandardTargeting;\n  }\n\n  //2) set keys from standard setting. NOTE: this API doesn't seem to be in use by any Adapter\n  else if (defaultBidderSettingsMap[bidderCode]) {\n    setKeys(keyValues, defaultBidderSettingsMap[bidderCode], custBidObj);\n    custBidObj.alwaysUseBid = defaultBidderSettingsMap[bidderCode].alwaysUseBid;\n    custBidObj.sendStandardTargeting = defaultBidderSettingsMap[bidderCode].sendStandardTargeting;\n  }\n\n  return keyValues;\n}\n\nexports.getKeyValueTargetingPairs = function() {\n  return getKeyValueTargetingPairs(...arguments);\n};\n\nfunction setKeys(keyValues, bidderSettings, custBidObj) {\n  var targeting = bidderSettings[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  custBidObj.size = custBidObj.getSize();\n\n  utils._each(targeting, function (kvPair) {\n    var key = kvPair.key;\n    var value = kvPair.val;\n\n    if (keyValues[key]) {\n      utils.logWarn('The key: ' + key + ' is getting ovewritten');\n    }\n\n    if (utils.isFn(value)) {\n      try {\n        value = value(custBidObj);\n      } catch (e) {\n        utils.logError('bidmanager', 'ERROR', e);\n      }\n    }\n\n    if (\n      (typeof bidderSettings.suppressEmptyKeys !== \"undefined\" && bidderSettings.suppressEmptyKeys === true ||\n      key === \"hb_deal\") && // hb_deal is suppressed automatically if not set\n      (\n        utils.isEmptyStr(value) ||\n        value === null ||\n        value === undefined\n      )\n    ) {\n      utils.logInfo(\"suppressing empty key '\" + key + \"' from adserver targeting\");\n    } else {\n      keyValues[key] = value;\n    }\n\n  });\n\n  return keyValues;\n}\n\nexports.setPriceGranularity = function setPriceGranularity(granularity) {\n  var granularityOptions = CONSTANTS.GRANULARITY_OPTIONS;\n  if (Object.keys(granularityOptions).filter(option => granularity === granularityOptions[option])) {\n    _granularity = granularity;\n  } else {\n    utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using' +\n      ' `medium` as default.');\n    _granularity = CONSTANTS.GRANULARITY_OPTIONS.MEDIUM;\n  }\n};\n\nexports.registerDefaultBidderSetting = function (bidderCode, defaultSetting) {\n  defaultBidderSettingsMap[bidderCode] = defaultSetting;\n};\n\nexports.executeCallback = function (timedOut) {\n  // if there's still a timeout running, clear it now\n  if (!timedOut && externalCallbacks.timer) {\n    clearTimeout(externalCallbacks.timer);\n  }\n\n  if (externalCallbacks.all.called !== true) {\n    processCallbacks(externalCallbacks.all);\n    externalCallbacks.all.called = true;\n\n    if (timedOut) {\n      const timedOutBidders = exports.getTimedOutBidders();\n\n      if (timedOutBidders.length) {\n        events.emit(CONSTANTS.EVENTS.BID_TIMEOUT, timedOutBidders);\n      }\n    }\n  }\n\n  //execute one time callback\n  if (externalCallbacks.oneTime) {\n    events.emit(AUCTION_END);\n    try {\n      processCallbacks([externalCallbacks.oneTime]);\n    }\n    catch(e){\n      utils.logError('Error executing bidsBackHandler', null, e);\n    }\n    finally {\n      externalCallbacks.oneTime = null;\n      externalCallbacks.timer = false;\n      pbjs.clearAuction();\n    }\n  }\n};\n\nexports.externalCallbackReset = function () {\n  externalCallbacks.all.called = false;\n};\n\nfunction triggerAdUnitCallbacks(adUnitCode) {\n  //todo : get bid responses and send in args\n  var singleAdUnitCode = [adUnitCode];\n  processCallbacks(externalCallbacks.byAdUnit, singleAdUnitCode);\n}\n\nfunction processCallbacks(callbackQueue, singleAdUnitCode) {\n  if (utils.isArray(callbackQueue)) {\n    callbackQueue.forEach(callback => {\n      const adUnitCodes = singleAdUnitCode || pbjs._adUnitCodes;\n      const bids = [pbjs._bidsReceived\n                      .filter(adUnitsFilter.bind(this, adUnitCodes))\n                      .reduce(groupByPlacement, {})];\n\n      callback.apply(pbjs, bids);\n    });\n  }\n}\n\n/**\n * groupByPlacement is a reduce function that converts an array of Bid objects\n * to an object with placement codes as keys, with each key representing an object\n * with an array of `Bid` objects for that placement\n * @returns {*} as { [adUnitCode]: { bids: [Bid, Bid, Bid] } }\n */\nfunction groupByPlacement(bidsByPlacement, bid) {\n  if (!bidsByPlacement[bid.adUnitCode])\n    bidsByPlacement[bid.adUnitCode] = { bids: [] };\n\n  bidsByPlacement[bid.adUnitCode].bids.push(bid);\n\n  return bidsByPlacement;\n}\n\n/**\n * Add a one time callback, that is discarded after it is called\n * @param {Function} callback\n * @param timer Timer to clear if callback is triggered before timer time's out\n */\nexports.addOneTimeCallback = function (callback, timer) {\n  externalCallbacks.oneTime = callback;\n  externalCallbacks.timer = timer;\n};\n\nexports.addCallback = function (id, callback, cbEvent) {\n  callback.id = id;\n  if (CONSTANTS.CB.TYPE.ALL_BIDS_BACK === cbEvent) {\n    externalCallbacks.all.push(callback);\n  } else if (CONSTANTS.CB.TYPE.AD_UNIT_BIDS_BACK === cbEvent) {\n    externalCallbacks.byAdUnit.push(callback);\n  }\n};\n\n//register event for bid adjustment\nevents.on(CONSTANTS.EVENTS.BID_ADJUSTMENT, function (bid) {\n  adjustBids(bid);\n});\n\nfunction adjustBids(bid) {\n  var code = bid.bidderCode;\n  var bidPriceAdjusted = bid.cpm;\n  if (code && pbjs.bidderSettings && pbjs.bidderSettings[code]) {\n    if (typeof pbjs.bidderSettings[code].bidCpmAdjustment === objectType_function) {\n      try {\n        bidPriceAdjusted = pbjs.bidderSettings[code].bidCpmAdjustment.call(null, bid.cpm, Object.assign({}, bid));\n      }\n      catch (e) {\n        utils.logError('Error during bid adjustment', 'bidmanager.js', e);\n      }\n    }\n  }\n\n  if (bidPriceAdjusted >= 0) {\n    bid.cpm = bidPriceAdjusted;\n  }\n}\n\nexports.adjustBids = function() {\n  return adjustBids(...arguments);\n};\n\nfunction getStandardBidderSettings() {\n  let bidder_settings = pbjs.bidderSettings;\n  if (!bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD]) {\n    bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] = {\n      adserverTargeting: [\n        {\n          key: 'hb_bidder',\n          val: function (bidResponse) {\n            return bidResponse.bidderCode;\n          }\n        }, {\n          key: 'hb_adid',\n          val: function (bidResponse) {\n            return bidResponse.adId;\n          }\n        }, {\n          key: 'hb_pb',\n          val: function (bidResponse) {\n            if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.AUTO) {\n              return bidResponse.pbAg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.DENSE) {\n              return bidResponse.pbDg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.LOW) {\n              return bidResponse.pbLg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.MEDIUM) {\n              return bidResponse.pbMg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.HIGH) {\n              return bidResponse.pbHg;\n            } else if (_granularity === CONSTANTS.GRANULARITY_OPTIONS.CUSTOM) {\n              return bidResponse.pbCg;\n            }\n          }\n        }, {\n          key: 'hb_size',\n          val: function (bidResponse) {\n            return bidResponse.size;\n          }\n        }, {\n          key: 'hb_deal',\n          val: function (bidResponse) {\n            return bidResponse.dealId;\n          }\n        }\n      ]\n    };\n  }\n  return bidder_settings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD];\n}\n\nfunction getStandardBidderAdServerTargeting() {\n  return getStandardBidderSettings()[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n}\n\nexports.getStandardBidderAdServerTargeting = getStandardBidderAdServerTargeting;\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidmanager.js","const _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n      'min': 0,\n      'max': 3,\n      'increment': 0.01\n    },\n    {\n      'min': 3,\n      'max': 8,\n      'increment': 0.05\n    },\n    {\n      'min': 8,\n      'max': 20,\n      'increment': 0.5\n    }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n      'min': 0,\n      'max': 5,\n      'increment': 0.05\n    },\n    {\n      'min': 5,\n      'max': 10,\n      'increment': 0.1\n    },\n    {\n      'min': 10,\n      'max': 20,\n      'increment': 0.5\n    }]\n};\n\nfunction getPriceBucketString(cpm, customConfig) {\n  let cpmFloat = 0;\n  cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig),\n    custom:  (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig)\n  };\n}\n\nfunction getCpmStringValue(cpm, config) {\n  let cpmStr = '';\n  if (!isValidePriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev,curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = config.buckets.find(bucket => {\n    if (cpm > cap.max) {\n      const precision = bucket.precision || _defaultPrecision;\n      cpmStr = bucket.max.toFixed(precision);\n    } else if (cpm <= bucket.max && cpm >= bucket.min) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket.increment, bucket.precision);\n  }\n  return cpmStr;\n}\n\nfunction isValidePriceConfig(config) {\n  if (!config || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if(typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, increment, precision) {\n  if (!precision) {\n    precision = _defaultPrecision;\n  }\n  let bucketSize = 1 / increment;\n  return (Math.floor(cpm * bucketSize) / bucketSize).toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidePriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","function Adapter(code) {\n  var bidderCode = code;\n\n  function setBidderCode(code) {\n    bidderCode = code;\n  }\n\n  function getBidderCode() {\n    return bidderCode;\n  }\n\n  function callBids() {\n  }\n\n  return {\n    callBids: callBids,\n    setBidderCode: setBidderCode,\n    getBidderCode: getBidderCode\n  };\n}\n\nexports.createNew = function (bidderCode) {\n  return new Adapter(bidderCode);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/adapter.js","/** @module polyfill\nMisc polyfills\n*/\n/*jshint -W121 */\nrequire('core-js/fn/array/find');\nrequire('core-js/fn/array/includes');\nrequire('core-js/fn/object/assign');\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\nNumber.isInteger = Number.isInteger || function(value) {\n  return typeof value === 'number' &&\n    isFinite(value) &&\n    Math.floor(value) === value;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/polyfill.js","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/fn/array/find.js\n// module id = 17\n// module chunks = 0","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export')\n  , $find   = require('./_array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/es6.array.find.js\n// module id = 18\n// module chunks = 0","var global    = require('./_global')\n  , core      = require('./_core')\n  , hide      = require('./_hide')\n  , redefine  = require('./_redefine')\n  , ctx       = require('./_ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target)redefine(target, key, out, type & $export.U);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_export.js\n// module id = 19\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_global.js\n// module id = 20\n// module chunks = 0","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_core.js\n// module id = 21\n// module chunks = 0","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_hide.js\n// module id = 22\n// module chunks = 0","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-dp.js\n// module id = 23\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_an-object.js\n// module id = 24\n// module chunks = 0","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_is-object.js\n// module id = 25\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_ie8-dom-define.js\n// module id = 26\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_descriptors.js\n// module id = 27\n// module chunks = 0","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_fails.js\n// module id = 28\n// module chunks = 0","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_dom-create.js\n// module id = 29\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-primitive.js\n// module id = 30\n// module chunks = 0","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_property-desc.js\n// module id = 31\n// module chunks = 0","var global    = require('./_global')\n  , hide      = require('./_hide')\n  , has       = require('./_has')\n  , SRC       = require('./_uid')('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  var isFunction = typeof val == 'function';\n  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n  if(O[key] === val)return;\n  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe){\n      delete O[key];\n      hide(O, key, val);\n    } else {\n      if(O[key])O[key] = val;\n      else hide(O, key, val);\n    }\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_redefine.js\n// module id = 32\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_has.js\n// module id = 33\n// module chunks = 0","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_uid.js\n// module id = 34\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_ctx.js\n// module id = 35\n// module chunks = 0","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_a-function.js\n// module id = 36\n// module chunks = 0","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_array-methods.js\n// module id = 37\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_iobject.js\n// module id = 38\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_cof.js\n// module id = 39\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-object.js\n// module id = 40\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_defined.js\n// module id = 41\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-length.js\n// module id = 42\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-integer.js\n// module id = 43\n// module chunks = 0","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_array-species-create.js\n// module id = 44\n// module chunks = 0","var isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_array-species-constructor.js\n// module id = 45\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_is-array.js\n// module id = 46\n// module chunks = 0","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_wks.js\n// module id = 47\n// module chunks = 0","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_shared.js\n// module id = 48\n// module chunks = 0","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables')\n  , ArrayProto  = Array.prototype;\nif(ArrayProto[UNSCOPABLES] == undefined)require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function(key){\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_add-to-unscopables.js\n// module id = 49\n// module chunks = 0","require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/_core').Array.includes;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/fn/array/includes.js\n// module id = 50\n// module chunks = 0","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export   = require('./_export')\n  , $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /*, fromIndex = 0 */){\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/es7.array.includes.js\n// module id = 51\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_array-includes.js\n// module id = 52\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-iobject.js\n// module id = 53\n// module chunks = 0","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_to-index.js\n// module id = 54\n// module chunks = 0","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/fn/object/assign.js\n// module id = 55\n// module chunks = 0","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/es6.object.assign.js\n// module id = 56\n// module chunks = 0","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-assign.js\n// module id = 57\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-keys.js\n// module id = 58\n// module chunks = 0","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-keys-internal.js\n// module id = 59\n// module chunks = 0","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_shared-key.js\n// module id = 60\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_enum-bug-keys.js\n// module id = 61\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-gops.js\n// module id = 62\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/modules/_object-pie.js\n// module id = 63\n// module chunks = 0","/* Secure Creatives\n  Provides support for rendering creatives into cross domain iframes such as SafeFrame to prevent\n   access to a publisher page from creative payloads.\n */\n\nimport events from './events';\nimport { EVENTS } from './constants';\n\nconst BID_WON = EVENTS.BID_WON;\n\n\nexport function listenMessagesFromCreative() {\n  addEventListener('message', receiveMessage, false);\n}\n\nfunction receiveMessage(ev) {\n  var key = ev.message ? 'message' : 'data';\n  var data = {};\n  try {\n    data = JSON.parse(ev[key]);\n  } catch (e) {\n    return;\n  }\n\n  if (data.adId) {\n    const adObject = pbjs._bidsReceived.find(function (bid) {\n      return bid.adId === data.adId;\n    });\n\n    if (data.message === 'Prebid Request') {\n      sendAdToCreative(adObject, data.adServerDomain, ev.source);\n      events.emit(BID_WON, adObject);\n    }\n  }\n}\n\nfunction sendAdToCreative(adObject, remoteDomain, source) {\n  const { adId, ad, adUrl, width, height } = adObject;\n\n  if (adId) {\n    resizeRemoteCreative(adObject);\n    source.postMessage(JSON.stringify({\n      message: 'Prebid Response',\n      ad,\n      adUrl,\n      adId,\n      width,\n      height\n    }), remoteDomain);\n  }\n}\n\nfunction resizeRemoteCreative({ adUnitCode, width, height }) {\n  const iframe = document.getElementById(window.googletag.pubads()\n    .getSlots().find(slot => {\n      return slot.getAdUnitPath() === adUnitCode ||\n        slot.getSlotElementId() === adUnitCode;\n    }).getSlotElementId()).querySelector('iframe');\n\n  iframe.width = '' + width;\n  iframe.height = '' + height;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/secure-creatives.js","var utils = require('./utils');\nlet _requestCache = {};\n\n//add a script tag to the page, used to add /jpt call to page\nexports.loadScript = function (tagSrc, callback, cacheRequest) {\n  //var noop = () => {};\n  //\n  //callback = callback || noop;\n  if (!tagSrc) {\n    utils.logError('Error attempting to request empty URL', 'adloader.js:loadScript');\n    return;\n  }\n\n  if (cacheRequest) {\n    if (_requestCache[tagSrc]) {\n      if (callback && typeof callback === 'function') {\n        if (_requestCache[tagSrc].loaded) {\n          //invokeCallbacks immediately\n          callback();\n        } else {\n          //queue the callback\n          _requestCache[tagSrc].callbacks.push(callback);\n        }\n      }\n    } else {\n      _requestCache[tagSrc] = {\n        loaded: false,\n        callbacks: []\n      };\n      if (callback && typeof callback === 'function') {\n        _requestCache[tagSrc].callbacks.push(callback);\n      }\n\n      requestResource(tagSrc, function () {\n        _requestCache[tagSrc].loaded = true;\n        try {\n          for (let i = 0; i < _requestCache[tagSrc].callbacks.length; i++) {\n            _requestCache[tagSrc].callbacks[i]();\n          }\n        }\n        catch (e) {\n          utils.logError('Error executing callback', 'adloader.js:loadScript', e);\n        }\n      });\n    }\n  }\n\n  //trigger one time request\n  else {\n    requestResource(tagSrc, callback);\n  }\n\n};\n\nfunction requestResource(tagSrc, callback) {\n  var jptScript = document.createElement('script');\n  jptScript.type = 'text/javascript';\n  jptScript.async = true;\n\n  // Execute a callback if necessary\n  if (callback && typeof callback === 'function') {\n    if (jptScript.readyState) {\n      jptScript.onreadystatechange = function () {\n        if (jptScript.readyState === 'loaded' || jptScript.readyState === 'complete') {\n          jptScript.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      jptScript.onload = function () {\n        callback();\n      };\n    }\n  }\n\n  jptScript.src = tagSrc;\n\n  //add the new script tag to the page\n  var elToAppend = document.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : document.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(jptScript, elToAppend.firstChild);\n  }\n}\n\n//track a impbus tracking pixel\n//TODO: Decide if tracking via AJAX is sufficent, or do we need to\n//run impression trackers via page pixels?\nexports.trackPixel = function (pixelUrl) {\n  let delimiter;\n  let trackingPixel;\n\n  if (!pixelUrl || typeof (pixelUrl) !== 'string') {\n    utils.logMessage('Missing or invalid pixelUrl.');\n    return;\n  }\n\n  delimiter = pixelUrl.indexOf('?') > 0 ? '&' : '?';\n\n  //add a cachebuster so we don't end up dropping any impressions\n  trackingPixel = pixelUrl + delimiter + 'rnd=' + Math.floor(Math.random() * 1E7);\n  (new Image()).src = trackingPixel;\n  return trackingPixel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adloader.js","import {formatQS} from './url';\nimport {getWinningBids} from './targeting';\n\n//Adserver parent class\nconst AdServer = function(attr) {\n  this.name = attr.adserver;\n  this.code = attr.code;\n  this.getWinningBidByCode = function() {\n    return getWinningBids(this.code)[0];\n  };\n};\n\n//DFP ad server\nexports.dfpAdserver = function (options, urlComponents) {\n  var adserver = new AdServer(options);\n  adserver.urlComponents = urlComponents;\n\n  var dfpReqParams = {\n    'env' : 'vp',\n    'gdfp_req' : '1',\n    'impl' : 's',\n    'unviewed_position_start' : '1'\n  };\n\n  var dfpParamsWithVariableValue = ['output', 'iu', 'sz', 'url', 'correlator', 'description_url', 'hl'];\n\n  var getCustomParams = function(targeting) {\n    return encodeURIComponent(formatQS(targeting));\n  };\n\n  adserver.appendQueryParams = function() {\n    var bid = adserver.getWinningBidByCode();\n    if (bid) {\n      this.urlComponents.search.description_url = encodeURIComponent(bid.descriptionUrl);\n      this.urlComponents.search.cust_params = getCustomParams(bid.adserverTargeting);\n      this.urlComponents.search.correlator = Date.now();\n    }\n  };\n\n  adserver.verifyAdserverTag = function() {\n    for(var key in dfpReqParams) {\n      if(!this.urlComponents.search.hasOwnProperty(key) || this.urlComponents.search[key] !== dfpReqParams[key]) {\n        return false;\n      }\n    }\n    for(var i in dfpParamsWithVariableValue) {\n      if(!this.urlComponents.search.hasOwnProperty(dfpParamsWithVariableValue[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  return adserver;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/adserver.js","import { uniques, isGptPubadsDefined, getHighestCpm, adUnitsFilter } from './utils';\nconst bidmanager = require('./bidmanager.js');\nconst utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\n\nvar targeting = exports;\nvar pbTargetingKeys = [];\n\ntargeting.resetPresetTargeting = function() {\n  if (isGptPubadsDefined()) {\n    window.googletag.pubads().getSlots().forEach(slot => {\n      pbTargetingKeys.forEach(function(key){\n        // reset only registered adunits\n        pbjs.adUnits.find(function(unit) {\n          if (unit.code === slot.getAdUnitPath() ||\n              unit.code === slot.getSlotElementId()) {\n            slot.setTargeting(key, null);\n          }\n        });\n      });\n    });\n  }\n};\n\ntargeting.getAllTargeting = function(adUnitCode) {\n  const adUnitCodes = adUnitCode && adUnitCode.length ? [adUnitCode] : pbjs._adUnitCodes;\n\n  // Get targeting for the winning bid. Add targeting for any bids that have\n  // `alwaysUseBid=true`. If sending all bids is enabled, add targeting for losing bids.\n  var targeting = getWinningBidTargeting(adUnitCodes)\n      .concat(getAlwaysUseBidTargeting(adUnitCodes))\n      .concat(pbjs._sendAllBids ? getBidLandscapeTargeting(adUnitCodes) : []);\n\n  //store a reference of the targeting keys\n  targeting.map(adUnitCode => {\n    Object.keys(adUnitCode).map(key => {\n      adUnitCode[key].map(targetKey => {\n        if (pbTargetingKeys.indexOf(Object.keys(targetKey)[0]) === -1) {\n          pbTargetingKeys = Object.keys(targetKey).concat(pbTargetingKeys);\n        }\n      });\n    });\n  });\n  return targeting;\n};\n\ntargeting.setTargeting = function(targetingConfig) {\n  window.googletag.pubads().getSlots().forEach(slot => {\n    targetingConfig.filter(targeting => Object.keys(targeting)[0] === slot.getAdUnitPath() ||\n      Object.keys(targeting)[0] === slot.getSlotElementId())\n      .forEach(targeting => targeting[Object.keys(targeting)[0]]\n        .forEach(key => {\n          key[Object.keys(key)[0]]\n            .map((value) => {\n              utils.logMessage(`Attempting to set key value for slot: ${slot.getSlotElementId()} key: ${Object.keys(key)[0]} value: ${value}`);\n              return value;\n            })\n            .forEach(value => {\n              slot.setTargeting(Object.keys(key)[0], value);\n            });\n        }));\n  });\n};\n\ntargeting.getWinningBids = function(adUnitCode) {\n  // use the given adUnitCode as a filter if present or all adUnitCodes if not\n  const adUnitCodes = adUnitCode ? [adUnitCode] : pbjs._adUnitCodes;\n\n  return pbjs._bidsReceived\n    .filter(bid => adUnitCodes.includes(bid.adUnitCode))\n    .filter(bid => bid.cpm > 0)\n    .map(bid => bid.adUnitCode)\n    .filter(uniques)\n    .map(adUnitCode => pbjs._bidsReceived\n      .filter(bid => bid.adUnitCode === adUnitCode ? bid : null)\n      .reduce(getHighestCpm,\n        {\n          adUnitCode: adUnitCode,\n          cpm: 0,\n          adserverTargeting: {},\n          timeToRespond: 0\n        }));\n};\n\ntargeting.setTargetingForAst = function() {\n  let targeting = pbjs.getAdserverTargeting();\n  Object.keys(targeting).forEach(targetId =>\n    Object.keys(targeting[targetId]).forEach(key => {\n      utils.logMessage(`Attempting to set targeting for targetId: ${targetId} key: ${key} value: ${targeting[targetId][key]}`);\n      //setKeywords supports string and array as value\n      if(utils.isStr(targeting[targetId][key]) || utils.isArray(targeting[targetId][key])) {\n        let keywordsObj = {};\n        let input = 'hb_adid';\n        let nKey = (key.substring(0, input.length) === input) ? key.toUpperCase() : key;\n        keywordsObj[nKey] = targeting[targetId][key];\n        window.apntag.setKeywords(targetId,keywordsObj);\n      }\n    })\n  );\n};\n\nfunction getWinningBidTargeting() {\n  let winners = targeting.getWinningBids();\n  let standardKeys = getStandardKeys();\n\n  winners = winners.map(winner => {\n    return {\n      [winner.adUnitCode]: Object.keys(winner.adserverTargeting)\n        .filter(key =>\n          typeof winner.sendStandardTargeting === \"undefined\" ||\n          winner.sendStandardTargeting ||\n          standardKeys.indexOf(key) === -1)\n        .map(key => ({ [key.substring(0, 20)]: [winner.adserverTargeting[key]] }))\n    };\n  });\n\n  return winners;\n}\n\nfunction getStandardKeys() {\n  return bidmanager.getStandardBidderAdServerTargeting()        // in case using a custom standard key set\n                   .map(targeting => targeting.key)\n                   .concat(CONSTANTS.TARGETING_KEYS).filter(uniques);     // standard keys defined in the library.\n}\n\n/**\n * Get custom targeting keys for bids that have `alwaysUseBid=true`.\n */\nfunction getAlwaysUseBidTargeting(adUnitCodes) {\n  let standardKeys = getStandardKeys();\n  return pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, adUnitCodes))\n    .map(bid => {\n      if (bid.alwaysUseBid) {\n        return {\n          [bid.adUnitCode]: Object.keys(bid.adserverTargeting).map(key => {\n            // Get only the non-standard keys of the losing bids, since we\n            // don't want to override the standard keys of the winning bid.\n            if (standardKeys.indexOf(key) > -1) {\n              return;\n            }\n\n            return { [key.substring(0, 20)]: [bid.adserverTargeting[key]] };\n\n          }).filter(key => key) // remove empty elements\n        };\n      }\n    })\n    .filter(bid => bid); // removes empty elements in array;\n}\n\nfunction getBidLandscapeTargeting(adUnitCodes) {\n  const standardKeys = CONSTANTS.TARGETING_KEYS;\n\n  return pbjs._bidsReceived\n    .filter(adUnitsFilter.bind(this, adUnitCodes))\n    .map(bid => {\n      if (bid.adserverTargeting) {\n        return {\n          [bid.adUnitCode]: getTargetingMap(bid, standardKeys.filter(\n            key => typeof bid.adserverTargeting[key] !== 'undefined') // mainly for possibly\n            // unset hb_deal\n          )\n        };\n      }\n    }).filter(bid => bid); // removes empty elements in array\n}\n\nfunction getTargetingMap(bid, keys) {\n  return keys.map(key => {\n    return {\n      [`${key}_${bid.bidderCode}`.substring(0, 20)]: [bid.adserverTargeting[key]]\n    };\n  });\n}\n\ntargeting.isApntagDefined = function() {\n  if (window.apntag && utils.isFn(window.apntag.setKeywords)) {\n    return true;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/targeting.js"],"sourceRoot":""}